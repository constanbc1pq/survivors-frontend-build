window.__require=function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return r(t[s][1][e]||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({BigNumber:[function(e,t){"use strict";cc._RF.push(t,"396aevgSSxJsaUbU4ZdxeVn","BigNumber"),function(e){var i,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,o=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,h=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function f(e){var t=0|e;return 0<e||e===t?t:t-1}function v(e){for(var t,i,n=1,r=e.length,o=e[0]+"";n<r;){for(t=e[n++]+"",i=l-t.length;i--;t="0"+t);o+=t}for(r=o.length;48===o.charCodeAt(--r););return o.slice(0,r+1||1)}function g(e,t){var i,n,r=e.c,o=t.c,s=e.s,a=t.s,c=e.e,l=t.e;if(!s||!a)return null;if(i=r&&!r[0],n=o&&!o[0],i||n)return i?n?0:-a:s;if(s!=a)return s;if(i=s<0,n=c==l,!r||!o)return n?0:!r^i?1:-1;if(!n)return l<c^i?1:-1;for(a=(c=r.length)<(l=o.length)?c:l,s=0;s<a;s++)if(r[s]!=o[s])return r[s]>o[s]^i?1:-1;return c==l?0:l<c^i?1:-1}function m(e,t,i,n){if(e<t||i<e||e!==o(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||i<e?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return f(e.e/l)==t&&e.c[t]%2!=0}function b(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,i){var n,r;if(t<0){for(r=i+".";++t;r+=i);e=r+e}else if(++t>(n=e.length)){for(r=i,t-=n;--t;r+=i);e+=r}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(i=function e(t){var i,E,w,S,P,_,L,x,M,R,B=j.prototype={constructor:j,toString:null,valueOf:null},N=new j(1),I=20,T=4,C=-7,F=21,A=-1e7,H=1e7,O=!1,D=1,V=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz";function j(e,t){var i,r,s,c,u,d,p,f,v=this;if(!(v instanceof j))return new j(e,t);if(null==t){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>H?v.c=v.e=null:e.e<A?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,u=e;10<=u;u/=10,c++);return void(v.c=H<c?v.e=null:(v.e=c,[e]))}f=String(e)}else{if(!n.test(f=String(e)))return w(v,f,d);v.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}-1<(c=f.indexOf("."))&&(f=f.replace(".","")),0<(u=f.search(/e/i))?(c<0&&(c=u),c+=+f.slice(u+1),f=f.substring(0,u)):c<0&&(c=f.length)}else{if(m(t,2,q.length,"Base"),10==t)return K(v=new j(e),I+v.e+1,T);if(f=String(e),d="number"==typeof e){if(0*e!=0)return w(v,f,d,t);if(v.s=1/e<0?(f=f.slice(1),-1):1,j.DEBUG&&15<f.replace(/^0\.0*|\./,"").length)throw Error(a+e)}else v.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(i=q.slice(0,t),c=u=0,p=f.length;u<p;u++)if(i.indexOf(r=f.charAt(u))<0){if("."==r){if(c<u){c=p;continue}}else if(!s&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){s=!0,u=-1,c=0;continue}return w(v,String(e),d,t)}d=!1,-1<(c=(f=E(f,t,10,v.s)).indexOf("."))?f=f.replace(".",""):c=f.length}for(u=0;48===f.charCodeAt(u);u++);for(p=f.length;48===f.charCodeAt(--p););if(f=f.slice(u,++p)){if(p-=u,d&&j.DEBUG&&15<p&&(h<e||e!==o(e)))throw Error(a+v.s*e);if((c=c-u-1)>H)v.c=v.e=null;else if(c<A)v.c=[v.e=0];else{if(v.e=c,v.c=[],u=(c+1)%l,c<0&&(u+=l),u<p){for(u&&v.c.push(+f.slice(0,u)),p-=l;u<p;)v.c.push(+f.slice(u,u+=l));u=l-(f=f.slice(u)).length}else u-=p;for(;u--;f+="0");v.c.push(+f)}}else v.c=[v.e=0]}function U(e,t,i,n){var r,o,s,a,c;if(null==i?i=T:m(i,0,8),!e.c)return e.toString();if(r=e.c[0],s=e.e,null==t)c=v(e.c),c=1==n||2==n&&(s<=C||F<=s)?b(c,s):k(c,s,"0");else if(o=(e=K(new j(e),t,i)).e,a=(c=v(e.c)).length,1==n||2==n&&(t<=o||o<=C)){for(;a<t;c+="0",a++);c=b(c,o)}else if(t-=s,c=k(c,o,"0"),a<o+1){if(0<--t)for(c+=".";t--;c+="0");}else if(0<(t+=o-a))for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&r?"-"+c:c}function W(e,t){for(var i,n=1,r=new j(e[0]);n<e.length;n++){if(!(i=new j(e[n])).s){r=i;break}t.call(r,i)&&(r=i)}return r}function z(e,t,i){for(var n=1,r=t.length;!t[--r];t.pop());for(r=t[0];10<=r;r/=10,n++);return(i=n+i*l-1)>H?e.c=e.e=null:e.c=i<A?[e.e=0]:(e.e=i,t),e}function K(e,t,i,n){var s,a,h,d,p,f,v,g=e.c,m=u;if(g){e:{for(s=1,d=g[0];10<=d;d/=10,s++);if((a=t-s)<0)a+=l,h=t,v=(p=g[f=0])/m[s-h-1]%10|0;else if((f=r((a+1)/l))>=g.length){if(!n)break e;for(;g.length<=f;g.push(0));p=v=0,h=(a%=l)-l+(s=1)}else{for(p=d=g[f],s=1;10<=d;d/=10,s++);v=(h=(a%=l)-l+s)<0?0:p/m[s-h-1]%10|0}if(n=n||t<0||null!=g[f+1]||(h<0?p:p%m[s-h-1]),n=i<4?(v||n)&&(0==i||i==(e.s<0?3:2)):5<v||5==v&&(4==i||n||6==i&&(0<a?0<h?p/m[s-h]:0:g[f-1])%10&1||i==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=m[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=f,d=1,f--):(g.length=f+1,d=m[l-a],g[f]=0<h?o(p/m[s-h]%m[h])*d:0),n)for(;;){if(0==f){for(a=1,h=g[0];10<=h;h/=10,a++);for(h=g[0]+=d,d=1;10<=h;h/=10,d++);a!=d&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[f]+=d,g[f]!=c)break;g[f--]=0,d=1}for(a=g.length;0===g[--a];g.pop());}e.e>H?e.c=e.e=null:e.e<A&&(e.c=[e.e=0])}return e}function Y(e){var t,i=e.e;return null===i?e.toString():(t=v(e.c),t=i<=C||F<=i?b(t,i):k(t,i,"0"),e.s<0?"-"+t:t)}return j.clone=e,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(e){var t,i;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(i=e[t],0,p,t),I=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(i=e[t],0,8,t),T=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(m(i[0],-p,0,t),m(i[1],0,p,t),C=i[0],F=i[1]):(m(i,-p,p,t),C=-(F=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)m(i[0],-p,-1,t),m(i[1],1,p,t),A=i[0],H=i[1];else{if(m(i,-p,p,t),!i)throw Error(s+t+" cannot be zero: "+i);A=-(H=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(s+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw O=!i,Error(s+"crypto unavailable");O=i}else O=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(i=e[t],0,9,t),D=i),e.hasOwnProperty(t="POW_PRECISION")&&(m(i=e[t],0,p,t),V=i),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(i=e[t]))throw Error(s+t+" not an object: "+i);G=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.$|[+-.\s]|(.).*\1/.test(i))throw Error(s+t+" invalid: "+i);q=i}}return{DECIMAL_PLACES:I,ROUNDING_MODE:T,EXPONENTIAL_AT:[C,F],RANGE:[A,H],CRYPTO:O,MODULO_MODE:D,POW_PRECISION:V,FORMAT:G,ALPHABET:q}},j.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!j.DEBUG)return!0;var t,i,n=e.c,r=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&-p<=r&&r<=p&&r===o(r)){if(0===n[0]){if(0===r&&1===n.length)return!0;break e}if((t=(r+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((i=n[t])<0||c<=i||i!==o(i))break e;if(0!==i)return!0}}}else if(null===n&&null===r&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},j.maximum=j.max=function(){return W(arguments,B.lt)},j.minimum=j.min=function(){return W(arguments,B.gt)},j.random=(S=9007199254740992,P=Math.random()*S&2097151?function(){return o(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,n,a,c,h=0,d=[],f=new j(N);if(null==e?e=I:m(e,0,p),a=r(e/l),O)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));h<a;)9e15<=(c=131072*t[h]+(t[h+1]>>>11))?(i=crypto.getRandomValues(new Uint32Array(2)),t[h]=i[0],t[h+1]=i[1]):(d.push(c%1e14),h+=2);h=a/2}else{if(!crypto.randomBytes)throw O=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);h<a;)9e15<=(c=281474976710656*(31&t[h])+1099511627776*t[h+1]+4294967296*t[h+2]+16777216*t[h+3]+(t[h+4]<<16)+(t[h+5]<<8)+t[h+6])?crypto.randomBytes(7).copy(t,h):(d.push(c%1e14),h+=7);h=a/7}if(!O)for(;h<a;)(c=P())<9e15&&(d[h++]=c%1e14);for(a=d[--h],e%=l,a&&e&&(c=u[l-e],d[h]=o(a/c)*c);0===d[h];d.pop(),h--);if(h<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=l);for(h=1,c=d[0];10<=c;c/=10,h++);h<l&&(n-=l-h)}return f.e=n,f.c=d,f}),j.sum=function(){for(var e=1,t=arguments,i=new j(t[0]);e<t.length;)i=i.plus(t[e++]);return i},E=function(){var e="0123456789";function t(e,t,i,n){for(var r,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>i-1&&(null==s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/i|0,s[r]%=i)}return s.reverse()}return function(n,r,o,s,a){var c,l,h,u,d,p,f,g,m=n.indexOf("."),y=I,b=T;for(0<=m&&(u=V,V=0,n=n.replace(".",""),p=(g=new j(r)).pow(n.length-m),V=u,g.c=t(k(v(p.c),p.e,"0"),10,o,e),g.e=g.c.length),h=u=(f=t(n,r,o,a?(c=q,e):(c=e,q))).length;0==f[--u];f.pop());if(!f[0])return c.charAt(0);if(m<0?--h:(p.c=f,p.e=h,p.s=s,f=(p=i(p,g,y,b,o)).c,d=p.r,h=p.e),m=f[l=h+y+1],u=o/2,d=d||l<0||null!=f[l+1],d=b<4?(null!=m||d)&&(0==b||b==(p.s<0?3:2)):u<m||m==u&&(4==b||d||6==b&&1&f[l-1]||b==(p.s<0?8:7)),l<1||!f[0])n=d?k(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(f.length=l,d)for(--o;++f[--l]>o;)f[l]=0,l||(++h,f=[1].concat(f));for(u=f.length;!f[--u];);for(m=0,n="";m<=u;n+=c.charAt(f[m++]));n=k(n,h,c.charAt(0))}return n}}(),i=function(){function e(e,t,i){var n,r,o,s,a=0,c=e.length,l=t%d,h=t/d|0;for(e=e.slice();c--;)a=((r=l*(o=e[c]%d)+(n=h*o+(s=e[c]/d|0)*l)%d*d+a)/i|0)+(n/d|0)+h*s,e[c]=r%i;return a&&(e=[a].concat(e)),e}function t(e,t,i,n){var r,o;if(i!=n)o=n<i?1:-1;else for(r=o=0;r<i;r++)if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}return o}function i(e,t,i,n){for(var r=0;i--;)e[i]-=r,r=e[i]<t[i]?1:0,e[i]=r*n+e[i]-t[i];for(;!e[0]&&1<e.length;e.splice(0,1));}return function(n,r,s,a,h){var u,d,p,v,g,m,y,b,k,E,w,S,P,_,L,x,M,R=n.s==r.s?1:-1,B=n.c,N=r.c;if(!(B&&B[0]&&N&&N[0]))return new j(n.s&&r.s&&(B?!N||B[0]!=N[0]:N)?B&&0==B[0]||!N?0*R:R/0:NaN);for(k=(b=new j(R)).c=[],R=s+(d=n.e-r.e)+1,h||(h=c,d=f(n.e/l)-f(r.e/l),R=R/l|0),p=0;N[p]==(B[p]||0);p++);if(N[p]>(B[p]||0)&&d--,R<0)k.push(1),v=!0;else{for(_=B.length,x=N.length,R+=2,1<(g=o(h/(N[p=0]+1)))&&(N=e(N,g,h),B=e(B,g,h),x=N.length,_=B.length),P=x,w=(E=B.slice(0,x)).length;w<x;E[w++]=0);M=N.slice(),M=[0].concat(M),L=N[0],N[1]>=h/2&&L++;do{if(g=0,(u=t(N,E,x,w))<0){if(S=E[0],x!=w&&(S=S*h+(E[1]||0)),1<(g=o(S/L)))for(h<=g&&(g=h-1),y=(m=e(N,g,h)).length,w=E.length;1==t(m,E,y,w);)g--,i(m,x<y?M:N,y,h),y=m.length,u=1;else 0==g&&(u=g=1),y=(m=N.slice()).length;if(y<w&&(m=[0].concat(m)),i(E,m,w,h),w=E.length,-1==u)for(;t(N,E,x,w)<1;)g++,i(E,x<w?M:N,w,h),w=E.length}else 0===u&&(g++,E=[0]);k[p++]=g,E[0]?E[w++]=B[P]||0:(E=[B[P]],w=1)}while((P++<_||null!=E[0])&&R--);v=null!=E[0],k[0]||k.splice(0,1)}if(h==c){for(p=1,R=k[0];10<=R;R/=10,p++);K(b,s+(b.e=p+d*l-1)+1,a,v)}else b.e=d,b.r=+v;return b}}(),_=/^(-?)0([xbo])(?=\w[\w.]*$)/i,L=/^([^.]+)\.$/,x=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,w=function(e,t,i,n){var r,o=i?t:t.replace(R,"");if(M.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!i&&(o=o.replace(_,function(e,t,i){return r="x"==(i=i.toLowerCase())?16:"b"==i?2:8,n&&n!=r?e:t}),n&&(r=n,o=o.replace(L,"$1").replace(x,"0.$1")),t!=o))return new j(o,r);if(j.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},B.absoluteValue=B.abs=function(){var e=new j(this);return e.s<0&&(e.s=1),e},B.comparedTo=function(e,t){return g(this,new j(e,t))},B.decimalPlaces=B.dp=function(e,t){var i,n,r;if(null!=e)return m(e,0,p),null==t?t=T:m(t,0,8),K(new j(this),e+this.e+1,t);if(!(i=this.c))return null;if(n=((r=i.length-1)-f(this.e/l))*l,r=i[r])for(;r%10==0;r/=10,n--);return n<0&&(n=0),n},B.dividedBy=B.div=function(e,t){return i(this,new j(e,t),I,T)},B.dividedToIntegerBy=B.idiv=function(e,t){return i(this,new j(e,t),0,1)},B.exponentiatedBy=B.pow=function(e,t){var i,n,a,c,h,u,d,p,f=this;if((e=new j(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new j(t)),h=14<e.e,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return p=new j(Math.pow(+Y(f),h?2-y(e):+Y(e))),t?p.mod(t):p;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new j(NaN);(n=!u&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(9<e.e&&(0<f.e||f.e<-1||(0==f.e?1<f.c[0]||h&&24e7<=f.c[1]:f.c[0]<8e13||h&&f.c[0]<=9999975e7)))return c=f.s<0&&y(e)?-0:0,-1<f.e&&(c=1/c),new j(u?1/c:c);V&&(c=r(V/l+2))}for(d=h?(i=new j(.5),u&&(e.s=1),y(e)):(a=Math.abs(+Y(e)))%2,p=new j(N);;){if(d){if(!(p=p.times(f)).c)break;c?p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}if(a){if(0===(a=o(a/2)))break;d=a%2}else if(K(e=e.times(i),e.e+1,1),14<e.e)d=y(e);else{if(0==(a=+Y(e)))break;d=a%2}f=f.times(f),c?f.c&&f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}return n?p:(u&&(p=N.div(p)),t?p.mod(t):c?K(p,V,T,void 0):p)},B.integerValue=function(e){var t=new j(this);return null==e?e=T:m(e,0,8),K(t,t.e+1,e)},B.isEqualTo=B.eq=function(e,t){return 0===g(this,new j(e,t))},B.isFinite=function(){return!!this.c},B.isGreaterThan=B.gt=function(e,t){return 0<g(this,new j(e,t))},B.isGreaterThanOrEqualTo=B.gte=function(e,t){return 1===(t=g(this,new j(e,t)))||0===t},B.isInteger=function(){return!!this.c&&f(this.e/l)>this.c.length-2},B.isLessThan=B.lt=function(e,t){return g(this,new j(e,t))<0},B.isLessThanOrEqualTo=B.lte=function(e,t){return-1===(t=g(this,new j(e,t)))||0===t},B.isNaN=function(){return!this.s},B.isNegative=function(){return this.s<0},B.isPositive=function(){return 0<this.s},B.isZero=function(){return!!this.c&&0==this.c[0]},B.minus=function(e,t){var i,n,r,o,s=this,a=s.s;if(t=(e=new j(e,t)).s,!a||!t)return new j(NaN);if(a!=t)return e.s=-t,s.plus(e);var h=s.e/l,u=e.e/l,d=s.c,p=e.c;if(!h||!u){if(!d||!p)return d?(e.s=-t,e):new j(p?s:NaN);if(!d[0]||!p[0])return p[0]?(e.s=-t,e):new j(d[0]?s:3==T?-0:0)}if(h=f(h),u=f(u),d=d.slice(),a=h-u){for((r=(o=a<0)?(a=-a,d):(u=h,p)).reverse(),t=a;t--;r.push(0));r.reverse()}else for(n=(o=(a=d.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(d[t]!=p[t]){o=d[t]<p[t];break}if(o&&(r=d,d=p,p=r,e.s=-e.s),0<(t=(n=p.length)-(i=d.length)))for(;t--;d[i++]=0);for(t=c-1;a<n;){if(d[--n]<p[n]){for(i=n;i&&!d[--i];d[i]=t);--d[i],d[n]+=c}d[n]-=p[n]}for(;0==d[0];d.splice(0,1),--u);return d[0]?z(e,d,u):(e.s=3==T?-1:1,e.c=[e.e=0],e)},B.modulo=B.mod=function(e,t){var n,r,o=this;return e=new j(e,t),!o.c||!e.s||e.c&&!e.c[0]?new j(NaN):!e.c||o.c&&!o.c[0]?new j(o):(9==D?(r=e.s,e.s=1,n=i(o,e,0,3),e.s=r,n.s*=r):n=i(o,e,0,D),(e=o.minus(n.times(e))).c[0]||1!=D||(e.s=o.s),e)},B.multipliedBy=B.times=function(e,t){var i,n,r,o,s,a,h,u,p,v,g,m,y,b,k,E=this,w=E.c,S=(e=new j(e,t)).c;if(!(w&&S&&w[0]&&S[0]))return!E.s||!e.s||w&&!w[0]&&!S||S&&!S[0]&&!w?e.c=e.e=e.s=null:(e.s*=E.s,w&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=f(E.e/l)+f(e.e/l),e.s*=E.s,(h=w.length)<(v=S.length)&&(y=w,w=S,S=y,r=h,h=v,v=r),r=h+v,y=[];r--;y.push(0));for(b=c,k=d,r=v;0<=--r;){for(i=0,g=S[r]%k,m=S[r]/k|0,o=r+(s=h);r<o;)i=((u=g*(u=w[--s]%k)+(a=m*u+(p=w[s]/k|0)*g)%k*k+y[o]+i)/b|0)+(a/k|0)+m*p,y[o--]=u%b;y[o]=i}return i?++n:y.splice(0,1),z(e,y,n)},B.negated=function(){var e=new j(this);return e.s=-e.s||null,e},B.plus=function(e,t){var i,n=this,r=n.s;if(t=(e=new j(e,t)).s,!r||!t)return new j(NaN);if(r!=t)return e.s=-t,n.minus(e);var o=n.e/l,s=e.e/l,a=n.c,h=e.c;if(!o||!s){if(!a||!h)return new j(r/0);if(!a[0]||!h[0])return h[0]?e:new j(a[0]?n:0*r)}if(o=f(o),s=f(s),a=a.slice(),r=o-s){for((i=0<r?(s=o,h):(r=-r,a)).reverse();r--;i.push(0));i.reverse()}for((r=a.length)-(t=h.length)<0&&(i=h,h=a,a=i,t=r),r=0;t;)r=(a[--t]=a[t]+h[t]+r)/c|0,a[t]=c===a[t]?0:a[t]%c;return r&&(a=[r].concat(a),++s),z(e,a,s)},B.precision=B.sd=function(e,t){var i,n,r;if(null!=e&&e!==!!e)return m(e,1,p),null==t?t=T:m(t,0,8),K(new j(this),e,t);if(!(i=this.c))return null;if(n=(r=i.length-1)*l+1,r=i[r]){for(;r%10==0;r/=10,n--);for(r=i[0];10<=r;r/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},B.shiftedBy=function(e){return m(e,-h,h),this.times("1e"+e)},B.squareRoot=B.sqrt=function(){var e,t,n,r,o,s=this,a=s.c,c=s.s,l=s.e,h=I+4,u=new j("0.5");if(1!==c||!a||!a[0])return new j(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if((n=0==(c=Math.sqrt(+Y(s)))||c==1/0?(((t=v(a)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=f((l+1)/2)-(l<0||l%2),new j(t=c==1/0?"1e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):new j(c+"")).c[0])for((c=(l=n.e)+h)<3&&(c=0);;)if(o=n,n=u.times(o.plus(i(s,o,h,1))),v(o.c).slice(0,c)===(t=v(n.c)).slice(0,c)){if(n.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(K(n,n.e+I+2,1),e=!n.times(n).eq(s));break}if(!r&&(K(o,o.e+I+2,0),o.times(o).eq(s))){n=o;break}h+=4,c+=4,r=1}return K(n,n.e+I+1,T,e)},B.toExponential=function(e,t){return null!=e&&(m(e,0,p),e++),U(this,e,t,1)},B.toFixed=function(e,t){return null!=e&&(m(e,0,p),e=e+this.e+1),U(this,e,t)},B.toFormat=function(e,t,i){var n;if(null==i)null!=e&&t&&"object"==typeof t?(i=t,t=null):e&&"object"==typeof e?(i=e,e=t=null):i=G;else if("object"!=typeof i)throw Error(s+"Argument not an object: "+i);if(n=this.toFixed(e,t),this.c){var r,o=n.split("."),a=+i.groupSize,c=+i.secondaryGroupSize,l=i.groupSeparator||"",h=o[0],u=o[1],d=this.s<0,p=d?h.slice(1):h,f=p.length;if(c&&(r=a,a=c,f-=c=r),0<a&&0<f){for(r=f%a||a,h=p.substr(0,r);r<f;r+=a)h+=l+p.substr(r,a);0<c&&(h+=l+p.slice(r)),d&&(h="-"+h)}n=u?h+(i.decimalSeparator||"")+((c=+i.fractionGroupSize)?u.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):u):h}return(i.prefix||"")+n+(i.suffix||"")},B.toFraction=function(e){var t,n,r,o,a,c,h,d,p,f,g,m,y=this,b=y.c;if(null!=e&&(!(h=new j(e)).isInteger()&&(h.c||1!==h.s)||h.lt(N)))throw Error(s+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+Y(h));if(!b)return new j(y);for(t=new j(N),p=n=new j(N),r=d=new j(N),m=v(b),a=t.e=m.length-y.e-1,t.c[0]=u[(c=a%l)<0?l+c:c],e=!e||0<h.comparedTo(t)?0<a?t:p:h,c=H,H=1/0,h=new j(m),d.c[0]=0;f=i(h,t,0,1),1!=(o=n.plus(f.times(r))).comparedTo(e);)n=r,r=o,p=d.plus(f.times(o=p)),d=o,t=h.minus(f.times(o=t)),h=o;return o=i(e.minus(n),r,0,1),d=d.plus(o.times(p)),n=n.plus(o.times(r)),d.s=p.s=y.s,g=i(p,r,a*=2,T).minus(y).abs().comparedTo(i(d,n,a,T).minus(y).abs())<1?[p,r]:[d,n],H=c,g},B.toNumber=function(){return+Y(this)},B.toPrecision=function(e,t){return null!=e&&m(e,1,p),U(this,e,t,2)},B.toString=function(e){var t,i=this,n=i.s,r=i.e;return null===r?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(t=null==e?r<=C||F<=r?b(v(i.c),r):k(v(i.c),r,"0"):10===e?k(v((i=K(new j(i),I+r+1,T)).c),i.e,"0"):(m(e,2,q.length,"Base"),E(k(v(i.c),r,"0"),10,e,n,!0)),n<0&&i.c[0]&&(t="-"+t)),t},B.valueOf=B.toJSON=function(){return Y(this)},B._isBigNumber=!0,null!=t&&j.set(t),j}()).default=i.BigNumber=i,"function"==typeof define&&define.amd?define(function(){return i}):void 0!==t&&t.exports?t.exports=i:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=i)}(void 0),cc._RF.pop()},{}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"678b5pE315FEqlrOwSB/2jc","LocalizedLabel");var i=e("i18n");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){i.isInit||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label&&i.t(this.dataID)&&(this.label.string=i.t(this.dataID))}}),cc._RF.pop()},{i18n:"i18n"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"80fe08bAa9CBqJCHB/Yo3qI","LocalizedSprite");var i=e("i18n"),n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSprite"},properties:{spriteList:[n]},onLoad:function(){i.isInit||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(i.language)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteList.length;++t)if(this.spriteList[t].language===e)return this.spriteList[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteList[0]&&(t=this.spriteList[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{i18n:"i18n"}],achiveModel:[function(e,t){"use strict";cc._RF.push(t,"60adeYhe1JJNYOSY6+Hj9is","achiveModel"),t.exports={eventType:{INC_COUNT:"achiveModel.incCount#type#AssetOrKey",INC_LEVEL:"achiveModel.incLevel#type#AssetOrKey"},defData:{gainProp:{gold:5e3,equipNum:10},useRole:2,useSkill:5,usePassiveSkill:5},init:function(){var e=this;for(var t in console.log("Enter achive model ... "),M("data").achive)t in this.defData||delete M("data").achive[t];var i=function(t){var i,n;if(t in M("data").achive||(M("data").achive[t]={}),"useRole"==t||"useSkill"==t||"usePassiveSkill"==t)"useRole"==t&&(n="asset",i=M("role").getPlayerBaseDatas()),"useSkill"==t&&(n="name",i=M("skill").getBaseDatas()),"usePassiveSkill"==t&&(n="name",i=M("skill").getPassiveBaseDatas()),console.log("Enter achive model ... 2",t),i.forEach(function(e){M("data").achive[t]||(M("data").achive[t]={}),e[n]in M("data").achive[t]||(M("data").achive[t][e[n]]={total:0,count:0,level:0})}),console.log("Enter achive model ... 3",n,t,M("data").achive);else for(var r in e.defData[t])r in M("data").achive[t]||(M("data").achive[t][r]={total:0,count:0,level:0})};for(var n in this.defData)i(n)},incCount:function(e,t,i){void 0===i&&(i=1),M("data").achive[e][t].count+=i,M("data").achive[e][t].total+=i,E.emit(this.eventType.INC_COUNT,e,t)},incLevel:function(e,t){var i=this.getNextCount(e,t),n=M("data").achive[e][t].count;M("data").achive[e][t].count=n>i?n-i:0,M("data").achive[e][t].level+=1,E.emit(this.eventType.INC_LEVEL,e,t)},getDefDataVal:function(e,t){return"useRole"==e||"useSkill"==e||"usePassiveSkill"==e?this.defData[e]:this.defData[e][t]},getNextCount:function(e,t){var i=this.getDefDataVal(e,t),n=this.getLevel(e,t);return H.num((n+1)*i)},getCount:function(e,t){return H.num(M("data").achive[e][t].count)},getLevel:function(e,t){return H.num(M("data").achive[e][t].level)},getReward:function(e,t){console.log("Enter achive model ... getReward ... 0",M("data").achive[e][t].level);var i=this.getLevel(e,t);console.log("Enter achive model ... getReward ... 1",e,t,i),i<1&&(i=1);var n={prop:{}};return n.prop.gold=2e3*i,console.log("Enter achive model ... getReward ... 2",n),n},getTotal:function(e,t){return H.num(M("data").achive[e][t].total)},getTopTip:function(e,t){var i;return i="useRole"==e||"useSkill"==e?"achiveInfo."+e:"achiveInfo."+e+"."+t,"[Lv"+H.numAbbr(this.getLevel(e,t)+1)+L(i)+"] "+L("done")},isDone:function(e,t){return this.getCount(e,t)>=this.getNextCount(e,t)},isTip:function(){var e=!1;for(var t in M("data").achive)for(var i in M("data").achive[t])this.isDone(t,i)&&(e=!0);return e}},cc._RF.pop()},{}],adBoxInfo:[function(e,t){"use strict";cc._RF.push(t,"a42dcrxF3hIIbuRCDckWeKM","adBoxInfo"),cc.Class({extends:e("popup"),properties:{},show:function(){var e=this;return this.adBtn=this.find("adBtn",cc.Button),this.stop=!1,this.initItems(),this.upd(),this.adBtn.node.on("touchend",function(){if(e.adBtn.interactable){e.adBtn.interactable=!1,e.stop=!0,V("tip").showLoading();var t=function(){e.stop=!1,V("tip").close()},i=function(){t();var i=M("game").getBoxReward(!0);M("game").setReward(i),M("data").timeCount.adBox=0,V("gainTip").show(i),e.remove()};G("ad").showRewardedVideo(function(){i()},function(e){e&&V("tip").error(e),t()})}else V("tip").error(L("error_cd"))}),H.show(this)},initItems:function(){var e=this;this.items&&this.items.forEach(function(e){G("pool").put(e.node,!0)}),this.items=[];var t=function(){var t=G("pool").get(app.getPrefab("rewardItem"),"adBoxInforewardItem");return t.parent=e.find("rewardParent"),$(t,"rewardItem")},i=M("game").getBoxReward();for(var n in i.prop){var r=t();r.updProp(n,i.prop[n]),this.items.push(r)}i.chips.forEach(function(i){var n=t();n.updChip(i),e.items.push(n)})},upd:function(){if(!this.stop){var e=M("game").getBoxReward(),t=M("data").timeCount.adBox,i=e.cd;this.adBtn.interactable=t>i}},onEnable:function(){this._super(),E.on(app.root.eventType.LOOP,this.upd,this)},onDisable:function(){this._super(),E.off(app.root.eventType.LOOP,this.upd,this)}}),cc._RF.pop()},{popup:"popup"}],adBox:[function(e,t){"use strict";cc._RF.push(t,"bbd02B8FpZKY4Am59+XELMn","adBox"),cc.Class({extends:e("ccBase"),properties:{cdLabel:cc.Label},onLoad:function(){this.animExt=this.find("anim","animExt"),this.progressBar=this.find("anim/progressBar",cc.ProgressBar),this.upd(),this.btn=$(this.node,cc.Button),this.btn&&this.btn.node.on("touchend",function(){})},upd:function(){var e=M("game").getBoxReward(),t=M("data").timeCount.adBox,i=e.cd;if(t>i)this.cdLabel&&(this.cdLabel.string=L("canGain")),this.progressBar.node.active=!1,this.animExt.isPlaying("open")||this.animExt.play("open");else{var n=i-t;this.cdLabel&&(this.cdLabel.string=H.secondFormat(n,"{mm}:{ss}")),this.progressBar.node.active=!0,this.progressBar.progress=1-t/i,this.animExt.isPlaying("close")||this.animExt.play("close")}},onEnable:function(){E.on(app.root.eventType.LOOP,this.upd,this),E.on(M("game").eventType.SET_REWARD,this.upd,this)},onDisable:function(){E.off(app.root.eventType.LOOP,this.upd,this),E.off(M("game").eventType.SET_REWARD,this.upd,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],adMgr:[function(e,t){"use strict";cc._RF.push(t,"dba96mZcKhGX5s7wWRYSHWn","adMgr"),t.exports={init:function(){var e=this;this.RewardedVideo=null,this.Interstitial=null;try{R("tradplus").onInit=function(){H.isIos(),R("tradplus").RewardedVideo.init(""),R("tradplus").Interstitial.init(""),e.RewardedVideo=R("tradplus").RewardedVideo,e.Interstitial=R("tradplus").Interstitial,e.Interstitial.loadAd()},H.isIos(),R("tradplus").init("")}catch(t){H.log("TradPlus Error",t)}},showRewardedVideo:function(e,t){var i=this;if(!this._showRewardedVideo){this._showRewardedVideo=!0,G("audio").setVolume(0);var n=function(){i._showRewardedVideo=!1,G("audio").setVolume(1)};if(!H.isNative())return M("achive").incCount("lookAd","video"),n(),void e();if(!this.RewardedVideo)return n(),void t(L("error_ad_ready"));var r=!1;this.RewardedVideo.onAdReward=function(){H.log("RewardedVideo.onAdReward"),r=!0,M("achive").incCount("lookAd","video")},this.RewardedVideo.onAdClosed=function(){H.log("RewardedVideo.onAdClosed"),n(),r?e():t()},this.RewardedVideo.onTimeout=function(){H.log("RewardedVideo.onTimeout"),n(),t(L("error_timeout"))},this.RewardedVideo.onAdFailed=function(){H.log("RewardedVideo.onAdFailed"),n(),t(L("error_ad"))},this.RewardedVideo.onAdVideoError=function(){H.log("RewardedVideo.onAdVideoError"),n(),t(L("error_ad"))},this.RewardedVideo.showAd()}}},cc._RF.pop()},{}],addEquip:[function(e,t){"use strict";cc._RF.push(t,"f3c9b3Lk2VKbpyHLA3kBFxT","addEquip"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.touchClose=!1,this.addBtnEvents()},show:function(e){return this.data=e,this.upd(e),console.log("Enter AddEquip .. newEquipData",e),H.show(this)},upd:function(e){this.currentData=M("data").equips.filter(function(t){return t.type==e.type&&t.pos==e.pos})[0],this.newEquip=this.find("newEquip","equipDataInfo"),this.newEquip.upd(e,this.currentData),this.currentEquip=this.find("currentEquip","equipDataInfo"),this.currentData?(this.currentEquip.node.active=!0,this.currentEquip.upd(this.currentData,e),this.find("noEquipLabel").active=!1):(this.currentEquip.node.active=!1,this.find("noEquipLabel").active=!0)},equipBtnEvent:function(){var e=this;G("audio").playEffect("equip"),console.log("Before putOnEquip ... ",this.data),R("server").api("putOnEquip",this.data).then(function(t){0==t.errcode&&(M("equip").add(e.data),e.data=e.currentData,e.data?e.upd(e.data):e.remove())})},sellBtnEvent:function(){var e=this;G("audio").playEffect("coin"),R("server").api("sellEquip",this.data).then(function(t){if(0==t.errcode){var i=M("equip").calSell(e.data);for(var n in i)"gold"==n&&(M("prop").setNum("gold","+",i[n]),V("tip").success("+"+H.numAbbr(i[n]),app.find.goldSpriteFrame));e.remove()}})}}),cc._RF.pop()},{popup:"popup"}],agreement:[function(e,t){"use strict";cc._RF.push(t,"5e9e1s5Es9DlIpnmOHrQBhW","agreement"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.addBtnEvents()},show:function(e,t){return void 0===e&&(e="user"),this.touchClose=!t,this.callFunc=t,this.userBtn=$(this.find("userBtn"),cc.Button),this.privacyBtn=$(this.find("privacyBtn"),cc.Button),this.select(e),this.find("btnParent").active=t,H.show(this)},callFunc:function(){},select:function(e){"user"===e?(this.userBtn.interactable=!1,this.privacyBtn.interactable=!0,this.find("user").active=!0,this.find("privacy").active=!1):(this.userBtn.interactable=!0,this.privacyBtn.interactable=!1,this.find("user").active=!1,this.find("privacy").active=!0)},userBtnEvent:function(){this.select("user")},privacyBtnEvent:function(){this.select("privacy")},yesBtnEvent:function(){this.callFunc(!0)},noBtnEvent:function(){this.callFunc(!1)}}),cc._RF.pop()},{popup:"popup"}],animExt:[function(e,t){"use strict";cc._RF.push(t,"e13e1H3JvdPR6OPIxUR4YZ1","animExt"),cc.Class({editor:{menu:"base/animExt"},extends:cc.Component,properties:{anim:cc.Animation},ctor:function(){this.speedMul=1},play:function(e){var t=this,i="function"==typeof(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:null,n=i?arguments.length<=2?void 0:arguments[2]:arguments.length<=1?void 0:arguments[1];this.animState=this.anim.play(e),n&&(this.animState.repeatCount=n),this.animState.speed=this.speedMul,this.animState.once(cc.Animation.EventType.FINISHED,function(){t.onEnd(e),i&&i("callFunc")});var r=1;this.anim[e]=function(i){t.onEvent(e,i,r),r++}},onEnd:function(){},onEvent:function(){},isPlaying:function(e){var t=this.getState(e);return!!t&&t.isPlaying},getCurrentName:function(){return this.anim.currentClip&&this.anim.currentClip.name},getState:function(e){return this.anim.getAnimationState(e)},reset:function(){if(this.animState)for(var e=this.animState.curves,t=this.animState.getWrappedInfo(0),i=0;i<e.length;i++)e[i].sample(t.time,t.ratio)},getAnimNames:function(){var e=[];return this.anim.getClips().forEach(function(t){e.push(t.name)}),e},setSpeedMul:function(e){var t=this;this.speedMul=e,this.anim.getClips().forEach(function(i){t.getState(i.name).speed=e})}}),cc._RF.pop()},{}],animMask:[function(e,t){"use strict";cc._RF.push(t,"d85a6MzAllO4JpfcPMGYMjZ","animMask"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.touchClose=!1},show:function(e,t){var i=this;this.bgNode=this.find("anim/bg"),this.bgNode.width=app.screen.width,this.bgNode.height=app.screen.height,this.animNode=this.find("anim");var n,r,o=app.screen.width+.5*app.screen.width,s=app.screen.height+.5*app.screen.height;return"open"==e?(this.animNode.width=0,this.animNode.height=0,n=o,r=s):(this.animNode.width=o,this.animNode.height=s,n=0,r=0),cc.tween(this.animNode).to(.5,{width:n,height:r}).call(function(){t&&t(i)}).start(),H.show(this)}}),cc._RF.pop()},{popup:"popup"}],apple:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"c478bMbPcJDtoXN1H9UDkLb","apple");var n=e("native"),r={requestReview:function(){n.isIos&&n.call("SKStoreReviewController","requestReview")},requestTrackingAuthorization:function(){n.isIos&&n.call("AppController","requestTrackingAuthorization")}};sdkEvent.apple={},sdkEvent.apple.login={},r.login={},r.login.sign=function(){n.isIos&&n.call("SignInWithApple","sign")},r.login.onSign=function(){},sdkEvent.apple.login.onSign=function(){var e;(e=r.login).onSign.apply(e,arguments)},r.login.onError=function(){},sdkEvent.apple.login.onError=function(){var e;(e=r.login).onError.apply(e,arguments)},r.login.onClose=function(){},sdkEvent.apple.login.onClose=function(){var e;(e=r.login).onClose.apply(e,arguments)},sdkEvent.apple.IAP={},r.IAP={},r.IAP.init=function(){n.isIos&&(console.log("apple.IAP.init"),n.call("IAP","init"))},r.IAP.requestProducts=function(){n.isIos&&n.call("IAP","requestProducts")},r.IAP.pay=function(e){n.isIos&&n.call("IAP","pay",e)},r.IAP.rePay=function(){n.isIos&&n.call("IAP","rePay")},["onRequestProducts","onVerify","onSuccess","onRePay","onFailed"].forEach(function(e){r.IAP[e]=function(){},sdkEvent.apple.IAP[e]=function(){var t;(t=r.IAP)[e].apply(t,arguments)}}),sdkEvent.apple.gameCenter={},r.gameCenter={},r.gameCenter.eventType={SIGN:"apple.gameCenter.onSign",ERROR:"apple.gameCenter.onError"},r.gameCenter.init=function(){n.isIos&&n.call("GameCenter","init")},sdkEvent.apple.gameCenter.onSign=function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=E).emit.apply(e,[r.gameCenter.eventType.SIGN].concat(i))},sdkEvent.apple.gameCenter.onError=function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=E).emit.apply(e,[r.gameCenter.eventType.ERROR].concat(i))},r.gameCenter.isAuthenticated=function(){if(n.isIos)return n.call("GameCenter","isAuthenticated")},r.gameCenter.showList=function(e){e=i({},{listId:"level",type:"all"},e),n.isIos&&n.call("GameCenter","showList",JSON.stringify(e))},r.gameCenter.send=function(e){e=i({},{listId:"level",value:0},e),n.isIos&&n.call("GameCenter","send",JSON.stringify(e))},t.exports=r,cc._RF.pop()},{native:"native"}],app:[function(e,t){"use strict";cc._RF.push(t,"db343R/g6lFcqLQ4uDLMJQX","app"),cc.Class({extends:e("initApp"),properties:{loadingPrefab:cc.Prefab},onLoad:function(){var e=this;i18n.init("en"),this.loading=$(H.inst(this.loadingPrefab,this.popupParentNode),"loading"),this.loading.show(),this.loading.tip(L("loading")),this.init({appName:"SURVIVORS",bundleName:"app",onSuccess:function(){e.loading.close(),e.onInit()},onError:function(t){log(t),e.loading.error(L("load_failed")),e.loading.node.once("touchend",function(){e.loading.close(),cc.director.loadScene("loader")})},onProgress:function(t,i){e.loading.updProgress(t,i)}})},onInit:function(){app.loading=this.loading,app.error=this.error.bind(this),app.find=this.find("find","find",this.node),app.root=this.find("root","root"),app.root.run()},error:function(e){this._error||(this._error=!0,V("tip").config({showFull:!0,color:"#FF0000"}).text(e).node.once("touchend",function(e){E.stop(e),H.exitGame()}),setTimeout(function(){cc.game.pause()},1e3))}}),cc._RF.pop()},{initApp:"initApp"}],audioMgr:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"c98dbWVOBRH+4hE1YFFbU2+","audioMgr"),t.exports={init:function(e){this.setting=i({},{music:!0,effect:!0},e)},setMusicVolume:function(e){cc.audioEngine.setMusicVolume(e)},setEffectsVolume:function(e){cc.audioEngine.setEffectsVolume(e)},setVolume:function(e){this.setMusicVolume(e),this.setEffectsVolume(e)},playMusic:function(e,t){void 0===t&&(t=!0),e&&(this.musicAsset=e,this.setting&&this.setting.music&&cc.audioEngine.playMusic(this.getClip(e),t))},playPreMusic:function(e){void 0===e&&(e=!0),this.musicAsset&&this.setting&&this.setting.music&&cc.audioEngine.playMusic(this.getClip(this.musicAsset),e)},stopMusic:function(){cc.audioEngine.stopMusic()},playEffect:function(e,t,i){var n=this;if(void 0===t&&(t=!1),void 0===i&&(i=0),e&&this.setting&&this.setting.effect){var r=cc.audioEngine.playEffect(this.getClip(e),t);return i>0&&setTimeout(function(){n.stopEffect(r)},1e3*i),r}},playTipEffect:function(e,t){var i=this;if(void 0===t&&(t=!1),e&&this.setting&&this.setting.effect){var n=cc.audioEngine.getMusicVolume(),r=cc.audioEngine.getEffectsVolume();this.setMusicVolume(0),this.setEffectsVolume(0);var o=cc.audioEngine.playEffect(this.getClip(e),t);cc.audioEngine.setVolume(o,1),cc.audioEngine.setFinishCallback(o,function(){i.setMusicVolume(n),i.setEffectsVolume(r)})}},stopEffect:function(e){cc.audioEngine.stopEffect(e)},stopAllEffects:function(){cc.audioEngine.stopAllEffects()},getClip:function(e){return"string"==typeof e?app.getAudioClip(e):e}},cc._RF.pop()},{}],audio:[function(e,t){"use strict";cc._RF.push(t,"81772qAY0ZNjq5vluiDfezU","audio"),cc.Class({extends:cc.AudioSource,properties:{},onEnable:function(){this.updMute(),this.play()},updMute:function(){M("fight").stop||!M("data").setting.audio.effect?this.mute=!0:this.mute=!1},update:function(){this.updMute()}}),cc._RF.pop()},{}],autoHideChild:[function(e,t){"use strict";cc._RF.push(t,"635ee7DRVtAwqi/hvf1Q1j/","autoHideChild");var i=cc.Enum({HORIZONTAL:1,VERTICAL:2});cc.Class({editor:{menu:"base/autoHideChild"},extends:e("ccBase"),properties:{startAxis:{type:i,default:2},parentNode:cc.Node},onLoad:function(){this.node.children.forEach(function(e){e.opacity=0}),this._frame=0},update:function(){var e=this;this.parentNode&&(this.node.children.length<1||(this._frame++,this._frame<=6||(this._frame=0,this.node.children.forEach(function(t){var n=H.toAR(t,e.parentNode),r="y",o="height";e.startAxis==i.HORIZONTAL&&(r="x",o="width");var s=Math.abs(n[r]);if(s>e.parentNode[o]/2+t[o]/2)t.opacity=0;else{var a=e.parentNode[o]/2;t.opacity=s>a?100:255}}))))}}),cc._RF.pop()},{ccBase:"ccBase"}],autoLayout:[function(e,t){"use strict";cc._RF.push(t,"6a17dA9XD5OSZMaCtjCQ+Tq","autoLayout"),cc.Class({editor:{executeInEditMode:!0,menu:"base/autoLayout"},extends:e("ccBase"),properties:{_col:0,col:{get:function(){return this._col},set:function(e){this._col=e,this.upd()}},_itemSize:cc.Size,itemSize:{get:function(){return this._itemSize},set:function(e){this._itemSize=e,this.upd()}},_spacingX:0,spacingX:{get:function(){return this._spacingX},set:function(e){this._spacingX=e,this.upd()}},_spacingY:0,spacingY:{get:function(){return this._spacingY},set:function(e){this._spacingY=e,this.upd()}}},onEnable:function(){this.upd()},upd:function(){var e=H.add$(this.node,cc.Layout,!0);e.resizeMode=1,e.startAxis=0,e.spacingX=this.spacingX,e.spacingY=this.spacingY,this.node.width=this.col*this.itemSize.width+(this.col-1)*this.spacingX,this.node.children.filter(function(e){return e.active}).length>this.col?e.type=3:(e.node.height=this.itemSize.height,e.type=1),e.updateLayout()}}),cc._RF.pop()},{ccBase:"ccBase"}],bombItem:[function(e,t){"use strict";cc._RF.push(t,"afebfhjRwRB36sxlnvPori5","bombItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t,i){void 0===t&&(t=500),void 0===i&&(i=1),this.target=e,this.target?(this.toWorldPos=this.target.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.boomScale=i,this.speed=t,this.byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.node.setWorldPosition(this.byWorldPos),this.dir=cc.v2(0,0),this.isCollide=!1,this.isTemp=!1,this.isInit=!0):this.remove()},remove:function(){G("pool").put(this.node)},createBoom:function(e){var t=G("pool").get(app.getPrefab("boom1"));t.parent=G("skill").parent2Node,t.scaleX=this.boomScale,t.scaleY=this.boomScale,e?t.setWorldPosition(e.bodyNode.getWorldPosition(cc.Vec2.ZERO)):t.setWorldPosition(this.node.getWorldPosition(cc.Vec2.ZERO));var i=H.add$(t,"skill",!0);i.isTemp=this.isTemp,i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),this.find("anim",cc.Animation,t).play().once(cc.Animation.EventType.FINISHED,function(){G("pool").put(t)})},onEnter:function(e){var t=G("role").getRole(e.node,!0);t&&this.role&&t.group!=this.role.group&&(this.createBoom(t),this.remove())},update:function(e){if(this.isInit&&!M("fight").stop){if(H.dist(this.byWorldPos,this.node.getWorldPosition(cc.Vec2.ZERO))>app.screen.width/2)return this.createBoom(),void this.remove();var t=this.speed*e;this.dir=this.toWorldPos.sub(this.byWorldPos).normalize(),this.node.angle=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI,this.node.x+=this.dir.x*t,this.node.y+=this.dir.y*t}}}),cc._RF.pop()},{skill:"skill"}],bomb:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"c5953xJFp1ChJeLtbBxDMYL","bomb"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,boomScale:1,num:1,cd:3,speed:500,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.boomScale=e.boomScale,this.scale=e.scale,this.num=e.num,this.speed=e.speed,this.defCd=e.cd,this.cd=this.defCd},createItems:function(){var e=this;if(G("skill").checkRole(this.role)){var t=G("role").getRandTargets(this.role,this.num);t.length<1||t.forEach(function(t){var i=G("pool").get(e.prefab);i.scaleX=e.scale,i.scaleY=e.scale,i.parent=G("skill").parent2Node;var n=$(i,"skill");n.initBase({role:e.role,hurtPercent:e.hurtPercent,skillName:e.skillName}),n.init(t,e.speed,e.boomScale)})}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],boomerangItem:[function(e,t){"use strict";cc._RF.push(t,"8312fEHTCxNOpTIIafktefl","boomerangItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t){if(void 0===t&&(t=600),this.isBullet=!0,this.target=e,this.target){this.toWorldPos=this.target.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.speed=t;var i=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.node.setWorldPosition(i),this.dir=cc.v2(0,0),this.hereCd=.5,this.isBack=!1,this.isHere=!1,this.isInit=!0}else this.remove()},remove:function(){G("pool").put(this.node)},onEnter:function(e){var t=G("role").getRole(e,!0);t&&this.role&&t.group!=this.role.group&&(this.isHere=!0)},update:function(e){if(this.isInit&&!M("fight").stop){var t=this.node.getWorldPosition(cc.Vec2.ZERO);if(this.isHere){if(this.hereCd-=e,this.hereCd>0){var i=this.speed/4*e;this.dir=this.toWorldPos.sub(t).normalize(),this.node.x+=this.dir.x*i,this.node.y+=this.dir.y*i}else this.isBack=!0;if(this.isBack){var n=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO);if(H.dist(t,n)<=10)return void this.remove();this.dir=n.sub(t).normalize();var r=2*this.role.move.speed*e;this.node.x+=this.dir.x*r,this.node.y+=this.dir.y*r}}else{if(H.dist(t,this.toWorldPos)<=this.target.node.width)return this.isHere=!0,void(this.dir=cc.v2(0,0));var o=this.speed*e;this.dir=this.toWorldPos.sub(t).normalize(),this.node.x+=this.dir.x*o,this.node.y+=this.dir.y*o}}}}),cc._RF.pop()},{skill:"skill"}],boomerang:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"c04c3Rls2FMdadSItpcsXKV","boomerang"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,num:1,cd:3,speed:600,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.speed=e.speed,this.defCd=e.cd,this.cd=this.defCd},createItems:function(){var e=this;if(G("skill").checkRole(this.role)){var t=G("role").getRandTargets(this.role,this.num);t.length<1||t.forEach(function(t){var i=G("pool").get(e.prefab);i.scaleX=e.scale,i.scaleY=e.scale,i.parent=G("skill").parent2Node;var n=$(i,"skill");n.initBase({role:e.role,hurtPercent:e.hurtPercent,skillName:e.skillName}),n.init(t,e.speed)})}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],bulletItem:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"80b39SaUT5Emry6okihUJPh","bulletItem"),cc.Class({extends:e("skill"),properties:{},onEnter:function(e){if(this.role){var t=G("role").getRole(e.node,!0);t&&t.group!=this.role.group&&0!=this.pierce&&(this.pierce-=1,this.pierce<=0&&this.remove())}},remove:function(){this.dir=null,G("pool").put(this.node),this.onRemove(this)},onRemove:function(){},init:function(e){if(e=i({},{index:1,speed:100,angle:15,pierce:1,isRandTarget:!1},e),this.role){this.isBullet=!0,this.isRandTarget=e.isRandTarget,this.byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.node.setWorldPosition(this.byWorldPos),this.speed=e.speed,this.pierce=e.pierce;var t=this.role.target;if(this.isRandTarget&&this.role.getRandTarget&&(t=this.role.getRandTarget()),t){var n=t.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.dir=n.sub(this.byWorldPos).normalize()}else this.role.dir.equals(cc.Vec2.ZERO)?this.dir=cc.v2(1,0):this.dir=this.role.dir.clone();if(e.index>1){var r=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI;e.index%2==0?r+=e.angle*e.index:r-=e.angle*(e.index-1);var o=r*Math.PI/180;this.dir.x=Math.cos(o),this.dir.y=Math.sin(o)}G("effect").updDirAngle(this.node,this.dir)}},update:function(e){if(this.role&&this.byWorldPos&&!M("fight").stop)if(H.dist(this.byWorldPos,this.node.getWorldPosition(cc.Vec2.ZERO))>app.screen.width)this.remove();else if(this.dir){var t=this.speed*e;this.node.x+=this.dir.x*t,this.node.y+=this.dir.y*t}}}),cc._RF.pop()},{skill:"skill"}],bullet:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"42264CMT71O+I83qXrVPRZX","bullet"),cc.Class({extends:e("ccBase"),properties:{},initData:function(e){e=i({},{asset:"",color:"#FFFFFF",scale:1,angle:15,num:1,speed:200,cd:3,pierce:1,isRound:!1,isRandTarget:!1,hurtPercent:100},e),this.param=e,this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.color=e.color,this.scale=e.scale,this.angle=e.angle,this.num=e.num,this.speed=e.speed,this.defCd=e.cd,this.cd=this.defCd,this.pierce=e.pierce,this.isRandTarget=e.isRandTarget,e.isRound&&(this.num=360/this.angle/2)},init:function(e,t){this.role=e,this.skillName=t,this.items=[]},createItems:function(){if(G("skill").checkRole(this.role)&&(this.role.dir||this.role.target))for(var e=1;e<=this.num;e++){var t=G("pool").get(this.prefab),i=$(t,"skill");i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),t.scaleX=this.scale,t.scaleY=this.scale;var n=cc.find("anim",t);n?n.color=cc.color(this.color):t.color=cc.color(this.color),t.parent=G("skill").parent2Node,i.init({index:e,speed:this.speed,angle:this.angle,pierce:this.pierce,isRandTarget:this.isRandTarget}),i.initData&&i.initData(this.param)}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],camera:[function(e,t){"use strict";cc._RF.push(t,"104caJSIOJKda8DCkwWLxx9","camera"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){this.camera=$(this.node,cc.Camera),this.reset()},getWorldPos:function(e){return this.camera.getScreenToWorldPoint(e)},reset:function(){this.followNode=null,this.node.x=0,this.node.y=0,this.stop=!1},follow:function(e){this.followNode=e,this.updPos(),this.stop=!1},updPos:function(){if(this.followNode&&!this.stop){var e=H.toAR(this.followNode,cc.find("Canvas"));this.node.position=e}},update:function(e){this.updPos(e)}}),cc._RF.pop()},{ccBase:"ccBase"}],ccBase:[function(e,t){"use strict";cc._RF.push(t,"39de9Fw/IZC0Lc5KlDpooWv","ccBase"),cc.Class({editor:{menu:"base/ccBase"},extends:cc.Component,properties:{},addEvent:function(e,t){void 0===t&&(t="touchend");var i="string"==typeof e?this.find(e):e;i?i.on(t,this.preEvent,this):cc.log("cocosBase.addEvent node error:"+e)},removeEvent:function(e,t){void 0===t&&(t="touchend"),("string"==typeof e?this.find(e):e).off(t,this.preEvent,this)},preEvent:function(e){e.stopPropagation&&E.stop(e);var t=e.currentTarget,i=t.name+"Event";cc.log(this.node.name+" "+i),this[i]&&this[i](t,e)},addBtnEvents:function(e){var t=this;void 0===e&&(e="touchend"),this.findAll().forEach(function(i){i.getComponent(cc.Button)&&t.addEvent(i,e)})},removeBtnEvents:function(e){var t=this;void 0===e&&(e="touchend"),this.findAll().forEach(function(i){i.getComponent(cc.Button)&&t.removeEvent(i,e)})},find:function(e){var t=this,i=(arguments.length<=1?void 0:arguments[1])instanceof cc.Node?null:arguments.length<=1?void 0:arguments[1],n=i?arguments.length<=2?void 0:arguments[2]:arguments.length<=1?void 0:arguments[1],r=function e(i,n){n||(n=t.node);var r=cc.find(i,n);if(r)return r;for(var o=n.children,s=0;s<o.length;s++)if(r=e(i,o[s]))return r;return null},o=r(e,n);return i?o.getComponent(i):o},findAll:function(e){void 0===e&&(e=null),null===e&&(e=this.node);var t=[e];return function e(i,n){if(void 0===n&&(n=!0),i.children.length>0)for(var r=0;r<i.children.length;r++)t.push(i.children[r]),e(i.children[r],!1);else n&&t.push(i)}(e),t}}),cc._RF.pop()},{}],ccHelper:[function(e,t){"use strict";cc._RF.push(t,"c3a57kGc7JO4pcKxIFXHXXL","ccHelper"),t.exports={$:function(e,t,i){return void 0===t&&(t=null),void 0===i&&(i=!1),e?(null===t&&(t=e.name),i?e.getComponents(t):e.getComponent(t)):null},add$:function(e,t,i){if(void 0===i&&(i=!1),i){var n=e.getComponent(t);if(n)return n}return e.addComponent(t)},is$:function(e,t){return e instanceof t},inst:function(e,t){var i=cc.instantiate(e);return this.is$(t,cc.Node)&&(i.parent=t),this.resetNode(i)},resetNode:function(e){return e.x=0,e.y=0,e.opacity=255,e.angle=0,e.scaleX=1,e.scaleY=1,e.active=!0,e},dist:function(e,t){var i=e.getWorldPosition?e.getWorldPosition(cc.Vec2.ZERO):e,n=t.getWorldPosition?t.getWorldPosition(cc.Vec2.ZERO):t;return cc.Vec2.distance(i,n)},toAR:function(e,t){if(!e||!t)return cc.v2(0,0);if(e.parent&&e.parent.convertToWorldSpaceAR&&t.convertToNodeSpaceAR){var i=e.parent.convertToWorldSpaceAR(e.getPosition());return t.convertToNodeSpaceAR(i)}return cc.v2(0,0)},findAllchildren:function(e){var t=[e];return function e(i,n){if(void 0===n&&(n=!0),i.children.length>0)for(var r=0;r<i.children.length;r++)t.push(i.children[r]),e(i.children[r],!1);else n&&t.push(i)}(e),t},setIndex:function(e,t){if("last"!=t)return e.setSiblingIndex(t);var i=e.parent.children[e.parent.children.length-1];e.setSiblingIndex(i.getSiblingIndex()+1)},getDir:function(e){var t=e.x,i=e.y;if(0===t&&0===i)return 0;var n=Math.atan2(i,t),r=Math.round((-n+Math.PI)/(Math.PI/4));return r>5?r-6:r+2},getDirAngle:function(e){return 180*Math.atan2(e.y,e.x)/Math.PI},getWorldPos:function(e){return e.getWorldPosition(cc.Vec2.ZERO)},show:function(e){if(e&&e.node)return e.node.active?e:(e.node.active=!0,e)}},cc._RF.pop()},{}],ccPopup:[function(e,t){"use strict";cc._RF.push(t,"00ca3Mnu9BF6JrMwTACT2Ef","ccPopup"),cc.Class({editor:{menu:"base/ccPopup"},extends:e("ccBase"),properties:{},onEnable:function(){var e=this;this.node.on("touchend",function(t){E.stop(t),!1!==e.touchClose&&e.remove()})},onDisable:function(){this.node.off("touchend")},remove:function(){this._remove(),this.onRemove()},onRemove:function(){}}),cc._RF.pop()},{ccBase:"ccBase"}],"circular-json":[function(e,t){"use strict";cc._RF.push(t,"3efbedyDl5GCasScbCw5Exh","circular-json");var i="~",n="\\x"+("0"+i.charCodeAt(0).toString(16)).slice(-2),r="\\"+n,o=new RegExp(n,"g"),s=new RegExp(r,"g"),a=new RegExp("(?:^|([^\\\\]))"+r),c=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},l=String;function h(e,t,s){var a,l,h=!1,u=!!t,d=[],p=[e],f=[e],v=[s?i:"[Circular]"],g=e,m=1;return u&&(l="object"==typeof t?function(e,i){return""!==e&&c.call(t,e)<0?void 0:i}:t),function(e,t){if(u&&(t=l.call(this,e,t)),h){if(g!==this&&(a=m-c.call(p,this)-1,m-=a,p.splice(m,p.length),d.splice(m-1,d.length),g=this),"[object Promise]"===Object.prototype.toString.call(t))return"[object Promise]";"object"==typeof t&&t?(c.call(p,t)<0&&p.push(g=t),m=p.length,(a=c.call(f,t))<0?(a=f.push(t)-1,s?(d.push((""+e).replace(o,n)),v[a]=i+d.join(i)):v[a]=v[0]):t=v[a]):"string"==typeof t&&s&&(t=t.replace(n,r).replace(i,n))}else h=!0;return t}}function u(e,t){for(var n=0,r=t.length;n<r;e=e[t[n++].replace(s,i)]);return e}function d(e){return function(t,o){var s="string"==typeof o;return s&&o.charAt(0)===i?new l(o.slice(1)):(""===t&&(o=v(o,o,{})),s&&(o=o.replace(a,"$1"+i).replace(r,n)),e?e.call(this,t,o):o)}}function p(e,t,i){for(var n=0,r=t.length;n<r;n++)t[n]=v(e,t[n],i);return t}function f(e,t,i){for(var n in t)t.hasOwnProperty(n)&&(t[n]=v(e,t[n],i));return t}function v(e,t,n){return t instanceof Array?p(e,t,n):t instanceof l?t.length?n.hasOwnProperty(t)?n[t]:n[t]=u(e,t.split(i)):e:t instanceof Object?f(e,t,n):t}var g={stringify:function(e,t,i,n){return g.parser.stringify(e,h(e,t,!n),i)},parse:function(e,t){return g.parser.parse(e,d(t))},parser:JSON};t.exports=g,cc._RF.pop()},{}],confirm:[function(e,t){"use strict";cc._RF.push(t,"2b3c9m/RU9Ca6smPFcg68SI","confirm"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.touchClose=!1,this.addBtnEvents()},btn1Event:function(){this.callFunc&&this.callFunc(!0),this.remove()},btn2Event:function(){this.callFunc&&this.callFunc(!1),this.remove()},callFunc:function(){},show:function(e,t){return this.callFunc=t,this.find("btn1/label",cc.Label).string=L("yes"),this.find("btn2/label",cc.Label).string=L("close"),this.label=this.find("label",cc.Label),e?(this.label.node.active=!0,this.label.string=e):this.label.node.active=!1,H.show(this)},showAgree:function(e,t){return this.callFunc=t,this.find("btn1/label",cc.Label).string=L("agree"),this.find("btn2/label",cc.Label).string=L("refuse"),this.label=this.find("label",cc.Label),e?(this.label.node.active=!0,this.label.string=e):this.label.node.active=!1,H.show(this)}}),cc._RF.pop()},{popup:"popup"}],"crypto-js":[function(e,t,i){"use strict";var n;cc._RF.push(t,"2b645C/SLFMRKicQLlTl4Y3","crypto-js"),n=function(){var e,t,i,n,r,o,s,a,c,l,h=h||function(e){var t=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),i={},n=i.lib={},r=n.Base={extend:function(e){var i=t(this);return e&&i.mixIn(e),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<r;o++){var s=i[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(o=0;o<r;o+=4)t[n+o>>>2]=i[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,n=[],r=function(t){t=t;var i=987654321,n=4294967295;return function(){var r=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var a=r(4294967296*(i||e.random()));i=987654071*a(),n.push(4294967296*a()|0)}return new o.init(n,t)}}),s=i.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,s=this.blockSize,a=r/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,r);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(n,h);var u=n.splice(0,c);i.sigBytes-=l}return new o.init(u,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(n.Hasher=h.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),i.algo={});return i}(Math);return function(){var e=h,t=e.lib.WordArray;function i(e,i,n){for(var r=[],o=0,s=0;s<i;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,c=n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|c)<<24-o%4*8,o++}return t.create(r,o)}e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var r=[],o=0;o<i;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<i;a++)r.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return i(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){var t=h,i=t.lib,n=i.WordArray,r=i.Hasher,o=t.algo,s=[];(function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0})();var a=o.MD5=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,a=e[t+0],h=e[t+1],p=e[t+2],f=e[t+3],v=e[t+4],g=e[t+5],m=e[t+6],y=e[t+7],b=e[t+8],k=e[t+9],E=e[t+10],w=e[t+11],S=e[t+12],P=e[t+13],_=e[t+14],L=e[t+15],x=o[0],M=o[1],R=o[2],B=o[3];x=c(x,M,R,B,a,7,s[0]),B=c(B,x,M,R,h,12,s[1]),R=c(R,B,x,M,p,17,s[2]),M=c(M,R,B,x,f,22,s[3]),x=c(x,M,R,B,v,7,s[4]),B=c(B,x,M,R,g,12,s[5]),R=c(R,B,x,M,m,17,s[6]),M=c(M,R,B,x,y,22,s[7]),x=c(x,M,R,B,b,7,s[8]),B=c(B,x,M,R,k,12,s[9]),R=c(R,B,x,M,E,17,s[10]),M=c(M,R,B,x,w,22,s[11]),x=c(x,M,R,B,S,7,s[12]),B=c(B,x,M,R,P,12,s[13]),R=c(R,B,x,M,_,17,s[14]),x=l(x,M=c(M,R,B,x,L,22,s[15]),R,B,h,5,s[16]),B=l(B,x,M,R,m,9,s[17]),R=l(R,B,x,M,w,14,s[18]),M=l(M,R,B,x,a,20,s[19]),x=l(x,M,R,B,g,5,s[20]),B=l(B,x,M,R,E,9,s[21]),R=l(R,B,x,M,L,14,s[22]),M=l(M,R,B,x,v,20,s[23]),x=l(x,M,R,B,k,5,s[24]),B=l(B,x,M,R,_,9,s[25]),R=l(R,B,x,M,f,14,s[26]),M=l(M,R,B,x,b,20,s[27]),x=l(x,M,R,B,P,5,s[28]),B=l(B,x,M,R,p,9,s[29]),R=l(R,B,x,M,y,14,s[30]),x=u(x,M=l(M,R,B,x,S,20,s[31]),R,B,g,4,s[32]),B=u(B,x,M,R,b,11,s[33]),R=u(R,B,x,M,w,16,s[34]),M=u(M,R,B,x,_,23,s[35]),x=u(x,M,R,B,h,4,s[36]),B=u(B,x,M,R,v,11,s[37]),R=u(R,B,x,M,y,16,s[38]),M=u(M,R,B,x,E,23,s[39]),x=u(x,M,R,B,P,4,s[40]),B=u(B,x,M,R,a,11,s[41]),R=u(R,B,x,M,f,16,s[42]),M=u(M,R,B,x,m,23,s[43]),x=u(x,M,R,B,k,4,s[44]),B=u(B,x,M,R,S,11,s[45]),R=u(R,B,x,M,L,16,s[46]),x=d(x,M=u(M,R,B,x,p,23,s[47]),R,B,a,6,s[48]),B=d(B,x,M,R,y,10,s[49]),R=d(R,B,x,M,_,15,s[50]),M=d(M,R,B,x,g,21,s[51]),x=d(x,M,R,B,S,6,s[52]),B=d(B,x,M,R,f,10,s[53]),R=d(R,B,x,M,E,15,s[54]),M=d(M,R,B,x,h,21,s[55]),x=d(x,M,R,B,b,6,s[56]),B=d(B,x,M,R,L,10,s[57]),R=d(R,B,x,M,m,15,s[58]),M=d(M,R,B,x,P,21,s[59]),x=d(x,M,R,B,v,6,s[60]),B=d(B,x,M,R,w,10,s[61]),R=d(R,B,x,M,p,15,s[62]),M=d(M,R,B,x,k,21,s[63]),o[0]=o[0]+x|0,o[1]=o[1]+M|0,o[2]=o[2]+R|0,o[3]=o[3]+B|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var o=e.floor(n/4294967296),s=n;i[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(i.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var h=c[l];c[l]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,n,r,o,s){var a=e+(t&i|~t&n)+r+s;return(a<<o|a>>>32-o)+t}function l(e,t,i,n,r,o,s){var a=e+(t&n|i&~n)+r+s;return(a<<o|a>>>32-o)+t}function u(e,t,i,n,r,o,s){var a=e+(t^i^n)+r+s;return(a<<o|a>>>32-o)+t}function d(e,t,i,n,r,o,s){var a=e+(i^(t|~n))+r+s;return(a<<o|a>>>32-o)+t}t.MD5=r._createHelper(a),t.HmacMD5=r._createHmacHelper(a)}(Math),t=(e=h).lib,i=t.WordArray,n=t.Hasher,r=e.algo,o=[],s=r.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],a=i[3],c=i[4],l=0;l<80;l++){if(l<16)o[l]=0|e[t+l];else{var h=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=h<<1|h>>>31}var u=(n<<5|n>>>27)+c+o[l];u+=l<20?1518500249+(r&s|~r&a):l<40?1859775393+(r^s^a):l<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,c=a,a=s,s=r<<30|r>>>2,r=n,n=u}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=n._createHelper(s),e.HmacSHA1=n._createHmacHelper(s),function(e){var t=h,i=t.lib,n=i.WordArray,r=i.Hasher,o=t.algo,s=[],a=[];(function(){function t(t){for(var i=e.sqrt(t),n=2;n<=i;n++)if(!(t%n))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)t(n)&&(r<8&&(s[r]=i(e.pow(n,.5))),a[r]=i(e.pow(n,1/3)),r++),n++})();var c=[],l=o.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],s=i[3],l=i[4],h=i[5],u=i[6],d=i[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],v=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=c[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+m+c[p-16]}var y=n&r^n&o^r&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),k=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&h^~l&u)+a[p]+c[p];d=u,u=h,h=l,l=s+k|0,s=o,o=r,r=n,n=k+(b+y)|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0,i[5]=i[5]+h|0,i[6]=i[6]+u|0,i[7]=i[7]+d|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(l),t.HmacSHA256=r._createHmacHelper(l)}(Math),function(){var e=h,t=e.lib.WordArray,i=e.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var o=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var i=e.length,n=[],r=0;r<i;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(n,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],o=0;o<i;o+=2){var s=n(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var i=e.length,r=[],o=0;o<i;o++)r[o>>>1]|=n(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var e=h.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,n=[],r=0;r<i;r++)n[r>>>2]|=e[r]<<24-r%4*8;t.call(this,n,i)}else t.apply(this,arguments)}).prototype=e}}(),function(){var e=h,t=e.lib,i=t.WordArray,n=t.Hasher,r=e.algo,o=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),a=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=i.create([0,1518500249,1859775393,2400959708,2840853838]),u=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=r.RIPEMD160=n.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var h,d,b,k,E,w,S,P,_,L,x,M=this._hash.words,R=l.words,B=u.words,N=o.words,I=s.words,T=a.words,C=c.words;for(w=h=M[0],S=d=M[1],P=b=M[2],_=k=M[3],L=E=M[4],i=0;i<80;i+=1)x=h+e[t+N[i]]|0,x+=i<16?p(d,b,k)+R[0]:i<32?f(d,b,k)+R[1]:i<48?v(d,b,k)+R[2]:i<64?g(d,b,k)+R[3]:m(d,b,k)+R[4],x=(x=y(x|=0,T[i]))+E|0,h=E,E=k,k=y(b,10),b=d,d=x,x=w+e[t+I[i]]|0,x+=i<16?m(S,P,_)+B[0]:i<32?g(S,P,_)+B[1]:i<48?v(S,P,_)+B[2]:i<64?f(S,P,_)+B[3]:p(S,P,_)+B[4],x=(x=y(x|=0,C[i]))+L|0,w=L,L=_,_=y(P,10),P=S,S=x;x=M[1]+b+_|0,M[1]=M[2]+k+L|0,M[2]=M[3]+E+w|0,M[3]=M[4]+h+S|0,M[4]=M[0]+d+P|0,M[0]=x},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,o=r.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,i){return e^t^i}function f(e,t,i){return e&t|~e&i}function v(e,t,i){return(e|~t)^i}function g(e,t,i){return e&i|t&~i}function m(e,t,i){return e^(t|~i)}function y(e,t){return e<<t|e>>>32-t}e.RIPEMD160=n._createHelper(d),e.HmacRIPEMD160=n._createHmacHelper(d)}(Math),function(){var e=h,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}(),function(){var e=h,t=e.lib,i=t.Base,n=t.WordArray,r=e.algo,o=r.SHA1,s=r.HMAC,a=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=s.create(i.hasher,e),o=n.create(),a=n.create([1]),c=o.words,l=a.words,h=i.keySize,u=i.iterations;c.length<h;){var d=r.update(t).finalize(a);r.reset();for(var p=d.words,f=p.length,v=d,g=1;g<u;g++){v=r.finalize(v),r.reset();for(var m=v.words,y=0;y<f;y++)p[y]^=m[y]}o.concat(d),l[0]++}return o.sigBytes=4*h,o}});e.PBKDF2=function(e,t,i){return a.create(i).compute(e,t)}}(),function(){var e=h,t=e.lib,i=t.Base,n=t.WordArray,r=e.algo,o=r.MD5,s=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=i.hasher.create(),o=n.create(),s=o.words,a=i.keySize,c=i.iterations;s.length<a;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var h=1;h<c;h++)l=r.finalize(l),r.reset();o.concat(l)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,t,i){return s.create(i).compute(e,t)}}(),function(){var e=h,t=e.lib.WordArray,i=e.algo,n=i.SHA256,r=i.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)}(),function(){var e=h,t=e.lib,i=t.Base,n=t.WordArray,r=e.x64={};r.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],r=0;r<t;r++){var o=e[r];i.push(o.high),i.push(o.low)}return n.create(i,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),function(e){var t=h,i=t.lib,n=i.WordArray,r=i.Hasher,o=t.x64.Word,s=t.algo,a=[],c=[],l=[];(function(){for(var e=1,t=0,i=0;i<24;i++){a[e+5*t]=(i+1)*(i+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,s=0;s<24;s++){for(var h=0,u=0,d=0;d<7;d++){if(1&r){var p=(1<<d)-1;p<32?u^=1<<p:h^=1<<p-32}128&r?r=r<<1^113:r<<=1}l[s]=o.create(h,u)}})();var u=[];(function(){for(var e=0;e<25;e++)u[e]=o.create()})();var d=s.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,n=this.blockSize/2,r=0;r<n;r++){var o=e[t+2*r],s=e[t+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(M=i[r]).high^=s,M.low^=o}for(var h=0;h<24;h++){for(var d=0;d<5;d++){for(var p=0,f=0,v=0;v<5;v++)p^=(M=i[d+5*v]).high,f^=M.low;var g=u[d];g.high=p,g.low=f}for(d=0;d<5;d++){var m=u[(d+4)%5],y=u[(d+1)%5],b=y.high,k=y.low;for(p=m.high^(b<<1|k>>>31),f=m.low^(k<<1|b>>>31),v=0;v<5;v++)(M=i[d+5*v]).high^=p,M.low^=f}for(var E=1;E<25;E++){var w=(M=i[E]).high,S=M.low,P=a[E];P<32?(p=w<<P|S>>>32-P,f=S<<P|w>>>32-P):(p=S<<P-32|w>>>64-P,f=w<<P-32|S>>>64-P);var _=u[c[E]];_.high=p,_.low=f}var L=u[0],x=i[0];for(L.high=x.high,L.low=x.low,d=0;d<5;d++)for(v=0;v<5;v++){var M=i[E=d+5*v],R=u[E],B=u[(d+1)%5+5*v],N=u[(d+2)%5+5*v];M.high=R.high^~B.high&N.high,M.low=R.low^~B.low&N.low}M=i[0];var I=l[h];M.high^=I.high,M.low^=I.low}},_doFinalize:function(){var t=this._data,i=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;i[r>>>5]|=1<<24-r%32,i[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],h=0;h<c;h++){var u=s[h],d=u.high,p=u.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),l.push(p),l.push(d)}return new n.init(l,a)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=r._createHelper(d),t.HmacSHA3=r._createHmacHelper(d)}(Math),function(){var e=h,t=e.lib.Hasher,i=e.x64,n=i.Word,r=i.WordArray,o=e.algo;function s(){return n.create.apply(n,arguments)}var a=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];(function(){for(var e=0;e<80;e++)c[e]=s()})();var l=o.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],s=i[3],l=i[4],h=i[5],u=i[6],d=i[7],p=n.high,f=n.low,v=r.high,g=r.low,m=o.high,y=o.low,b=s.high,k=s.low,E=l.high,w=l.low,S=h.high,P=h.low,_=u.high,L=u.low,x=d.high,M=d.low,R=p,B=f,N=v,I=g,T=m,C=y,F=b,A=k,H=E,O=w,D=S,V=P,G=_,q=L,j=x,U=M,W=0;W<80;W++){var z=c[W];if(W<16)var K=z.high=0|e[t+2*W],Y=z.low=0|e[t+2*W+1];else{var X=c[W-15],Z=X.high,$=X.low,J=(Z>>>1|$<<31)^(Z>>>8|$<<24)^Z>>>7,Q=($>>>1|Z<<31)^($>>>8|Z<<24)^($>>>7|Z<<25),ee=c[W-2],te=ee.high,ie=ee.low,ne=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),oe=c[W-7],se=oe.high,ae=oe.low,ce=c[W-16],le=ce.high,he=ce.low;K=(K=(K=J+se+((Y=Q+ae)>>>0<Q>>>0?1:0))+ne+((Y+=re)>>>0<re>>>0?1:0))+le+((Y+=he)>>>0<he>>>0?1:0),z.high=K,z.low=Y}var ue,de=H&D^~H&G,pe=O&V^~O&q,fe=R&N^R&T^N&T,ve=B&I^B&C^I&C,ge=(R>>>28|B<<4)^(R<<30|B>>>2)^(R<<25|B>>>7),me=(B>>>28|R<<4)^(B<<30|R>>>2)^(B<<25|R>>>7),ye=(H>>>14|O<<18)^(H>>>18|O<<14)^(H<<23|O>>>9),be=(O>>>14|H<<18)^(O>>>18|H<<14)^(O<<23|H>>>9),ke=a[W],Ee=ke.high,we=ke.low,Se=j+ye+((ue=U+be)>>>0<U>>>0?1:0),Pe=me+ve;j=G,U=q,G=D,q=V,D=H,V=O,H=F+(Se=(Se=(Se=Se+de+((ue+=pe)>>>0<pe>>>0?1:0))+Ee+((ue+=we)>>>0<we>>>0?1:0))+K+((ue+=Y)>>>0<Y>>>0?1:0))+((O=A+ue|0)>>>0<A>>>0?1:0)|0,F=T,A=C,T=N,C=I,N=R,I=B,R=Se+(ge+fe+(Pe>>>0<me>>>0?1:0))+((B=ue+Pe|0)>>>0<ue>>>0?1:0)|0}f=n.low=f+B,n.high=p+R+(f>>>0<B>>>0?1:0),g=r.low=g+I,r.high=v+N+(g>>>0<I>>>0?1:0),y=o.low=y+C,o.high=m+T+(y>>>0<C>>>0?1:0),k=s.low=k+A,s.high=b+F+(k>>>0<A>>>0?1:0),w=l.low=w+O,l.high=E+H+(w>>>0<O>>>0?1:0),P=h.low=P+V,h.high=S+D+(P>>>0<V>>>0?1:0),L=u.low=L+q,u.high=_+G+(L>>>0<q>>>0?1:0),M=d.low=M+U,d.high=x+j+(M>>>0<U>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),function(){var e=h,t=e.x64,i=t.Word,n=t.WordArray,r=e.algo,o=r.SHA512,s=r.SHA384=o.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=o._createHelper(s),e.HmacSHA384=o._createHmacHelper(s)}(),h.lib.Cipher||function(e){var t=h,i=t.lib,n=i.Base,r=i.WordArray,o=i.BufferedBlockAlgorithm,s=t.enc,a=(s.Utf8,s.Base64),c=t.algo.EvpKDF,l=i.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:m}return function(t){return{encrypt:function(i,n,r){return e(n).encrypt(t,i,n,r)},decrypt:function(i,n,r){return e(n).decrypt(t,i,n,r)}}}}()}),u=(i.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=u.CBC=function(){var t=d.extend();function i(t,i,n){var r=this._iv;if(r){var o=r;this._iv=e}else o=this._prevBlock;for(var s=0;s<n;s++)t[i+s]^=o[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;i.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),i.call(this,e,t,r),this._prevBlock=o}}),t}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,o=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(o);var c=r.create(s,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:f}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else n=i.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(i,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=r.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(a)},parse:function(e){var t=a.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=r.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:n})}},m=i.SerializableCipher=n.extend({cfg:n.extend({format:g}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n),o=r.finalize(t),s=r.cfg;return v.create({ciphertext:o,key:i,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=r.random(8));var o=c.create({keySize:t+i}).compute(e,n),s=r.create(o.words.slice(t),4*i);return o.sigBytes=4*t,v.create({key:o,iv:s,salt:n})}},b=i.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(e,t,i,n){var r=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=r.iv;var o=m.encrypt.call(this,e,t,r.key,n);return o.mixIn(r),o},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,m.decrypt.call(this,e,t,r.key,n)}})}(),h.mode.CFB=function(){var e=h.lib.BlockCipherMode.extend();function t(e,t,i,n){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else o=this._prevBlock;n.encryptBlock(o,0);for(var s=0;s<i;s++)e[t+s]^=o[s]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize;t.call(this,e,i,r,n),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize,o=e.slice(i,i+r);t.call(this,e,i,r,n),this._prevBlock=o}}),e}(),h.mode.ECB=((a=h.lib.BlockCipherMode.extend()).Encryptor=a.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),a.Decryptor=a.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),a),h.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,n=4*t,r=n-i%n,o=i+r-1;e.clamp(),e.words[o>>>2]|=r<<24-o%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h.pad.Iso10126={pad:function(e,t){var i=4*t,n=i-e.sigBytes%i;e.concat(h.lib.WordArray.random(n-1)).concat(h.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h.pad.Iso97971={pad:function(e,t){e.concat(h.lib.WordArray.create([2147483648],1)),h.pad.ZeroPadding.pad(e,t)},unpad:function(e){h.pad.ZeroPadding.unpad(e),e.sigBytes--}},h.mode.OFB=(l=(c=h.lib.BlockCipherMode.extend()).Encryptor=c.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}}),c.Decryptor=l,c),h.pad.NoPadding={pad:function(){},unpad:function(){}},function(){var e=h,t=e.lib.CipherParams,i=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var n=i.parse(e);return t.create({ciphertext:n})}}}(),function(){var e=h,t=e.lib.BlockCipher,i=e.algo,n=[],r=[],o=[],s=[],a=[],c=[],l=[],u=[],d=[],p=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,h=0;for(t=0;t<256;t++){var f=h^h<<1^h<<2^h<<3^h<<4;f=f>>>8^255&f^99,n[i]=f,r[f]=i;var v=e[i],g=e[v],m=e[g],y=257*e[f]^16843008*f;o[i]=y<<24|y>>>8,s[i]=y<<16|y>>>16,a[i]=y<<8|y>>>24,c[i]=y,y=16843009*m^65537*g^257*v^16843008*i,l[f]=y<<24|y>>>8,u[f]=y<<16|y>>>16,d[f]=y<<8|y>>>24,p[f]=y,i?(i=v^e[e[e[m^v]]],h^=e[e[h]]):i=h=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,r=4*((this._nRounds=i+6)+1),o=this._keySchedule=[],s=0;s<r;s++)if(s<i)o[s]=t[s];else{var a=o[s-1];s%i?i>6&&s%i==4&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=f[s/i|0]<<24),o[s]=o[s-i]^a}for(var c=this._invKeySchedule=[],h=0;h<r;h++)s=r-h,a=h%4?o[s]:o[s-4],c[h]=h<4||s<=4?a:l[n[a>>>24]]^u[n[a>>>16&255]]^d[n[a>>>8&255]]^p[n[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,a,c,n)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,l,u,d,p,r),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,o,s,a){for(var c=this._nRounds,l=e[t]^i[0],h=e[t+1]^i[1],u=e[t+2]^i[2],d=e[t+3]^i[3],p=4,f=1;f<c;f++){var v=n[l>>>24]^r[h>>>16&255]^o[u>>>8&255]^s[255&d]^i[p++],g=n[h>>>24]^r[u>>>16&255]^o[d>>>8&255]^s[255&l]^i[p++],m=n[u>>>24]^r[d>>>16&255]^o[l>>>8&255]^s[255&h]^i[p++],y=n[d>>>24]^r[l>>>16&255]^o[h>>>8&255]^s[255&u]^i[p++];l=v,h=g,u=m,d=y}v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[p++],g=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^i[p++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^i[p++],y=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^i[p++],e[t]=v,e[t+1]=g,e[t+2]=m,e[t+3]=y},keySize:8});e.AES=t._createHelper(v)}(),function(){var e=h,t=e.lib,i=t.WordArray,n=t.BlockCipher,r=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=r.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var n=o[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],c=0;c<16;c++){var l=r[c]=[],h=a[c];for(i=0;i<24;i++)l[i/6|0]|=t[(s[i]-1+h)%28]<<31-i%6,l[4+(i/6|0)]|=t[28+(s[i+24]-1+h)%28]<<31-i%6;for(l[0]=l[0]<<1|l[0]>>>31,i=1;i<7;i++)l[i]=l[i]>>>4*(i-1)+3;l[7]=l[7]<<5|l[7]>>>27}var u=this._invSubKeys=[];for(i=0;i<16;i++)u[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=i[n],o=this._lBlock,s=this._rBlock,a=0,h=0;h<8;h++)a|=c[h][((s^r[h])&l[h])>>>0];this._lBlock=s,this._rBlock=o^a}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function p(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=n._createHelper(u);var f=r.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=u.createEncryptor(i.create(e.slice(0,2))),this._des2=u.createEncryptor(i.create(e.slice(2,4))),this._des3=u.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(f)}(),function(){var e=h,t=e.lib.StreamCipher,i=e.algo,n=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var o=0;r<256;r++){var s=r%i,a=t[s>>>2]>>>24-s%4*8&255;o=(o+n[r]+a)%256;var c=n[r];n[r]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,i=this._j,n=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[i],e[i]=o,n|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,n}e.RC4=t._createHelper(n);var o=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});e.RC4Drop=t._createHelper(o)}(),h.mode.CTRGladman=function(){var e=h.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}else e+=1<<24;return e}function i(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),i(s);var a=s.slice(0);n.encryptBlock(a,0);for(var c=0;c<r;c++)e[t+c]^=a[c]}});return e.Decryptor=n,e}(),function(){var e=h,t=e.lib.StreamCipher,i=e.algo,n=[],r=[],o=[],s=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)a.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,s=o[0],c=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&h,d=h<<16|65535&l;for(r[0]^=l,r[1]^=u,r[2]^=h,r[3]^=d,r[4]^=l,r[5]^=u,r[6]^=h,r[7]^=d,i=0;i<4;i++)a.call(this)}},_doProcessBlock:function(e,t){var i=this._X;a.call(this),n[0]=i[0]^i[5]>>>16^i[3]<<16,n[1]=i[2]^i[7]>>>16^i[5]<<16,n[2]=i[4]^i[1]>>>16^i[7]<<16,n[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,i=0;i<8;i++){var n=e[i]+t[i],s=65535&n,a=n>>>16,c=((s*s>>>17)+s*a>>>15)+a*a,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[i]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),h.mode.CTR=function(){var e=h.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);i.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=s[a]}});return e.Decryptor=t,e}(),function(){var e=h,t=e.lib.StreamCipher,i=e.algo,n=[],r=[],o=[],s=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)a.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var o=t.words,s=o[0],c=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&h,d=h<<16|65535&l;for(n[0]^=l,n[1]^=u,n[2]^=h,n[3]^=d,n[4]^=l,n[5]^=u,n[6]^=h,n[7]^=d,r=0;r<4;r++)a.call(this)}},_doProcessBlock:function(e,t){var i=this._X;a.call(this),n[0]=i[0]^i[5]>>>16^i[3]<<16,n[1]=i[2]^i[7]>>>16^i[5]<<16,n[2]=i[4]^i[1]>>>16^i[7]<<16,n[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,i=0;i<8;i++){var n=e[i]+t[i],s=65535&n,a=n>>>16,c=((s*s>>>17)+s*a>>>15)+a*a,l=((4294901760&n)*n|0)+((65535&n)*n|0);o[i]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),h.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},h},"object"==typeof i?t.exports=i=n():"function"==typeof define&&define.amd?define([],n):(void 0).CryptoJS=n(),cc._RF.pop()},{}],crypt:[function(e,t){"use strict";cc._RF.push(t,"98dac3+SJhLVI0MvhRZ87Fb","crypt");var i=e("crypto-js"),n={md5:function(e){return i.MD5(e).toString()},encode:function(e,t){try{e=JSON.stringify(e);var n=i.enc.Utf8.parse(t),r=i.AES.encrypt(e,n,{mode:i.mode.ECB,padding:i.pad.Pkcs7});return encodeURIComponent(i.enc.Base64.stringify(r.ciphertext))}catch(o){return void console.warn("crypt.encode",o)}},decode:function(e,t){try{e=decodeURIComponent(e);var n=i.enc.Utf8.parse(t),r=i.AES.decrypt({ciphertext:i.enc.Base64.parse(e)},n,{mode:i.mode.ECB,padding:i.pad.Pkcs7});return JSON.parse(r.toString(i.enc.Utf8))}catch(o){return void console.warn("crypt.decode",o)}}};t.exports=n,cc._RF.pop()},{"crypto-js":"crypto-js"}],dataModel:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"5ad37Y1cUNGfp57tMULQVQW","dataModel"),t.exports={HEARTS_DEFAULT:{CURRENT:50,MAX:50,NEXT_RECOVERY_TIME:0},init:function(e){var t;e=i({},{account:"",isGuest:!1,api:""},e),console.log("enter data model ... ",e);var n=null,r=this.getDefData();e.player?(e.player.setting||(e.player.setting=r.setting),e.player.timeCount=r.timeCount,n=e.player):n=r,H.isEmpty(t)&&(t=i({},{},n)),t.player.account=e.account,t.player.uid=e.account,t.player.api=e.api,e.isGuest&&(t.player.isGuest=e.isGuest);var o=H.sysInfo();for(var s in this.sysInfo={},this.sysInfo.os=o.os,this.sysInfo.language=o.language,this.player=i({},n.player,t.player),this.fight=i({},n.fight,t.fight),this.roles=t.roles,this.equips=t.equips,this.skill=t.skill,console.log("init equips ... ",t.equips),this.chip=t.chip,this.prop=i({},n.prop,t.prop),n.hearts||(n.hearts={current:this.HEARTS_DEFAULT.CURRENT,max:this.HEARTS_DEFAULT.MAX,nextRecoveryTime:this.HEARTS_DEFAULT.NEXT_RECOVERY_TIME}),this.hearts={current:e.hearts||n.hearts.current,max:e.maxHearts||n.hearts.max,nextRecoveryTime:e.nextRecoveryTime||n.hearts.nextRecoveryTime},this.timeCount=i({},n.timeCount,t.timeCount),this.achive=i({},n.achive,t.achive),this.setting=i({},n.setting,t.setting),this.upType="ATK",console.log("Data model ... 1",this.achive,n.achive,t.achive),this.timeCount)s in n.timeCount||delete this.timeCount[s];for(var a in console.log("Data model ... 2"),n.timeCount)a in this.timeCount||(this.timeCount[a]=n.timeCount[a]);M("achive").init(),console.log("Data model ... 3"),cc.log("data",this)},getDefData:function(){return{player:{uid:H.uid(),sid:H.uid(10),parentSid:"",childSids:[],hideTime:0,dataTime:0,uploadTime:0,createTime:H.time()},fight:{level:1,selectLevel:1},roles:[{asset:"allianceGuard",HPLevel:0,ATKLevel:0,selected:!0}],equips:[],skill:{},chip:{role:{},skill:{}},prop:{gold:0,equipNum:0,potato:0},hearts:{current:this.HEARTS_DEFAULT.CURRENT,max:this.HEARTS_DEFAULT.MAX,nextRecoveryTime:this.HEARTS_DEFAULT.NEXT_RECOVERY_TIME},timeCount:{adBox:900,uploadData:21600},achive:{},setting:{frameRate:60,gameCenter:!0,openEquip:{rank:"*",star:"*"},audio:{music:!0,effect:!0}}}},getPlayDay:function(){var e=H.time()-this.player.createTime,t=86400;return(t=Math.floor(e/t))<1&&(t=1),t},getSaveData:function(){var e={};for(var t in this)"function"!=typeof this[t]&&-1==t.indexOf("_")&&(e[t]=H.clone(this[t]));return e},save:function(){},delData:function(){this.player.isGuest?S("guest",null):S("data_"+this.player.account,null)},setChip:function(e,t,i,n){void 0===i&&(i="+"),n=H.num(n),t in this.chip[e]||(this.chip[e][t]=0),"+"==i&&(this.chip[e][t]+=n),"-"==i&&(this.chip[e][t]-=n),"="==i&&(this.chip[e][t]=n),"-"!=i&&"="!=i||this.chip[e][t]<0&&(this.chip[e][t]=0)},getCache:function(e){return S("data_"+e)},setCache:function(e){e&&e.player&&S("data_"+e.player.account,e)}},cc._RF.pop()},{}],dropPropMgr:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"1e1b2ga16BKRa5zd3LOTBZ/","dropPropMgr"),t.exports={init:function(e){e=i({},{parent1Node:null,parent2Node:null,player:null},e),this.parent1Node=e.parent1Node,this.parent2Node=e.parent2Node,this.player=e.player,this.items=[]},create:function(e){e=i({},{name:"",by:null,layer:1},e);var t=this.parent1Node;2==e.param&&(t=this.parent2Node);var n=app.getPrefab(e.name),r=G("pool").get(n,"dropProp"+e.name);if(r.parent=t,e.by)if(H.is$(e.by,cc.Node)){var o=e.by.getWorldPosition(cc.Vec2.ZERO);r.setWorldPosition(o)}else r.position=e.by;var s=$(r,"dropProp");if(s.uid=H.uid(),s.init(this.player),this.getTipTypes().filter(function(e){return e==s.type})[0]){var a=G("pool").get(app.getPrefab("dropPropTip")),c=$(a,"dropPropTip");c.node.parent=this.parent2Node;var l=cc.find("anim",s.node);l||(l=cc.find("icon",s.node)),c.init({dropPropNode:s.node,player:this.player,iconNode:l}),c.hide(),s.dropPropTip=c}return this.items.push(s),s},remove:function(e){if(e.node){if(G("pool").put(e.node),e.dropPropTip){if(!e.dropPropTip.node)return;G("pool").put(e.dropPropTip.node)}this.items=this.items.filter(function(t){return t.uid!=e.uid})}},getTipTypes:function(){return["box","equip","healPotion","fireJet","pickup","roleChip","skillChip"]},getDropProps:function(){return this.items},getPickupDropProps:function(){for(var e=this.getTipTypes(),t=this.getStaticDropTypes(),i=0;i<e.length;i++)t.push(e[i]);return this.items.filter(function(e){return!t.includes(e.type)})},getStaticDropTypes:function(){return["box","equip"]}},cc._RF.pop()},{}],dropPropTip:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"6e2b7TMIQxMh6nKCbSmFR01","dropPropTip"),cc.Class({extends:e("ccBase"),properties:{},init:function(e){e=i({},{dropPropNode:null,player:null,iconNode:null},e),this.dropPropNode=e.dropPropNode,this.player=e.player,this.find("icon").color=e.iconNode.color;var t=$(e.iconNode,cc.Sprite);this.find("icon",cc.Sprite).spriteFrame=t.spriteFrame},hide:function(){this.node.opacity=0},show:function(){this.node.opacity=255},update:function(){if(this.dropPropNode&&this.player)if(app.screen.isOutView(this.player.node,this.dropPropNode)){var e=H.getWorldPos(this.dropPropNode);this.node.setWorldPosition(e);var t=app.screen.checkView(this.player.node,this.node);(t.isMaxX||t.isMaxY)&&this.node.setWorldPosition(t.worldPos),this.show()}else this.hide()}}),cc._RF.pop()},{ccBase:"ccBase"}],dropProp:[function(e,t){"use strict";cc._RF.push(t,"053a1DfgdZGY54DypGArhE2","dropProp"),cc.Class({extends:cc.Component,properties:{type:cc.String},init:function(e){this.player=e,this.move={},this.move.speed=2*e.move.speed,this.move.dir=cc.Vec2.ZERO,this.move.canMove=!1,this.isPlaying=!1;var t=G("dropProp").getStaticDropTypes();this.isMoveProp=!t.includes(this.type)},onRemove:function(){},remove:function(){G("dropProp").remove(this),this.onRemove(this.type)},playAnim:function(e){if(!this.isPlaying){this.isPlaying=!0;var t=this.player.bodyNode.getWorldPosition(cc.Vec2.ZERO),i=this.node.getWorldPosition(cc.Vec2.ZERO).sub(t).normalize(),n=cc.v2(this.node.x+i.x*this.node.width,this.node.y+i.y*this.node.height);cc.tween(this.node).to(.1,{x:n.x,y:n.y}).call(function(){e&&e()}).start()}},moveToTarget:function(){var e=this;this.playAnim(function(){e.move.canMove=!0})},update:function(e){var t=this;if(!M("fight").stop&&this.player){var i=this.player.bodyNode.getWorldPosition(cc.Vec2.ZERO),n=this.node.getWorldPosition(cc.Vec2.ZERO),r=H.dist(n,i);if(this.isMoveProp)r<=this.player.propRadius&&this.playAnim(function(){t.move.canMove=!0});else if(r<=.7*this.player.node.width)return void this.remove();if(this.move.canMove)if(this.move.dir=i.sub(n).normalize(),r<=10)this.remove();else{var o=this.move.speed*e;this.node.x+=this.move.dir.x*o,this.node.y+=this.move.dir.y*o}}}}),cc._RF.pop()},{}],drugItem:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"44e755m3V5FL52UA9qYXkU9","drugItem"),cc.Class({extends:e("skill"),properties:{spriteFrames:[cc.SpriteFrame]},init:function(e){e=i({},{timeout:3},e);var t=$(this.find("anim",this.node),cc.Sprite);t&&(t.spriteFrame=H.randArr(this.spriteFrames)),this.timeout=e.timeout,this.defHurtCd=.2,this.hurtCd=this.defHurtCd,this.isCollide=!1,this.isStay=!0,this.isInit=!0},remove:function(){G("pool").put(this.node)},update:function(e){this.isInit&&this.role&&(M("fight").stop||(this.hurtCd>0?(this.hurtCd-=e,this.isCollide=!1):(this.hurtCd=this.defHurtCd,this.isCollide=!0),this.timeout-=e,this.timeout<=0&&this.remove()))}}),cc._RF.pop()},{skill:"skill"}],drug:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"7dbd8FmajNNuJqCMwQc57c3","drug"),cc.Class({extends:e("ccBase"),properties:{},initData:function(e){e=i({},{asset:"",cd:3,num:1,scale:1,timeout:3,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.defCd=e.cd,this.cd=this.defCd,this.num=e.num,this.scale=e.scale,this.timeout=e.timeout,this.skillCd=0},init:function(e,t){this.role=e,this.skillName=t},createItems:function(){if(G("skill").checkRole(this.role))for(var e=1;e<=this.num;e++){var t=G("pool").get(this.prefab);t.scaleX=this.scale,t.scaleY=this.scale,t.parent=G("skill").parent1Node;var i=$(t,"skill");i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),i.init({timeout:this.timeout});var n=this.role.node.getWorldPosition(cc.Vec2.ZERO),r=app.screen.width/2*.7,o=app.screen.height/2*.7,s=H.randNum(-r,r),a=H.randNum(-o,o);t.setWorldPosition(cc.v2(n.x+s,n.y+a))}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.skillCd>0?this.skillCd-=e:(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.skillCd=this.timeout,this.cd=this.defCd))))}}),cc._RF.pop()},{ccBase:"ccBase"}],effectMgr:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"df830zA/q5Pz4gpM+l1esbj","effectMgr"),t.exports={init:function(e){e=i({},{parent1Node:null,parent2Node:null,tipParentNode:null},e),this.parent1Node=e.parent1Node,this.parent2Node=e.parent2Node,this.tipParentNode=e.tipParentNode},create:function(e){var t;if(t=(e=i({},{by:null,asset:"",layer:2,addY:0,addX:0,color:"#FFFFFF",parentNode:null,timeout:!1,once:!1},e)).parentNode?e.parentNode:1==e.layer?this.parent1Node:this.parent2Node,e.once){var n=t.children.filter(function(t){return t.name==e.asset})[0];if(n){n.y+=e.addY,n.x+=e.addX;var r=$(n,"effect");if(r)return r.init(e),r}}var o=app.getPrefab(e.asset),s=G("pool").get(o,"effect"+e.asset);s.parent=t,e.by&&(H.is$(e.by,cc.Node)?s.position=H.toAR(e.by,s.parent):s.position=e.by),s.y+=e.addY,s.x+=e.addX;var a=H.add$(s,"effect",!0);if(a.anim){var c=cc.find("anim",o.data);a.anim.node.width=c.width,a.anim.node.height=c.height}return a.init(e),a},updDirAngle:function(e,t){e.angle=180*Math.atan2(t.y,t.x)/Math.PI},showTip:function(e){e=i({},{by:null,string:"",fontSize:20,color:"#FFFFFF",addX:0,addY:0},e);var t=G("pool").get(app.getPrefab("showTip"));t.parent=this.tipParentNode,e.by&&(H.is$(e.by,cc.Node)?t.position=H.toAR(e.by,t.parent):t.position=e.by),t.x+=e.addX,t.y+=e.addY;var n=$(cc.find("label",t),cc.Label);n.node.color=cc.color(e.color),n.string=e.string,n.fontSize=e.fontSize,n.lineHeight=e.fontSize,$(n.node,cc.Animation).play("showTip").once(cc.Animation.EventType.FINISHED,function(){G("pool").put(t)})}},cc._RF.pop()},{}],effect:[function(e,t){"use strict";cc._RF.push(t,"e490fgkgFJBi4xpDdsNIlN9","effect"),cc.Class({extends:e("ccBase"),properties:{},init:function(e){var t=this;if(this.timeout=e.timeout,this.anim=this.find("anim",cc.Animation),this.anim){this.anim.node.color=cc.color(e.color);var i=this.anim.defaultClip.name;this.animState=this.anim.getAnimationState(i),this.animState.isPlaying||(this.animState=this.anim.play(),this.animState.once(cc.Animation.EventType.FINISHED,function(){t.remove()}))}this.isInit=!0},onRemove:function(){},remove:function(){G("pool").put(this.node),this.onRemove()},update:function(e){this.isInit&&!1!==this.timeout&&(this.timeout-=e,this.timeout<=0)&&this.remove()}}),cc._RF.pop()},{ccBase:"ccBase"}],enemyGroup:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"67c36go+JJElqPiWgBrR+PS","enemyGroup"),cc.Class({extends:e("roleBase"),properties:{},initFirst:function(e){if(this.firstEnemy=e,this.firstEnemy.uid==this.uid){var t=this.target.bodyNode.getWorldPosition(cc.Vec2.ZERO),i=this.node.getWorldPosition(cc.Vec2.ZERO),n=t.sub(i).normalize();this.move.dir=n,this.target.node.x>this.node.x&&(this.bodyNode.scaleX=1),this.target.node.x<this.node.x&&(this.bodyNode.scaleX=-1)}else this.bodyNode.scaleX=this.firstEnemy.bodyNode.scaleX,this.move.dir=this.firstEnemy.move.dir},initData:function(e){this.data=i({},{HP:10,ATK:2},e),this.defData=H.clone(this.data)},init:function(e){e=i({},{target:null,data:{}},e),this.initBase(),this.type="group",this.group="enemy",this.initData(e.data),this.target=e.target,this.stop=!1,this.move={},this.move.dir=null,this.move.speed=400,this.checkOut=!1,this.isInit=!0},remove:function(){G("role").remove(this)},onEnter:function(e){this.checkCollide(e)&&this.collide(e)},onStay:function(e){this.checkCollide(e,!0)&&this.collide(e)},suck:function(e){if(e&&this.data&&!(this.data.HP<=0||this.state.sleep.cd>0)){this.state.stop.cd=.2;var t=H.getWorldPos(e),i=H.getWorldPos(this.node),n=t.sub(i).normalize();this.node.x+=n.x,this.node.y+=n.y}},update:function(e){if(this.isInit&&!M("fight").stop&&this.target)if(!this.checkOut&&G("role").isOut(this.target.node,this.node)?this.checkOut=!1:this.checkOut=!0,this.checkOut&&G("role").isOut(this.target.node,this.node))this.remove();else if(!(this.data.HP<=0))if(this.state.sleep.cd>0)this.state.sleep.cd-=e;else if(this.state.stop.cd>0)this.state.stop.cd-=e;else{var t=this.move.speed*e;this.move.dir&&(this.node.x+=this.move.dir.x*t,this.node.y+=this.move.dir.y*t)}}}),cc._RF.pop()},{roleBase:"roleBase"}],enemyNear:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"73729hRS15IzK2jKlNkzApd","enemyNear"),cc.Class({extends:e("roleBase"),properties:{},loadAsset:function(e,t){var i=this;if(this.animExt){var n="fight/role/enemy/"+e;app.loadDir(n,cc.SpriteFrame).then(function(e){e=e.sort(function(e,t){return H.num(e.name)-H.num(t.name)});var n=cc.AnimationClip.createWithSpriteFrames(e,10);n.name="move",n.wrapMode=cc.WrapMode.Loop,i.animExt.anim.addClip(n),t&&t()})}},initData:function(e){this.data=i({},{HP:10,ATK:2},e),this.defData=H.clone(this.data)},init:function(e){var t=this;if(e=i({},{target:null,data:{}},e),this.initBase(),this.type="near",this.group="enemy",this.initData(e.data),this.move={},this.move.speed=200,this.move.dir=cc.Vec2.ZERO,this.target=e.target,this.node.setWorldPosition(G("role").getEnemyWorldPos(this.target)),this.bossLevel=e.data.bossLevel,this.bossLevel){for(var n=1,r=1;r<=this.bossLevel;r++)n+=1;this.node.scaleX=n,this.node.scaleY=n;var o=cc.find("roleProgressBar",this.node);o||((o=G("pool").get(app.getPrefab("roleProgressBar"))).parent=this.node,o.y=this.node.height,this.find("HP",o).color=cc.color("#FF0000")),o.active=!0,this.progressBar={},this.progressBar.node=o,this.progressBar.HP=$(this.find("HP",o),cc.ProgressBar)}else{var s=cc.find("roleProgressBar",this.node);s&&(s.active=!1),this.node.scaleX=1,this.node.scaleY=1}this.frame=0,this.defHurtRepelCd=.2,this.hurtRepelCd=0,this.checkOut=!1,this.isInit=!1,this.loadAsset(this.asset,function(){t.isInit=!0,t.animExt.play("move")})},onEnter:function(e){this.checkCollide(e)&&this.collide(e)},onStay:function(e){var t=$(e.node,"enemyNear");if(t){if(this.state.sleep.cd>0)return;var i=this.node.position.sub(t.node.position).normalize();if(this.bossLevel&&t.bossLevel||!this.bossLevel)return this.node.x+=i.x,void(this.node.y+=i.y)}this.checkCollide(e,!0)&&this.collide(e)},hurtRepel:function(e){if(e&&this.data&&!(this.data.HP<=0||this.state.sleep.cd>0||this.hurtRepelCd>0)){this.hurtRepelCd=this.defHurtRepelCd;var t=H.getWorldPos(this.node),i=H.getWorldPos(e),n=this.move.speed/4;this.bossLevel&&(n/=this.bossLevel);var r=t.sub(i).normalize();this.node.x+=r.x*n,this.node.y+=r.y*n}},suck:function(e){if(e&&this.data&&!(this.data.HP<=0||this.state.sleep.cd>0)){this.state.stop.cd=.2;var t=H.getWorldPos(e),i=H.getWorldPos(this.node),n=t.sub(i).normalize();this.node.x+=n.x,this.node.y+=n.y}},remove:function(){G("role").remove(this)},onDisable:function(){},update:function(e){if(this.isInit&&!M("fight").stop&&this.target&&!this.stop){if(this.progressBar)this.data.HP>0?this.progressBar.HP.progress=this.data.HP/this.defData.HP:this.progressBar.node.active=!1;else if(!this.checkOut&&G("role").isOut(this.target.node,this.node)?this.checkOut=!1:this.checkOut=!0,this.checkOut&&G("role").isOut(this.target.node,this.node))return void this.node.setWorldPosition(G("role").getEnemyWorldPos(this.target));if(!(this.data.HP<=0||this.target.data.HP<=0))if(this.hurtRepelCd>0&&(this.hurtRepelCd-=e),this.state.sleep.cd>0)this.state.sleep.cd-=e;else if(this.target.node.x>this.node.x&&(this.bodyNode.scaleX=1),this.target.node.x<this.node.x&&(this.bodyNode.scaleX=-1),this.state.stop.cd>0)this.state.stop.cd-=e;else{var t=H.dist(this.node,this.target.node);if(this.move.dir=t>10?this.target.node.position.sub(this.node.position).normalize():cc.Vec2.ZERO,!this.move.dir.equals(cc.Vec2.ZERO)){var i=this.move.speed*e;this.node.x+=this.move.dir.x*i,this.node.y+=this.move.dir.y*i}}}}}),cc._RF.pop()},{roleBase:"roleBase"}],enemyRange:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"80e87XmIydNwqpGpHMuGz41","enemyRange"),cc.Class({extends:e("roleBase"),properties:{},loadAsset:function(e,t){var i=this;if(this.animExt){var n="fight/role/enemy/"+e;app.loadDir(n,cc.SpriteFrame).then(function(e){e=e.sort(function(e,t){return H.num(e.name)-H.num(t.name)}),$(i.animExt.anim.node,cc.Sprite).spriteFrame=e[0];var n=cc.AnimationClip.createWithSpriteFrames([e[0]],10);n.name="idle",n._duration=.6,n.wrapMode=cc.WrapMode.Loop,n.curveData.props={},n.curveData.props.scaleY=[],n.curveData.props.scaleY.push({frame:0,value:1}),n.curveData.props.scaleY.push({frame:.3,value:.9}),n.curveData.props.scaleY.push({frame:.6,value:1}),n.curveData.props.anchorY=[],n.curveData.props.anchorY.push({frame:0,value:.5}),n.curveData.props.anchorY.push({frame:.3,value:.556}),n.curveData.props.anchorY.push({frame:.6,value:.5}),i.animExt.anim.addClip(n),e.splice(0,1);var r=cc.AnimationClip.createWithSpriteFrames(e,10);r.name="move",r.wrapMode=cc.WrapMode.Loop,i.animExt.anim.addClip(r),t&&t()})}},initData:function(e){this.data=i({},{HP:10,ATK:2},e),this.defData=H.clone(this.data)},init:function(e){var t=this;if(e=i({},{target:null,data:{}},e),this.initBase(),this.type="range",this.group="enemy",this.move={},this.move.dir=cc.Vec2.ZERO,this.move.speed=150,this.initData(e.data),this.target=e.target,this.node.setWorldPosition(G("role").getEnemyWorldPos(this.target)),this.bossLevel=e.data.bossLevel,this.bossLevel){for(var n=1,r=1;r<=this.bossLevel;r++)n+=2;this.node.scaleX=n,this.node.scaleY=n;var o=cc.find("roleProgressBar",this.node);o||((o=G("pool").get(app.getPrefab("roleProgressBar"))).parent=this.node,o.y=this.node.height,this.find("HP",o).color=cc.color("#FF0000")),o.active=!0,this.progressBar={},this.progressBar.node=o,this.progressBar.HP=$(this.find("HP",o),cc.ProgressBar)}else{var s=cc.find("roleProgressBar",this.node);s&&(s.active=!1),this.progressBar=null,this.node.scaleX=1,this.node.scaleY=1}this.defHurtRepelCd=.2,this.hurtRepelCd=0,this.checkOut=!1,this.isInit=!1,this.loadAsset(this.asset,function(){t.isInit=!0,t.animExt.play("move")})},onEnter:function(e){this.checkCollide(e)&&this.collide(e)},onStay:function(e){var t=$(e.node,"enemyRange");if(t){if(this.state.sleep.cd>0)return;var i=this.node.position.sub(t.node.position).normalize();if(this.bossLevel&&t.bossLevel||!this.bossLevel)return this.node.x+=i.x,void(this.node.y+=i.y)}this.checkCollide(e,!0)&&this.collide(e)},hurtRepel:function(e){if(e&&this.data&&!(this.data.HP<=0||this.state.sleep.cd>0||this.hurtRepelCd>0)){this.hurtRepelCd=this.defHurtRepelCd;var t=H.getWorldPos(this.node),i=H.getWorldPos(e),n=this.move.speed/4;this.bossLevel&&(n/=this.bossLevel);var r=t.sub(i).normalize();this.node.x+=r.x*n,this.node.y+=r.y*n}},suck:function(e){if(e&&this.data&&!(this.data.HP<=0||this.state.sleep.cd>0)){this.state.stop.cd=.2;var t=H.getWorldPos(e),i=H.getWorldPos(this.node),n=t.sub(i).normalize();this.node.x+=n.x,this.node.y+=n.y}},remove:function(){G("role").remove(this)},onDisable:function(){},update:function(e){if(this.isInit&&!M("fight").stop&&this.target){if(this.progressBar)this.data.HP>0?this.progressBar.HP.progress=this.data.HP/this.defData.HP:this.progressBar.node.active=!1;else if(!this.checkOut&&G("role").isOut(this.target.node,this.node)?this.checkOut=!1:this.checkOut=!0,this.checkOut&&G("role").isOut(this.target.node,this.node))return void this.node.setWorldPosition(G("role").getEnemyWorldPos(this.target));if(!(this.data.HP<=0||this.target.data.HP<=0))if(this.hurtRepelCd>0&&(this.hurtRepelCd-=e),this.state.sleep.cd>0)this.state.sleep.cd-=e;else if(this.target.node.x>this.node.x&&(this.bodyNode.scaleX=1),this.target.node.x<this.node.x&&(this.bodyNode.scaleX=-1),this.state.stop.cd>0)this.state.stop.cd-=e;else if(H.dist(this.node,this.target.node)>app.screen.width/2?this.move.dir=this.target.node.position.sub(this.node.position).normalize():this.move.dir=cc.Vec2.ZERO,this.move.dir.equals(cc.Vec2.ZERO))this.animExt.isPlaying("idle")||this.animExt.play("idle");else{var t=this.move.speed*e;this.node.x+=this.move.dir.x*t,this.node.y+=this.move.dir.y*t,this.animExt.isPlaying("move")||this.animExt.play("move")}}}}),cc._RF.pop()},{roleBase:"roleBase"}],en:[function(e,t){"use strict";var i;cc._RF.push(t,"c3e6ehfDgdGR5a7/cUwo6px","en"),t.exports=((i={app_name:"Inscription Survivors",ios_app_name:"Inscription Survivors",android_app_name:"Inscription Survivors",error_action:"Operation failed",error_chip:"Insufficient fragments",error_gold:"Insufficient gold",error_role:"Hero unavailable",error_timeout:"Connection timeout",error_ad:"Ads unavailable. Please try again later",error_ad_ready:"Ad not ready",error_equipNum:"Insufficient Chests",error_cd:"Skill on cooldown",error_revive:"No revivals left",error_equip_level:"Cannot exceed current level",error_version:"New version available\nExit and restart game?",error_guest:"Guest accounts cannot perform this action",error_data:"Data error occurred",error_length:"Must be %{length} characters",error_sid_friendSid:"Cannot enter your own ID",error_sid_max:"Maximum bindings reached",error_sid_self:"ID already bound to your account",error_select_role:"Hero not unlocked",error_no_upLevel:"Insufficient resources to upgrade",success_action:"Operation successful",success_uploadData:"Data synchronized",success_upLevel:"Level up successful",success_buy:"Purchase successful",success_gain:"Item acquired",success_revive:"Revival successful",loading:"Loading",login_guest:"Login with OKX Wallet",login_guest_unisat:"Login with Unisat Wallet",login_guest_web3:"OKX WEB3 WALLET",login_qq:"Sign in with QQ",login_taptap:"Sign in with TapTap",login_apple:"Sign in with Apple",login_out:"Logout",delete_data:"Delete data",exitGame:"Exit game",sid:"ID",copy:"copy",input:"input",doc_user:"User Agreement",doc_privacy:"Privacy Policy",reportToAdmin:"Problem feedback",uploadData:"upload data",never:"never",ok:"OK"}).copy="COPY",i.yes="YES",i.close="CLOSE",i.agree="agree",i.refuse="refuse",i.guestLoginTips="Tourist mode cannot save in the cloud\nDo you want to enter the game?",i.sidTip="Enter your friend ID to receive rewards",i.playDayTip="Accompanying you %{day} day",i.roleHelpTip="Unlock and upgrade other heroes to empower your active hero:\n\u2022 Each hero level provides [+2 HP] or [+1 ATK] bonus",i.skillHelpTip="Upgrade skills to empower your active hero:\n\u2022 Each skill level provides [+1 HP] or [+0.5 ATK] bonus",i.deleteDataTip="Delete local and server data\ndo you want to continue?",i.reportToAdminTip="Please let us know the problem you have encountered",i.gameCenterSignTip="Not logged in to GameCenter\nDo you want to open it in your phone settings?",i.gameCenterSend="Send",i.frameRate="Frame rate",i.startGame="Start Game",i.notHave="Not unlocked",i.get="GET",i.canGain="Can be claimed",i.buy="Unlock",i.select="Select",i.upLevel="Upgrade",i.allUpLevel="Upgrade All",i.gain="Claim",i.allGain="Claim All",i.continue="Continue",i.exit="Exit",i.revive="Revive",i.noAttr="No attributes",i.noEquip="No equip",i.currentEquip="Current",i.all="All",i.condition="Filter",i.sell="Sell",i.equip="Equip",i.hero="Hero",i.skill="Skill",i.achive="Feats",i.hurt="Damage",i.dps="DPS",i.ATKPencent="ATK",i.HPPencent="HP",i.critOdds="Crit",i.doubleOdds="Double",i.audioMusic="Music",i.audioEffect="Effect",i.fightLevel="Lv %{level}",i.total="Total",i.done="Done",i.achiveInfo={lookAd:{video:"Look Ad"},gainProp:{gold:"Gold earned in combat",equipNum:"Equip box gained in combat"},useRole:"Hero Clears",useSkill:"Skill uses in combat",usePassiveSkill:"Reach Max Level in Combat"},i.skillFightUplevel="In-battle Upgrade",i.skillInfo={hole:{title:"Abyss",title2:"Endless",des:"Deals damage every 0.5s to enemies in range\nDamage, Range"},fireBall:{title:"Fireball",title2:"Apocalypse",des:"Attacks and knocks back nearest target\nCooldown, Damage, Range, Count, Pierce"},sword:{title:"Sword",title2:"HolySword",des:"Surround and deal damage to enemies while repelling (blocking bullets)\nCD,damage,range,quantity,duration"},dart:{title:"Darts",title2:"WindDemon",des:"Launch multiple attacks on the nearest target\nCD,damage,range,quantity,penetration"},drug:{title:"Venom",title2:"HighlyToxic",des:"Generate at random locations and deal (0.2 seconds/time) to enemies\ndamage,range,quantity,duration"},stony:{title:"Meteorite",title2:"Meteor",des:"Surround and deal damage to enemies while repelling (blocking bullets)\nCD,duration,damage,range,quantity,speed"},magicBall:{title:"EnergySphere",title2:"MagicBall",des:"Attack the nearest enemy\nCD,damage"},lightning:{title:"Lightning",title2:"ThunderStrike",des:"Attack random targets and explode (with 50% damage)\nCD,damage,range,quantity"},boomerang:{title:"Boomerang ",title2:"StrongBoomerang",des:"Attack random targets and return\nCD,damage,range"},bomb:{title:"Bomb",title2:"ExplosiveBomb",des:"Attack random target explosion causing range damage\nCD,damage,range"},ice:{title:"IceBolt",title2:"FrostNova",des:"Attack random targets and freeze\nCD,duration,damage,quantity,penetration"},knive:{title:"Slash",title2:"MoonSlash",des:"Attack the nearest target and penetrate (block bullets)\nCD,damage,range,quantity"},gem:{title:"Gemstone",title2:"MegaBeam",des:"Attack the nearest target and reflect at the edge of the field of view (lasting for 5 seconds)\nCD,damage,quantity"},laser:{title:"Laser",title2:"SuperEnergy",des:"Random direction causes (0.2 seconds/time) damage\nCD,duration,damage,range,quantity"},tornado:{title:"Tornado",title2:"UltimateStorm",des:"Causing (0.2 seconds/time) damage in random directions and getting involved in\nCD,damage,range,quantity,speed"}},i.passiveSkillInfo={propRadius:{title:"PickupRange"},SPD:{title:"MoveSpeed"},ATK:{title:"ATK"},HP:{title:"Max HP"}},i),cc._RF.pop()},{}],equipDataInfo:[function(e,t){"use strict";cc._RF.push(t,"8454dvF/SJHqIj1v4J+R7gd","equipDataInfo"),cc.Class({extends:e("ccBase"),properties:{},upd:function(e,t){var i=this;if(!e)return e;this.data=e,this.otherData=t,this.HPLabel=this.find("HP/label",cc.Label),this.HPLabel.node.parent.active=!1,this.ATKLabel=this.find("ATK/label",cc.Label),this.ATKLabel.node.parent.active=!1,this.attrItemNode=this.find("attrParent/attrItem"),this.attrItemNode.active=!1,this.skillAttrItemNode=this.find("attrParent/skillAttrItem"),this.skillAttrItemNode.active=!1,this.equip=this.find("equip","equip"),this.equip.upd(this.data),"HP"in this.data&&(this.HPLabel.node.parent.active=!0,this.HPLabel.string=H.numAbbr(this.data.HP)),"ATK"in this.data&&(this.ATKLabel.node.parent.active=!0,this.ATKLabel.string=H.numAbbr(this.data.ATK)),this.attrItems&&this.attrItems.forEach(function(e){G("pool").put(e.node,!0)}),this.attrItems=[],console.log("Enter equipDataInfo ... this.data.attrs ... ",this.data,this.data.attrs),this.data.attrs?(this.find("attrParent/noAttrLabel").active=!1,M("role").getAttrs("base").forEach(function(e){i.data.attrs.forEach(function(t){if(console.log("Enter equipDataInfo ... equipAttr ... ",t.key,e.key),e.key==t.key){var n={};n.node=G("pool").get(i.attrItemNode,"equipDataInfoAttrItem"),n.node.parent=i.attrItemNode.parent,n.data=t,n.titleLabel=i.find("titleLabel",cc.Label,n.node),n.label=i.find("label",cc.Label,n.node),n.titleLabel.string=e.name,n.label.string="+"+t.value+"%",i.attrItems.push(n)}})}),M("role").getAttrs("skill").forEach(function(e){i.data.attrs.forEach(function(t){if(e.key==t.key){var n={};n.node=G("pool").get(i.skillAttrItemNode,"equipDataInfoSkillAttrItem"),n.node.parent=i.skillAttrItemNode.parent,n.data=t,n.label=i.find("label",cc.Label,n.node),n.iconSprite=i.find("icon",cc.Sprite,n.node);var r=t.key.substr(0,t.key.length-7);n.iconSprite.spriteFrame=G("skill").getSpriteFrame(r),n.label.string="+"+t.value+"%",i.attrItems.push(n)}})})):this.find("attrParent/noAttrLabel").active=!0;var n=function(e,t,i){if(e)return e.active=!1,"+"==t?(e.active=!0,e.scaleY=1,void(e.color=cc.color("#00FF00"))):"-"==t?(e.active=!0,e.scaleY=-1,void(e.color=cc.color("#FF0000"))):void(t>i?(e.active=!0,e.scaleY=1,e.color=cc.color("#00FF00")):t<i&&(e.active=!0,e.scaleY=-1,e.color=cc.color("#FF0000")))},r=this.find("HP/arrow");if(r&&(r.active=!1),this.otherData||n(r,"+"),(r=this.find("ATK/arrow"))&&(r.active=!1),this.otherData||n(r,"+"),this.attrItems.forEach(function(e){var t=i.find("arrow",e.node);t&&(t.active=!1),i.otherData||n(t,"+")}),this.otherData){var o=this.find("HP/arrow");o.active=!1,"HP"in this.data&&"HP"in this.otherData&&n(o,this.data.HP,this.otherData.HP),(o=this.find("ATK/arrow")).active=!1,"ATK"in this.data&&"ATK"in this.otherData&&n(o,this.data.ATK,this.otherData.ATK),this.attrItems.forEach(function(e){var t=i.find("arrow",e.node);if(t)if(t.active=!1,i.otherData.attrs){var r=i.otherData.attrs.filter(function(t){return t.key==e.data.key})[0];r&&n(t,e.data.value,r.value)}else n(t,"+")})}}}),cc._RF.pop()},{ccBase:"ccBase"}],equipInfo:[function(e,t){"use strict";cc._RF.push(t,"c46d6It1ANH47pVDXshy7B7","equipInfo"),cc.Class({extends:e("popup"),properties:{},show:function(e){return console.log("equipData ... ",e),this.data=e,this.equipDataInfo=this.find("equipInfo","equipDataInfo"),this.upLevelBtn=this.find("upLevelBtn",cc.Button),this.upLevelBtn.goldLabel=this.find("gold/label",cc.Label),this.upLevelBtn.node.on("touchend",this.upLevelBtnEvent,this),this.upd(this.data),H.show(this)},upd:function(e){this.data=M("equip").getData(e.uid),this.equipDataInfo.upd(this.data),M("equip").calUpLevel(this.data,1),this.upLevelBtn.interactable=!1,this.upLevelBtn.goldLabel.node.color=cc.color("#FFFFFF"),this.upLevelBtn.goldLabel.string="MAX"},upLevelBtnEvent:function(){}}),cc._RF.pop()},{popup:"popup"}],equipModel:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"2ad4eY9+s5G7Ie4LTCF2Y1A","equipModel"),t.exports={eventType:{ADD:"equipModel.add",UP_LEVEL:"equipModel.upLevel"},createData:function(e){"?"==(e=i({},{uid:H.uid(),level:0,type:"?",pos:"?",star:"?",rank:"?",attrs:null},e)).type&&(e.type=H.randNum(1,3)),"?"==e.pos&&(e.pos=H.randArr(["arm","head","chest","foot"])),"?"==e.star&&(e.star=H.randNum(0,5)),"?"==e.rank&&(H.calOdds(30)?e.rank=H.randNum(1,5):e.rank=0);var t={};if(t.uid=e.uid,t.type=e.type,t.pos=e.pos,t.level=e.level,t.star=e.star,t.rank=e.rank,e.attrs)t.attrs=e.attrs;else if(t.rank>0){var n=M("role").getAttrs(),r=H.randArr(n),o={};o.key=r.key;var s=t.rank-1;s<0&&(s=0),o.value=H.num(H.randNum(s,t.rank)+H.randNum(.01,1,!0),2),t.attrs=[o]}var a=function(t){var i=t;return i+=e.star,i+=e.level,H.num(i)};return"arm"==t.pos?t.ATK=a(1):t.HP=a(2),t},add:function(e){M("data").equips.filter(function(t){return t.type===e.type&&t.pos===e.pos})[0]?M("data").equips.forEach(function(t,i){t.type===e.type&&t.pos===e.pos&&M("data").equips.splice(i,1,e)}):M("data").equips.push(e),E.emit(this.eventType.ADD)},preAdd:function(){var e={equipNum:1,error:{}};return M("data").prop.equipNum<e.equipNum?(e.error.equipNum=L("error_equipNum"),e):(M("prop").setNum("equipNum","-",e.equipNum),e)},calSell:function(e){var t=100;t+=50*e.level;var i,n={};return n.gold=(i=t,i+=20*i*e.rank/100,i+=20*i*e.star/100),n},calUpLevel:function(e,t){void 0===t&&(t=1);var i={gold:0,upNum:0,error:{}};if(t<1)return i;e.level>=M("data").fight.level&&(i.error.level=L("error_equip_level"));for(var n=function(e){var t={},i=5e3*e;return i<5e3&&(i=5e3),t.gold=i,t},r=e.level,o=t;!(t&&--o<0);){var s=n(r);i.gold+=s.gold,r++,i.upNum++}return M("data").prop.gold<i.gold&&(i.error.gold=L("error_gold")),i},upLevel:function(e,t){void 0===t&&(t=1);var n=this.calUpLevel(e,t);if(H.isEmpty(n.error)){M("prop").setNum("gold","-",n.gold);var r=i({},e,{level:e.level+t});r=this.createData(r),M("data").equips.forEach(function(t,i){t.uid==e.uid&&M("data").equips.splice(i,1,r)}),E.emit(this.eventType.UP_LEVEL)}return n},getData:function(e,t){return t?M("data").equips.filter(function(i){return i.type==e&&i.pos==t})[0]:M("data").equips.filter(function(t){return t.uid==e})[0]},getColor:function(e){var t="#CCCCCC",i=e.rank;return 1==i&&(t="#519CEE"),2==i&&(t="#4AC74A"),3==i&&(t="#D43FD1"),4==i&&(t="#FFA300"),5==i&&(t="#ED1C24"),t},checkSetting:function(e){var t=M("data").setting.openEquip;return!("*"!=t.rank&&e.rank<H.num(t.rank)||"*"!=t.star&&e.star<H.num(t.star))},isTip:function(){return M("data").prop.equipNum>0}},cc._RF.pop()},{}],equip:[function(e,t){"use strict";cc._RF.push(t,"79fbcXyYYVG4IrVeTllU7pD","equip"),cc.Class({extends:e("ccBase"),properties:{},upd:function(e){var t=this;this.data=e,this.bgNode=this.find("bg"),this.iconSprite=this.find("icon",cc.Sprite),this.levelLabel=this.find("levelLabel",cc.Label),this.starParentNode=this.find("starParent"),this.bgNode.color=cc.color(M("equip").getColor(e)),this.levelLabel.string="Lv"+H.numAbbr(e.level),this.starParentNode.children.forEach(function(t,i){e.star>=i+1?t.active=!0:t.active=!1}),app.load("common/ui/equip/"+e.type+"/"+e.pos,cc.SpriteFrame).then(function(e){t.iconSprite.spriteFrame=e})}}),cc._RF.pop()},{ccBase:"ccBase"}],fightBg:[function(e,t){"use strict";cc._RF.push(t,"b5889mybSRLU7a4UoSZ15UR","fightBg"),cc.Class({extends:e("ccBase"),properties:{},init:function(e){var t=this;this.row=5,this.col=4,this.size=1024,this.targetNode=e,this.playerGridPosX=0,this.playerGridPosY=0,this.halfWidth=app.screen.width/2,this.halfHeight=app.screen.height/2,this.bgNodes=[];for(var i=H.getNextData(["1","2","3","4","5"],M("data").fight.selectLevel),n=["bg1","bg2","bg3","bg4","bg5"],r=[],o=0;o<this.row;o++){r[o]=[];for(var s=[],a=function(){r[o][c]=H.randArr(n);var e=H.inst(app.getPrefab(r[o][c])),a=$(e,cc.Sprite);app.load("fight/bg/bg/"+i,cc.SpriteFrame).then(function(e){a.spriteFrame=e}),e.parent=t.node;var l=c*t.size-t.size+t.halfWidth,h=o*t.size-t.size+t.halfHeight;e.setWorldPosition(cc.v2(l,h)),s.push(e)},c=0;c<this.col;c++)a();this.bgNodes.push(s)}this._frame=0},tryTileX:function(){var e=Math.round((this.targetNode.x-this.halfWidth)/this.size);if(e<this.playerGridPosX)for(var t=this.col-1,i=0;i<this.row;i++){var n=this.bgNodes[i][t],r=n.getWorldPosition(cc.Vec2.ZERO);r.x-=this.col*this.size,n.setWorldPosition(r),this.bgNodes[i].splice(t,1),this.bgNodes[i].unshift(n)}else if(this.playerGridPosX<e)for(var o=0;o<this.row;o++){var s=this.bgNodes[o][0],a=s.getWorldPosition(cc.Vec2.ZERO);a.x+=this.col*this.size,s.setWorldPosition(a),this.bgNodes[o].splice(0,1),this.bgNodes[o].push(s)}this.playerGridPosX=e},tryTileY:function(){var e=Math.round((this.targetNode.y-this.halfHeight)/this.size);if(e<this.playerGridPosY){for(var t=this.row-1,i=[],n=0;n<this.col;n++){var r=this.bgNodes[t][n],o=r.getWorldPosition(cc.Vec2.ZERO);o.y-=this.row*this.size,r.setWorldPosition(o),i.push(r)}this.bgNodes.splice(t,1),this.bgNodes.unshift(i)}else if(this.playerGridPosY<e){for(var s=[],a=0;a<this.col;a++){var c=this.bgNodes[0][a],l=c.getWorldPosition(cc.Vec2.ZERO);l.y+=this.row*this.size,c.setWorldPosition(l),s.push(c)}this.bgNodes.splice(0,1),this.bgNodes.push(s)}this.playerGridPosY=e},update:function(){this.targetNode&&(this._frame++,this._frame%30==0&&(this._frame=0,this.tryTileX(),this.tryTileY()))}}),cc._RF.pop()},{ccBase:"ccBase"}],fightModel:[function(e,t){"use strict";cc._RF.push(t,"f212ceA0N9N3Zit6azxrOgb","fightModel"),t.exports={eventType:{SET_SELECT_LEVEL:"fightModel.setSelectLevel"},init:function(){this.level=1,this.revive=1,this.kill=0,this.round=1,this.reward={},this.reward.isDouble=!1,this.reward.prop={},this.reward.prop.gold=0,this.reward.prop.equipNum=0,this.reward.chips=[],this.player={},this.player.asset="",this.player.level=1,this.player.exp=0,this.player.nextExp=this.calNextLevelExp(this.player.level),this.player.skill={},this.player.passiveSkill={},this.second=0,this.maxSecond=900,this.stop=!1,this.isInit=!0},setSkillNum:function(e,t,i,n){void 0===n&&(n="="),this.player.skill[e]||(this.player.skill[e]={},this.player.skill[e].level=0,this.player.skill[e].hurt=0,this.player.skill[e].second=this.second),"+"==n?this.player.skill[e][t]+=i:"-"==n?this.player.skill[e][t]-=i:this.player.skill[e][t]=i},setPassiveSkillNum:function(e,t,i,n){void 0===n&&(n="=");var r=M("skill").getPassiveBaseDatas().filter(function(t){return t.name==e})[0];r&&(this.player.passiveSkill[e]||(this.player.passiveSkill[e]={},this.player.passiveSkill[e].level=0,"pencent"in r&&(this.player.passiveSkill[e].pencent=r.pencent)),"+"==n?this.player.passiveSkill[e][t]+=i:"-"==n?this.player.passiveSkill[e][t]-=i:this.player.passiveSkill[e][t]=i)},upLevel:function(){this.player.level+=1,this.player.exp=0,this.player.nextExp=this.calNextLevelExp(this.player.level)},calNextLevelExp:function(e){return 10*e},setSelectLevel:function(e,t){void 0===e&&(e="+"),void 0===t&&(t=1),t=H.num(t),"+"==e&&(M("data").fight.selectLevel+=t),"-"==e&&(M("data").fight.selectLevel-=t),"="==e&&(M("data").fight.selectLevel=t),M("data").fight.selectLevel>M("data").fight.level&&(M("data").fight.selectLevel=M("data").fight.level),M("data").fight.selectLevel<1&&(M("data").fight.selectLevel=1),E.emit(this.eventType.SET_SELECT_LEVEL)},getSkills:function(e){var t=this;void 0===e&&(e=!1);var i=[];return e?(Object.keys(this.player.skill).forEach(function(e){var n={};n.name=e,n.level=0,e in t.player.skill&&(n.level=t.player.skill[e].level),i.push(n)}),Object.keys(this.player.passiveSkill).forEach(function(e){var n={isPassive:!0};n.name=e,n.level=0,"HP"!=e&&"ATK"!=e||(n.pencent=t.player.passiveSkill[e].pencent),e in t.player.passiveSkill&&(n.level=t.player.passiveSkill[e].level),i.push(n)}),i):(M("skill").getBaseDatas().forEach(function(e){var n={};n.name=e.name,n.level=0,e.name in t.player.skill&&(n.level=t.player.skill[e.name].level),i.push(n)}),M("skill").getPassiveBaseDatas().forEach(function(e){var n={isPassive:!0};n.name=e.name,n.level=0,"HP"!=e.name&&"ATK"!=e.name||(n.pencent=e.pencent),e.name in t.player.passiveSkill&&(n.level=t.player.passiveSkill[e.name].level),i.push(n)}),i)},getRewardChipAssets:function(e){var t=H.getNextData(M("role").getPlayerBaseDatas(),e);return[{type:"role",asset:t.asset},{type:"skill",asset:t.skillName}]},addRewardChip:function(e){var t=this,i=this.getRewardChipAssets(this.level),n=H.num(this.level/2);n<1&&(n=1),i.filter(function(t){return t.type==e}).forEach(function(i){var r,o;r=i.asset,(o=t.reward.chips.filter(function(t){return t.type==e&&t.asset==r})[0])?o.chip+=n:t.reward.chips.push({type:e,asset:r,chip:n}),M(e).setChip(i.asset,"+",n)})},addRewardPropNum:function(e,t){t||(t=this.level),this.reward.prop[e]+=t,M("prop").setNum(e,"+",t),M("achive").incCount("gainProp",e,t)}},cc._RF.pop()},{}],fightSkillThumb:[function(e,t){"use strict";cc._RF.push(t,"3aa22J6oR5Bq66/F/pPZC0K","fightSkillThumb"),cc.Class({extends:e("ccBase"),properties:{},init:function(e){var t=this;this.fight=e,this.player=this.fight.player,this.itemNode=this.find("item"),this.itemNode.active=!1,this.items=[],this.passiveItems=[];for(var i=function(){var e=H.inst(t.itemNode);e.parent=t.itemNode.parent;var i={};return i.node=e,i.iconSprite=t.find("icon",cc.Sprite,e),i.levelLabel=t.find("levelLabel",cc.Label,e),i.levelLabel.node.active=!1,i},n=0;n<M("skill").getMaxNum();n++){var r=i();this.items.push(r)}for(var o=0;o<M("skill").getMaxNum("passive");o++){var s=i();this.passiveItems.push(s)}this.upd(),this.updPassive()},upd:function(){if(this.items){var e=Object.keys(M("fight").player.skill);this.items.forEach(function(t,i){var n=e[i];n?(t.levelLabel.node.active=!0,M("fight").player.skill[n].level<10?(t.levelLabel.string=M("fight").player.skill[n].level,t.levelLabel.node.color=cc.color("#FFFFFF"),t.iconSprite.spriteFrame=G("skill").getSpriteFrame(n,0)):(t.levelLabel.string="MAX",t.levelLabel.node.color=cc.color("#FF0000"),t.iconSprite.spriteFrame=G("skill").getSpriteFrame(n,1))):(t.levelLabel.node.active=!1,t.iconSprite.spriteFrame=null)})}},updPassive:function(){if(this.passiveItems){var e=Object.keys(M("fight").player.passiveSkill);this.passiveItems.forEach(function(t,i){var n=e[i];n?(t.levelLabel.node.active=!0,t.iconSprite.spriteFrame=app.find[n+"SpriteFrame"],M("fight").player.passiveSkill[n].level<10?t.levelLabel.string=M("fight").player.passiveSkill[n].level:(t.levelLabel.string="MAX",t.levelLabel.node.color=cc.color("#FF0000"))):(t.levelLabel.node.active=!1,t.iconSprite.spriteFrame=null)})}},clearAllSkills:function(){console.log("\u6e05\u7a7a\u6280\u80fd\u7f29\u7565\u56fe\u4e2d\u7684\u6240\u6709\u6280\u80fd\u56fe\u6807"),this.items&&this.items.length>0&&this.items.forEach(function(e){e&&e.levelLabel&&(e.levelLabel.node.active=!1),e&&e.iconSprite&&(e.iconSprite.spriteFrame=null)}),this.passiveItems&&this.passiveItems.length>0&&this.passiveItems.forEach(function(e){e&&e.levelLabel&&(e.levelLabel.node.active=!1),e&&e.iconSprite&&(e.iconSprite.spriteFrame=null)})},onEnable:function(){E.on(G("skill").eventType.SET_LEVEL,this.upd,this),E.on(G("skill").eventType.SET_PASSIVE_LEVEL,this.updPassive,this)},onDisable:function(){E.off(G("skill").eventType.SET_LEVEL,this.upd,this),E.off(G("skill").eventType.SET_PASSIVE_LEVEL,this.updPassive,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],fightStop:[function(e,t){"use strict";cc._RF.push(t,"707c0NeHCJGYbfdv8l6Brqz","fightStop"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.addBtnEvents()},show:function(e){for(var t in this.touchClose=!1,this.fight=e,this.player=this.fight.player,this.exitBtn=this.find("exitBtn",cc.Button),this.exitBtn.node.active=!0,this.reviveBtn=this.find("reviveBtn",cc.Button),this.reviveBtn.node.active=this.isLose()&&M("fight").revive>0,this.closeBtn=this.find("closeBtn",cc.Button),this.closeBtn.node.active=!this.isEnd()&&!this.reviveBtn.node.active,this.doubleBtn=this.find("doubleBtn",cc.Button),this.updDoubleBtn(),this.itemNode=this.find("skillCount/item"),this.itemNode.active=!1,this.killLabel=this.find("kill/label",cc.Label),this.goldLabel=this.find("gold/label",cc.Label),this.killLabel.string=H.num(M("fight").kill),M("fight").player.skill){var i=H.inst(this.itemNode);i.parent=this.itemNode.parent;var n={};n.iconSprite=this.find("bg/icon",cc.Sprite,i),n.levelLabel=this.find("bg/levelLabel",cc.Label,i),n.titleLabel=this.find("titleLabel",cc.Label,i),n.hurtLabel=this.find("hurtLabel",cc.Label,i),n.dpsLabel=this.find("dpsLabel",cc.Label,i),M("fight").player.skill[t].level<10?(n.titleLabel.string=L("skillInfo."+t+".title"),n.iconSprite.spriteFrame=G("skill").getSpriteFrame(t,0),n.levelLabel.node.color=cc.color("#FFFFFF"),n.levelLabel.string=M("fight").player.skill[t].level):(n.titleLabel.string=L("skillInfo."+t+".title2"),n.iconSprite.spriteFrame=G("skill").getSpriteFrame(t,1),n.levelLabel.node.color=cc.color("#FF0000"),n.levelLabel.string="MAX"),n.hurtLabel.string=H.num(M("fight").player.skill[t].hurt);var r=M("fight").second-M("fight").player.skill[t].second;n.dpsLabel.string=H.num(M("fight").player.skill[t].hurt/r,2)}return this.chipRewardItemNode=this.find("chipRewardItem"),this.chipRewardItemNode.active=!1,this.initChipItems(),this.propItemNode=this.find("propItem"),this.propItemNode.active=!1,this.initPropItems(),H.show(this)},initChipItems:function(){var e=this;this.chipRewardItems&&this.chipRewardItems.forEach(function(e){G("pool").put(e.node)}),this.chipRewardItems=[],M("fight").reward.chips.filter(function(e){return e.chip>0}).forEach(function(t){var i={};i.node=G("pool").get(e.chipRewardItemNode,"fightStopChipRewardItemNode"),i.node.parent=e.chipRewardItemNode.parent,i.chipNode=e.find("chip",i.node),i.roleIconSprite=e.find("roleIcon",cc.Sprite,i.node),i.roleIconSprite.node.active=!1,i.skillIconSprite=e.find("skillIcon",cc.Sprite,i.node),i.skillIconSprite.node.active=!1,i.asset=t.asset,"role"==t.type&&(i.chipNode.color=cc.color(M("role").getChipColor()),i.roleIconSprite.node.active=!0,G("role").loadSpriteFrame(t.asset,function(e){i.roleIconSprite.spriteFrame=e})),"skill"==t.type&&(i.chipNode.color=cc.color(M("skill").getChipColor()),i.skillIconSprite.node.active=!0,i.skillIconSprite.spriteFrame=G("skill").getSpriteFrame(t.asset,0)),i.label=e.find("label",cc.Label,i.node),i.label.string=H.numAbbr(t.chip),e.chipRewardItems.push(i)})},updChipItems:function(){this.chipRewardItems&&this.chipRewardItems.forEach(function(e){var t=M("fight").reward.chips.filter(function(t){return t.asset==e.asset})[0];t&&(M("fight").reward.isDouble?e.label.string=H.numAbbr(2*t.chip):e.label.string=H.numAbbr(t.chip))})},initPropItems:function(){for(var e in this.propItems&&this.propItems.forEach(function(e){G("pool").put(e.node)}),this.propItems=[],M("fight").reward.prop)if("gold"!=e&&M("fight").reward.prop[e]>0){var t={};t.node=G("pool").get(this.propItemNode,"fightStopPropItemNode"),t.node.parent=this.propItemNode.parent,t.iconSprite=this.find("icon",cc.Sprite,t.node),t.iconSprite.spriteFrame=app.find[e+"SpriteFrame"],t.asset=e,t.label=this.find("label",cc.Label,t.node),t.label.string=H.numAbbr(M("fight").reward.prop[e]),this.propItems.push(t)}this.goldLabel.string=H.num(M("fight").reward.prop.gold)},updPropItems:function(){if(!this.propItems)return this.propItems;this.propItems.forEach(function(e){e.asset in M("fight").reward.prop&&(M("fight").reward.isDouble?e.label.string=H.numAbbr(2*M("fight").reward.prop[e.asset]):e.label.string=H.numAbbr(M("fight").reward.prop[e.asset]))}),M("fight").reward.isDouble?this.goldLabel.string=H.num(2*M("fight").reward.prop.gold):this.goldLabel.string=H.num(M("fight").reward.prop.gold)},doubleBtnEvent:function(e){var t=this,i=$(e,cc.Button);i.interactable=!1,V("tip").showLoading();var n=function(){i.interactable=!0,V("tip").close()};R("server").api("gameDoubleReward",{}).then(function(e){console.log("server gameDoubleReward return ... ",e),0==e.errcode?(n(),M("fight").reward.isDouble=!0,t.updDoubleBtn(),t.updChipItems(),t.updPropItems(),M("game").setReward(M("fight").reward),V("tip").success(L("success_gain"))):(6==e.errcode?V("tip").error("Insufficient potato"):V("tip").error(e.errcode),n())})},updDoubleBtn:function(){if(M("fight").reward.isDouble)this.doubleBtn.node.active=!1;else if(this.doubleBtn.interactable=!M("fight").reward.isDouble,this.doubleBtn.interactable){var e=!1;for(var t in M("fight").reward.chips.forEach(function(t){t.chip>0&&(e=!0)}),M("fight").reward.prop)"gold"!=t&&M("fight").reward.prop[t]>0&&(e=!0);this.doubleBtn.node.active=e}},closeBtnEvent:function(){M("fight").stop=!1,this.remove()},reviveBtnEvent:function(e){var t=this,i=$(e,cc.Button);if(i.interactable)if(M("fight").revive<1)V("tip").error(L("error_revive"));else{V("tip").showLoading();var n=function(){console.log("enter revive end ... "),i.interactable=!0,V("tip").close()};R("server").api("gameRevive",{}).then(function(e){console.log("server gameRevive return ... ",e),0==e.errcode?(n(),M("fight").revive-=1,t.player.data.HP=.1,G("role").setHP({self:t.player,target:t.player,action:"+",value:.5*t.player.defData.HP}),t.exitBtn.node.active=!1,t.reviveBtn.node.active=!1,t.closeBtn.node.active=!0,V("tip").success(L("success_revive"))):(6==e.errcode?V("tip").error("Insufficient potato"):V("tip").error(e.errcode),n())})}},exitBtnEvent:function(){var e=this;V("animMask").show("close",function(){R("server").api("gameSyncFight",{type:4,round:M("fight").round+1,selectLevel:M("fight").level,kill:M("fight").kill,isDouble:M("fight").reward.isDouble,gold:M("fight").reward.prop.gold,equipNum:M("fight").reward.prop.equipNum,chips:M("fight").reward.chips,playerLevel:M("fight").player.level,playerExp:M("fight").player.exp,skill:M("fight").player.skill,passiveSkill:M("fight").player.passiveSkill,nextExp:M("fight").player.nextExp}).then(function(t){console.log("server gameSyncFight 4 finish return ... ",t),0==t.errcode&&(e.fight.remove(),e.remove(),G("pool").clearAll(),V("animMask").show("open",function(e){e.remove()}),V("index").show())})})},isLose:function(){return!(M("fight").second>=M("fight").maxSecond)&&this.player.data.HP<=0},isEnd:function(){return this.player.data.HP<=0||M("fight").second>=M("fight").maxSecond&&G("role").roles.filter(function(e){return"player"!=e.group}).length<=0},onKeyDown:function(e){e.keyCode==cc.macro.KEY.escape&&this.closeBtn.node.active&&this.closeBtnEvent()},onEnable:function(){this._super(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDisable:function(){this._super(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)}}),cc._RF.pop()},{popup:"popup"}],fightUpLevel:[function(e,t){"use strict";cc._RF.push(t,"5e884qbBJVI+ZuvCuu9o8av","fightUpLevel"),cc.Class({extends:e("popup"),properties:{},show:function(e,t){return void 0===t&&(t="exp"),this.touchClose=!1,this.fight=e,this.type=t,this.player=this.fight.player,this.itemNode=this.find("item"),this.itemNode.active=!1,this.adBtn=this.find("adBtn",cc.Button),this.adBtn.node.active=!1,this.itemNum=3,this.initItems(),this.addBtnEvents(),H.show(this)},initItems:function(){var e=this;if("exp"==this.type){var t=M("fight").getSkills().filter(function(e){return!e.isPassive});M("fight").getSkills(!0).filter(function(e){return!e.isPassive}).length>=M("skill").getMaxNum()&&(t=M("fight").getSkills().filter(function(e){return!e.isPassive&&e.level>0}));var i=M("fight").getSkills().filter(function(e){return e.isPassive});M("fight").getSkills(!0).filter(function(e){return e.isPassive}).length>=M("skill").getMaxNum("passive")&&(i=M("fight").getSkills().filter(function(e){return e.isPassive&&e.level>0})),t.length>0||i.length>0?this.skills=t.concat(i).filter(function(e){return e.level<10}):this.skills=[]}else this.skills=M("fight").getSkills().filter(function(e){return e.level>0&&e.level<10});this.skills=H.randArr(this.skills,3),1==this.skills.length?(this.skills.push({name:"gold"}),this.skills.push({name:"healPotion"})):2==this.skills.length?this.skills.push({name:"gold"}):this.skills.length<1&&(this.skills=[],this.skills.push({name:"gold"}),this.skills.push({name:"healPotion"}),this.adBtn.node.active=!1),this.adBtn.node.active=this.skills.length>=3,this.skills.forEach(function(t){var i={};if(i.node=G("pool").get(e.itemNode,"fightUpLevelItem"),i.node.parent=e.itemNode.parent,i.iconSprite=e.find("icon",cc.Sprite,i.node),i.iconSprite.node.active=!1,i.passiveNode=e.find("passive",i.node),i.passiveNode.active=!1,i.passiveIconSprite=e.find("icon",cc.Sprite,i.passiveNode),i.passiveTitleLabel=e.find("titleLabel",cc.Label,i.passiveNode),i.label=e.find("label",cc.Label,i.node),i.upBtn=e.find("upBtn",cc.Button,i.node),"gold"!=t.name&&"healPotion"!=t.name){var n=t.level+1;n>9?(i.label.string="MAX",i.label.node.color=cc.color("#FF0000")):t.level<1?(i.label.string="New",i.label.node.color=cc.color("#00FF00")):(i.label.string="Lv"+n,i.label.node.color=cc.color("#FFFFFF")),t.isPassive?(i.passiveNode.active=!0,i.passiveTitleLabel.string=L("passiveSkillInfo."+t.name+".title"),"pencent"in t&&(i.passiveTitleLabel.string+="+"+t.pencent+"%"),i.passiveIconSprite.spriteFrame=app.find[t.name+"SpriteFrame"],t.level<1?i.upBtn.node.on("touchend",function(){e.setPassiveSkillLevel(t.name,1),e.remove()}):i.upBtn.node.on("touchend",function(){e.setPassiveSkillLevel(t.name,t.level+1),e.remove()})):(i.iconSprite.node.active=!0,t.level>8?i.iconSprite.spriteFrame=G("skill").getSpriteFrame(t.name,1):i.iconSprite.spriteFrame=G("skill").getSpriteFrame(t.name,0),t.level<1?i.upBtn.node.on("touchend",function(i){E.stop(i),e.setSkillLevel(t.name,1),e.remove()}):i.upBtn.node.on("touchend",function(i){E.stop(i),e.setSkillLevel(t.name,t.level+1),e.remove()}),i.iconSprite.node.on("touchend",function(e){E.stop(e),V("skillInfo").show(t.name)}))}else{if(i.iconSprite.node.active=!0,i.iconSprite.spriteFrame=app.find[t.name+"SpriteFrame"],"gold"==t.name){var r=50*M("fight").level;i.label.string=H.numAbbr(r),i.upBtn.node.on("touchend",function(){M("fight").addRewardPropNum("gold",r),e.remove()})}"healPotion"==t.name&&(i.label.string=1,i.upBtn.node.on("touchend",function(){G("role").setHP({self:e.player,target:e.player,action:"+",value:.2*e.player.defData.HP}),e.remove()}))}})},adBtnEvent:function(e){var t=this,i=$(e,cc.Button);i.interactable=!1,V("tip").showLoading();var n=function(){i.interactable=!0,V("tip").close()};R("server").api("gameClaimAll",{}).then(function(e){console.log("server gameClaimAll return ... ",e),0==e.errcode?(n(),t.skills.forEach(function(e){if("gold"==e.name||"healPotion"==e.name)return"gold"==e.name&&M("fight").addRewardPropNum("gold",50*M("fight").level),void("healPotion"==e.name&&G("role").setHP({self:t.player,target:t.player,action:"+",value:.2*t.player.defData.HP}));e.isPassive?e.level<1?M("fight").getSkills(!0).filter(function(e){return e.isPassive}).length<M("skill").getMaxNum()&&t.setPassiveSkillLevel(e.name,1):t.setPassiveSkillLevel(e.name,e.level+1):e.level<1?M("fight").getSkills(!0).filter(function(e){return!e.isPassive}).length<M("skill").getMaxNum()&&t.setSkillLevel(e.name,1):t.setSkillLevel(e.name,e.level+1)}),t.remove()):(6==e.errcode?V("tip").error("Insufficient potato"):V("tip").error(e.errcode),n())})},setSkillLevel:function(e,t){G("skill").setLevel(this.player,e,t),t>9&&M("achive").incCount("useSkill",e)},setPassiveSkillLevel:function(e,t){G("skill").setPassiveLevel(this.player,e,t),t>9&&M("achive").incCount("usePassiveSkill",e)},update:function(){this.player&&this.player.data.HP<1&&this.remove()}}),cc._RF.pop()},{popup:"popup"}],fight:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"43a44n/SlZJzYmiCaYoL2JD","fight"),cc.Class({extends:e("ccBase"),properties:{},show:function(){var e=this;cc.game.setFrameRate(M("data").setting.frameRate);var t=M("data")&&M("data").fight?M("data").fight.selectLevel:1;console.log("\u4fdd\u5b58\u7528\u6237\u9009\u62e9\u7684\u5173\u5361\u7b49\u7ea7:",t),R("server").api("getPlayerInfo").then(function(i){if(console.log("\u83b7\u53d6\u6700\u65b0\u73a9\u5bb6\u4fe1\u606f\u8fd4\u56de:",i),0===i.errcode)M("data").init({account:i.data.wallet_address,player:i.data.player,hearts:i.data.hearts,maxHearts:i.data.maxHearts,nextRecoveryTime:i.data.nextRecoveryTime}),M("data").fight.selectLevel=t,console.log("\u6062\u590d\u7528\u6237\u9009\u62e9\u7684\u5173\u5361\u7b49\u7ea7:",t),console.log("\u73a9\u5bb6\u4fe1\u606f\u5df2\u66f4\u65b0\uff0c\u5f00\u59cb\u521d\u59cb\u5316\u6218\u6597"),M("fight").init(),M("fight").level=t,console.log("\u8bbe\u7f6e\u6218\u6597\u7b49\u7ea7:",M("fight").level),e.clearAllSkills(),e.initPlayer&&e.initPlayer(),e.requestGameStart();else{var n=i.message||"Failed to get player info";e.forceEnd(n)}}).catch(function(t){console.error("\u83b7\u53d6\u73a9\u5bb6\u4fe1\u606f\u51fa\u9519:",t),e.forceEnd("Network error, please try again later")});var i=this.find("screenTop");return app.screen.top>0?(i.active=!0,i.height=app.screen.top,$(i,cc.Widget).top=-app.screen.top):i.active=!1,H.show(this)},clearAllSkills:function(){console.log("\u6e05\u7a7a\u6240\u6709\u6280\u80fd\u56fe\u6807"),M("fight")&&M("fight").player&&(M("fight").player.skill={},M("fight").player.passiveSkill={}),this.fightSkillThumb&&this.fightSkillThumb.clearAllSkills(),G("skill").reset()},requestGameStart:function(){var e=this;console.log("\u53d1\u9001gameStart\u8bf7\u6c42\uff0c\u5173\u5361\u7b49\u7ea7:",M("fight").level),R("server").api("gameStart",{selectLevel:M("fight").level}).then(function(t){if(console.log("server gameStart return ... ",t),0==t.errcode)t.data&&(e.enemyCalPercent=t.data.enemyCalPercent,e.diffcultDelta=t.data.diffcultDelta,e.maxEnemyRangeNum=t.data.maxEnemyRangeNum,e.maxEnemyNearNum=t.data.maxEnemyNearNum,e.maxPropNum=t.data.maxPropNum,void 0!==t.data.hearts&&(M("data").hearts.current=t.data.hearts,E.emit(M("prop").eventType.SET_NUM.hearts)),console.log("From gameStart ... ",t.data));else{var i="Game start failed";7===t.errcode?i="Not enough hearts to start the game":8===t.errcode?i="Failed to update hearts":t.message&&(i=t.message),e.forceEnd(i)}})},onLoad:function(){var e=this;cc.director.getCollisionManager().enabled=!0,this.addBtnEvents(),G("role").init({parent1Node:this.find("roleParent1"),parent2Node:this.find("roleParent2"),effectParent2Node:this.find("effectParent2")}),G("skill").init({parent1Node:this.find("skillParent1"),parent2Node:this.find("skillParent2")}),G("effect").init({parent1Node:this.find("effectParent1"),parent2Node:this.find("effectParent2"),tipParentNode:this.find("tipParent")}),this.minute=0,this.enemyCalPercent=50,this.diffcultDelta=5,this.maxEnemyRangeNum=40,this.maxEnemyNearNum=300,this.maxPropNum=2e3,console.log("From onLoad ... ",this.maxPropNum),this.expProgressBar=$(this.find("expProgressBar"),cc.ProgressBar),this.expProgressBar.progress=0,this.levelLabel=this.find("levelLabel",cc.Label,this.expProgressBar.node),M("fight")&&M("fight").player&&void 0!==M("fight").player.level?this.levelLabel.string="Lv"+H.num(M("fight").player.level):this.levelLabel.string="Lv1",this.fightLevelLabel=this.find("fightLevelLabel",cc.Label),M("fight")&&void 0!==M("fight").level?this.fightLevelLabel.string=L("fightLevel",{level:H.numAbbr(M("fight").level)}):this.fightLevelLabel.string=L("fightLevel",{level:H.numAbbr(1)}),this.secondLabel=this.find("secondLabel",cc.Label),M("fight")&&void 0!==M("fight").second?this.secondLabel.string=H.secondFormat(M("fight").second,"{mm}:{ss}"):this.secondLabel.string=H.secondFormat(0,"{mm}:{ss}"),this.killCountLabel=this.find("killCount/label",cc.Label),M("fight")&&void 0!==M("fight").kill?this.killCountLabel.string=H.num(M("fight").kill):this.killCountLabel.string="0",this.goldCountLabel=this.find("goldCount/label",cc.Label),M("fight")&&M("fight").reward&&M("fight").reward.prop&&void 0!==M("fight").reward.prop.gold?this.goldCountLabel.string=H.num(M("fight").reward.prop.gold):this.goldCountLabel.string="0",H.isNative()||(this.keyboardInput=H.add$(this.node,"keyboardInput")),this.joystickInput=$(H.inst(app.getPrefab("joystick")),"joystickInput"),this.joystickInput.node.parent=this.find("joystickParent"),this.bg=this.find("bg","fightBg"),this.initPlayer=function(){if(M("data")&&M("data").roles){var t=M("data").roles.filter(function(e){return e.selected})[0];t&&(M("fight")&&M("fight").player&&(M("fight").player.asset=t.asset),e.player=G("role").create({asset:t.asset,data:M("role").createPlayerData(t.asset)}),H.isNative()?e.player.initInput(e.joystickInput):e.player.initInput([e.keyboardInput,e.joystickInput]),e.bg.init(e.player.node),G("dropProp").init({parent1Node:e.find("dropParent1"),parent2Node:e.find("dropParent2"),player:e.player}),G("skill").setLevel(e.player,M("role").getPlayerBaseData(e.player.asset).skillName,1),e.schedule(e.secondUpd,1))}},this.fightSkillThumb=this.find("fightSkillThumb","fightSkillThumb"),this.fightSkillThumb.init(this)},secondUpd:function(){var e=this;if(!M("fight").stop&&this.player)if(this.player.data.HP<=0)this.end();else{if(M("fight").second+=1,this.secondLabel.string=H.secondFormat(M("fight").second,"{mm}:{ss}"),this.minute=parseInt(M("fight").second/60),M("fight").second>=M("fight").maxSecond)return M("fight").second==M("fight").maxSecond&&(this.createEnemyBoss(2),R("server").api("gameSyncFight",{type:2,round:M("fight").round,selectLevel:M("fight").level,kill:M("fight").kill,isDouble:M("fight").reward.isDouble,gold:M("fight").reward.prop.gold,equipNum:M("fight").reward.prop.equipNum,chips:M("fight").reward.chips,playerLevel:M("fight").player.level,playerExp:M("fight").player.exp,skill:M("fight").player.skill,passiveSkill:M("fight").player.passiveSkill,nextExp:M("fight").player.nextExp}).then(function(e){console.log("server gameSyncFight 2 return ... ",e),e.errcode})),void(G("role").roles.filter(function(e){return"player"!=e.group}).length<1&&(R("server").api("gameSyncFight",{type:3,round:M("fight").round,selectLevel:M("fight").level,kill:M("fight").kill,isDouble:M("fight").reward.isDouble,gold:M("fight").reward.prop.gold,equipNum:M("fight").reward.prop.equipNum,chips:M("fight").reward.chips,playerLevel:M("fight").player.level,playerExp:M("fight").player.exp,skill:M("fight").player.skill,passiveSkill:M("fight").player.passiveSkill,nextExp:M("fight").player.nextExp}).then(function(t){console.log("server gameSyncFight 3 finish return ... ",t),0==t.errcode&&M("fight").level>=M("data").fight.level&&(M("data").fight.level+=1,M("fight").setSelectLevel("=",M("data").fight.level),M("achive").incCount("useRole",e.player.asset))}),this.end()));M("fight").second%60==0&&(M("fight").round=M("fight").second/60+1,M("fight").level<=1?this.enemyCalPercent+=this.diffcultDelta/2:this.enemyCalPercent+=this.diffcultDelta,this.createEnemyBoss(),R("server").api("gameSyncFight",{type:1,round:M("fight").round,selectLevel:M("fight").level,kill:M("fight").kill,isDouble:M("fight").reward.isDouble,gold:M("fight").reward.prop.gold,equipNum:M("fight").reward.prop.equipNum,chips:M("fight").reward.chips,playerLevel:M("fight").player.level,playerExp:M("fight").player.exp,skill:M("fight").player.skill,passiveSkill:M("fight").player.passiveSkill,nextExp:M("fight").player.nextExp}).then(function(e){console.log("server gameSyncFight 1 return ... ",e),e.errcode}),this.minute>=5&&this.createEnemyRanges(20)),H.calOdds(10)&&this.createEnemyGroups();var t=this.minute;this.minute>=5&&(t=2*this.minute),t<1&&(t=1),this.createEnemyNears(t)}},createEnemyBoss:function(e){void 0===e&&(e=1),G("role").create({asset:H.randArr(M("role").getNearAssets()),target:this.player,data:M("role").createEnemyData({level:M("fight").level,bossLevel:e,calPercent:this.enemyCalPercent})})},createEnemyGroups:function(){G("role").createGroup({asset:H.randArr(M("role").getGroupAssets()),target:this.player,data:M("role").createEnemyData({level:M("fight").level,calPercent:this.enemyCalPercent})})},createEnemyRanges:function(e){if(void 0===e&&(e=20),!(G("role").roles.filter(function(e){return"enemy"==e.group&&"range"==e.type}).length>=this.maxEnemyRangeNum))for(var t=M("role").getRangeAssets(),i=H.randArr(t),n=1;n<=e;n++){var r=G("role").create({asset:i,target:this.player,data:M("role").createEnemyData({level:M("fight").level,calPercent:this.enemyCalPercent})});r.bullet=H.add$(r.node,"bullet",!0),r.bullet.init(r),r.bullet.initData({asset:H.randArr(["enemyBullet1","enemyBullet2","enemyBullet3","enemyBullet4"])})}},createEnemyNears:function(e){if(void 0===e&&(e=1),!(G("role").roles.filter(function(e){return"enemy"==e.group&&"near"==e.type}).length>=this.maxEnemyNearNum)){e>50&&(e=50);for(var t=1;t<=e;t++){var i=M("role").getNearAssets();G("role").create({asset:H.randArr(i),target:this.player,data:M("role").createEnemyData({level:M("fight").level,calPercent:this.enemyCalPercent})})}}},stopBtnEvent:function(){M("fight").stop||this.end()},onHurt:function(e){e=i({},{self:null,target:null,skill:null},e),M("fight").stop||G("role").setHP({self:e.self,target:e.target,skill:e.skill,action:"-"})},onLose:function(e){var t=this;if("player"!=e.group){if(M("fight").kill+=1,e.data.bossLevel)if(e.data.bossLevel>1)M("fight").level>=M("data").fight.level?M("fight").addRewardPropNum("equipNum",5):M("fight").addRewardPropNum("equipNum",1);else{if(H.calOdds(20))return void(G("dropProp").create({name:"dropEquip",by:e.node}).onRemove=function(){G("audio").playEffect("equip"),M("fight").addRewardPropNum("equipNum",1)});G("dropProp").create({name:"dropBox",by:e.node}).onRemove=function(){G("audio").playEffect("upLevel"),M("fight").stop=!0,V("fightUpLevel").show(t,"box").onRemove=function(){M("fight").stop=!1}}}else if(!(G("dropProp").getPickupDropProps().length>=this.maxPropNum))if(H.calOdds(.05))G("dropProp").create({name:"dropFireJet",by:e.node}).onRemove=function(){var e=H.add$(t.player.node,"fireJet",!0);e.init(t.player,"fireJet"),e.initData({timeout:10})};else if(H.calOdds(.05))G("dropProp").create({name:"healPotion",by:e.node}).onRemove=function(){G("audio").playEffect("healPotion"),G("role").setHP({self:t.player,target:t.player,action:"+",value:.2*t.player.defData.HP})};else if(H.calOdds(.01))G("dropProp").create({name:"pickup",by:e.node}).onRemove=function(e){"pickup"==e&&(G("audio").playEffect("pickup"),G("dropProp").getPickupDropProps().forEach(function(e){e.moveToTarget()}))};else{var i=function(t){var i="role"==t?"dropRoleChip":"dropSkillChip";G("dropProp").create({name:i,by:e.node}).onRemove=function(){G("audio").playEffect("ding"),M("fight").addRewardChip(t)}};if(H.calOdds(.05))i("role");else if(H.calOdds(.05))i("skill");else if(H.calOdds(5))G("dropProp").create({name:"dropGold",by:e.node}).onRemove=function(){G("audio").playEffect("coin"),M("fight").addRewardPropNum("gold")};else{var n=function(i){G("dropProp").create({name:"dropExp"+i,by:e.node}).onRemove=function(){G("audio").playEffect("ding"),M("fight").player.exp+=i,M("fight").player.exp>=M("fight").player.nextExp&&t.upLevel()}};this.minute<=5?H.calOdds(5)?n(2):n(1):this.minute>5&&this.minute<=10?H.calOdds(30)?n(2):n(1):H.calOdds(30)?n(3):n(2)}}}else this.end()},end:function(){M("fight").stop=!0,V("fightStop").show(this)},forceEnd:function(e){M("fight").stop=!0,this.remove(),G("pool").clearAll(),e&&V("tip").config({color:"#FF0000",touchClose:!0}).text(e,3),V("index").show()},upLevel:function(){var e=this;G("audio").playEffect("upLevel"),this.expProgressBar.progress=M("fight").player.exp/M("fight").player.nextExp,M("fight").stop=!0,M("fight").upLevel(),V("fightUpLevel").show(this,"exp").onRemove=function(){e.levelLabel.string="Lv"+H.num(M("fight").player.level),M("fight").stop=!1}},onKeyDown:function(e){if(e.keyCode==cc.macro.KEY.escape){if(M("fight").stop)return;this.end()}},setFrameRate:function(e){cc.game.setFrameRate(e)},onEnable:function(){G("audio").playMusic(H.randArr(["fight_bgm1","fight_bgm2"])),E.on(G("role").eventType.HURT,this.onHurt,this),E.on(G("role").eventType.LOSE,this.onLose,this),E.on(M("setting").eventType.SET_FRAMERATE,this.setFrameRate,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDisable:function(){E.off(G("role").eventType.HURT,this.onHurt,this),E.off(G("role").eventType.LOSE,this.onLose,this),E.off(M("setting").eventType.SET_FRAMERATE,this.setFrameRate,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.player.camera.reset()},update:function(){M("fight").stop||this.expProgressBar&&this.killCountLabel&&this.goldCountLabel&&(this.expProgressBar.progress=M("fight").player.exp/M("fight").player.nextExp,this.killCountLabel.string=H.num(M("fight").kill),this.goldCountLabel.string=H.num(M("fight").reward.prop.gold))}}),cc._RF.pop()},{ccBase:"ccBase"}],find:[function(e,t){"use strict";cc._RF.push(t,"0bc17mmeUZAZ7ubph3ouNwy","find"),cc.Class({extends:cc.Component,properties:{goldSpriteFrame:cc.SpriteFrame,chipSpriteFrame:cc.SpriteFrame,equipNumSpriteFrame:cc.SpriteFrame,healPotionSpriteFrame:cc.SpriteFrame,randSpriteFrame:cc.SpriteFrame,videoSpriteFrame:cc.SpriteFrame,ATKSpriteFrame:cc.SpriteFrame,HPSpriteFrame:cc.SpriteFrame,SPDSpriteFrame:cc.SpriteFrame,propRadiusSpriteFrame:cc.SpriteFrame,stonySpriteFrames:[cc.SpriteFrame],drugSpriteFrames:[cc.SpriteFrame],dartSpriteFrames:[cc.SpriteFrame],fireBallSpriteFrames:[cc.SpriteFrame],holeSpriteFrames:[cc.SpriteFrame],swordSpriteFrames:[cc.SpriteFrame],magicBallSpriteFrames:[cc.SpriteFrame],lightningSpriteFrames:[cc.SpriteFrame],boomerangSpriteFrames:[cc.SpriteFrame],bombSpriteFrames:[cc.SpriteFrame],iceSpriteFrames:[cc.SpriteFrame],kniveSpriteFrames:[cc.SpriteFrame],gemSpriteFrames:[cc.SpriteFrame],laserSpriteFrames:[cc.SpriteFrame],tornadoSpriteFrames:[cc.SpriteFrame]}}),cc._RF.pop()},{}],fireBallItem:[function(e,t){"use strict";cc._RF.push(t,"e3c16vY8KVL7JTX9ocKiyEZ","fireBallItem"),cc.Class({extends:e("bulletItem"),properties:{},init:function(e){this._super(e),this.isCollide=!1,this.targetUids=[]},onEnter:function(e,t){var i=G("role").getRole(e.node,!0);i&&this.role&&i.group!=this.role.group&&(this.targetUids.filter(function(e){return e==i.uid})[0]||(this.targetUids.push(i.uid),i.hurtRepel&&i.hurtRepel(this.role.node),i.collide(t),this._super(e,t)))}}),cc._RF.pop()},{bulletItem:"bulletItem"}],fireJet:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"9fa4feoLHpFxpVg0w9w3gzP","fireJet"),cc.Class({extends:e("ccBase"),properties:{},initData:function(e){e=i({},{asset:"fireJet",timeout:10,hurtPercent:200},e),this.remove();var t=G("pool").get(app.getPrefab(e.asset));t.parent=G("skill").parent2Node,this.skill=H.add$(t,"skill"),this.skill.initBase({role:this.role,hurtPercent:e.hurtPercent,skillName:this.skillName}),this.skill.isTemp=!0,this.skill.isCollide=!1,this.skill.isStay=!0,this.timeout=e.timeout,this.radius=this.role.node.width/2,this.defHurtCd=.2,this.hurtCd=this.defHurtCd,this.dir=cc.v2(1,0),this.isInit=!0},init:function(e,t){this.role=e,this.skillName=t},remove:function(){this.skill&&(this.skill.node.removeComponent("skill"),G("pool").put(this.skill.node),this.skill=null)},update:function(e){if(this.isInit&&!M("fight").stop){this.hurtCd>0?(this.hurtCd-=e,this.skill.isCollide=!1):(this.hurtCd=this.defHurtCd,this.skill.isCollide=!0),this.role.dir&&(this.role.dir.equals(cc.Vec2.ZERO)||(this.dir=this.role.dir)),this.skill.node.angle=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI;var t=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),i=Math.PI/180*this.skill.node.angle,n=cc.v2(0,0);n.x=t.x+this.radius*Math.cos(i),n.y=t.y+this.radius*Math.sin(i),this.skill.node.setWorldPosition(n),!1!==this.timeout&&(this.timeout-=e,this.timeout>0||(this.remove(),this.node.removeComponent(this)))}}}),cc._RF.pop()},{ccBase:"ccBase"}],gainTip:[function(e,t){"use strict";cc._RF.push(t,"85f36yKasVHrZRZ6jySEiav","gainTip"),cc.Class({extends:e("popup"),properties:{},show:function(e){return this.reward=e,this.rewardParentNode=this.find("rewardParent"),this.initItems(),H.show(this)},initItems:function(){var e=this;this.items&&this.items.forEach(function(e){G("pool").put(e.node)}),this.items=[];var t=function(){var t=G("pool").get(app.getPrefab("rewardItem"),"adBoxInforewardItem");return t.parent=e.rewardParentNode,$(t,"rewardItem")},i=this.reward;if(i.prop)for(var n in i.prop)if(i.prop[n]>0){var r=t();r.updProp(n,i.prop[n]),this.items.push(r)}H.isArr(i.chips)&&i.chips.forEach(function(i){if(i.chip>0){var n=t();n.updChip(i),e.items.push(n)}})},onEnable:function(){this._super(),G("audio").playEffect("reward")}}),cc._RF.pop()},{popup:"popup"}],gameCenterModel:[function(e,t){"use strict";cc._RF.push(t,"a3723EgWxND55Jgbkj7XgxG","gameCenterModel"),t.exports={sendLevel:function(){if(M("data").setting.gameCenter&&!(M("data").player.isGuest||app.loader.version<3)){var e=H.num(M("data").fight.level-1);e<1&&(e=1),R("apple").gameCenter.send({listId:"MBRO_level",value:e.toString()})}}},cc._RF.pop()},{}],gameCneter:[function(e,t){"use strict";cc._RF.push(t,"c939ernveJIk5wrrs8RP3R8","gameCneter"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){!H.isNative()||H.isIos()?(this.node.active=!0,app.loader.version<3||M("data").player.isGuest?this.node.active=!1:(this.addBtnEvents(),this.btn=this.find("btn",cc.Button),this.setBtn=this.find("setBtn",cc.Button),this.checkmarkNode=this.find("checkmark",this.setBtn.node),this.checkmarkNode.active=!1,this.updBtns())):this.node.active=!1},updBtn:function(){this.btn.interactable=R("apple").gameCenter.isAuthenticated()},btnEvent:function(){R("apple").gameCenter.isAuthenticated()?R("apple").gameCenter.showList({listId:"MBRO_level",type:"all"}):V("confirm").show(L("gameCenterSignTip"),function(e){e&&R("native").openSetting("GAMECENTER")})},updSetBtn:function(){R("apple").gameCenter.isAuthenticated()?(this.setBtn.interactable=!0,this.checkmarkNode.active=M("data").setting.gameCenter):(this.setBtn.interactable=!1,this.checkmarkNode.active=!1)},setBtnEvent:function(){this.setBtn.interactable&&(M("data").setting.gameCenter=!M("data").setting.gameCenter,this.updSetBtn())},updBtns:function(){this.updBtn(),this.updSetBtn()},onEnable:function(){E.on(R("apple").gameCenter.eventType.SIGN,this.updBtns,this),E.on(R("apple").gameCenter.eventType.ERROR,this.updBtns,this)},onDisable:function(){E.off(R("apple").gameCenter.eventType.SIGN,this.updBtns,this),E.off(R("apple").gameCenter.eventType.ERROR,this.updBtns,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],gameModel:[function(e,t){"use strict";cc._RF.push(t,"39ddaFQRhBCG6USPKfvMytK","gameModel"),t.exports={eventType:{SET_REWARD:"gameModel.setReward"},getSidReward:function(e){void 0===e&&(e=!1);var t={prop:{}};return t.prop.gold=1e4*M("data").fight.level,t.prop.equipNum=20,t.chips=[{type:"role",asset:"?",chip:20*M("data").fight.level},{type:"skill",asset:"?",chip:20*M("data").fight.level}],e?this.getRealReward(t):t},getBoxReward:function(e){void 0===e&&(e=!1);var t=M("data").getDefData(),i={};return i.cd=t.timeCount.adBox,i.prop={},i.prop.gold=2e3*M("data").fight.level,i.prop.equipNum=5,i.chips=[{type:"role",asset:"?",chip:5*M("data").fight.level},{type:"skill",asset:"?",chip:5*M("data").fight.level}],e?this.getRealReward(i):i},getRealReward:function(e){return e.chips.forEach(function(e){if("?"==e.asset){if("role"==e.type){var t=M("role").getPlayerBaseDatas(),i=H.randArr(t);e.asset=i.asset}if("skill"==e.type){var n=M("skill").getBaseDatas(),r=H.randArr(n);e.asset=r.name}}}),e},setReward:function(e){if(e.prop)for(var t in e.prop)M("prop").setNum(t,"+",e.prop[t]);e.chips&&e.chips.forEach(function(e){"role"==e.type&&M("role").setChip(e.asset,"+",e.chip),"skill"==e.type&&M("skill").setChip(e.asset,"+",e.chip)}),E.emit(this.eventType.SET_REWARD)}},cc._RF.pop()},{}],gemItem:[function(e,t){"use strict";cc._RF.push(t,"4dd89fiDs5GHr57kZqfIfOF","gemItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t,i){if(this.role){this.isBullet=!0,this.speed=t,this.timeout=i,this.byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.node.setWorldPosition(this.byWorldPos);var n=this.role.getTarget();if(n){var r=n.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.dir=r.sub(this.byWorldPos).normalize()}else this.role.dir.equals(cc.Vec2.ZERO)?this.dir=cc.v2(1,0):this.dir=this.role.dir.clone();if(e>1){var o=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI;e%2==0?o+=10*e:o-=10*(e-1);var s=o*Math.PI/180;this.dir.x=Math.cos(s),this.dir.y=Math.sin(s)}this.node.angle=H.getDirAngle(this.dir),this.node.opacity=255,this.changeDirCd=0,this.isInit=!0}},remove:function(){var e=this;this.collider.enabled=!1,cc.tween(this.node).to(.5,{opacity:0}).call(function(){G("pool").put(e.node)}).start()},checkView:function(){return app.screen.checkView(this.role.node,this.node)},changeDir:function(e){if(this.changeDirCd>0)return H.getWorldPos(this.role.bodyNode).sub(H.getWorldPos(this.node)).normalize();this.changeDirCd=.2;var t=cc.v2(0,0),i=this.checkView();return i.isMaxX?t.x=1:i.isMaxY&&(t.y=1),e.sub(t.mul(2*cc.Vec2.dot(e,t)))},update:function(e){if(this.role&&!M("fight").stop&&this.isInit)if(this.timeout-=e,this.timeout<=0)this.collider.enabled&&this.remove();else if(this.dir){this.changeDirCd-=e;var t=this.checkView();(t.isMaxX||t.isMaxY)&&(this.dir=this.changeDir(this.dir));var i=this.speed*e;this.node.x+=this.dir.x*i,this.node.y+=this.dir.y*i,this.node.angle=H.getDirAngle(this.dir)}}}),cc._RF.pop()},{skill:"skill"}],gem:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"9ab6ejvYetIcaEWUCejF4gL","gem"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,num:1,cd:3,timeout:5,speed:1200,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.speed=e.speed,this.timeout=e.timeout,this.defCd=e.cd,this.cd=this.defCd},createItems:function(){if(G("skill").checkRole(this.role))for(var e=1;e<=this.num;e++){var t=G("pool").get(this.prefab);t.scaleX=this.scale,t.scaleY=this.scale,t.parent=G("skill").parent2Node;var i=$(t,"skill");i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),i.init(e,this.speed,this.timeout)}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],helper:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function n(){n=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),a=new L(n||[]);return r(s,"_invoke",{value:w(e,i,a)}),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(R){return{type:"throw",arg:R}}}e.wrap=h;var d={};function p(){}function f(){}function v(){}var g={};l(g,s,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&i.call(y,s)&&(g=y);var b=v.prototype=p.prototype=Object.create(g);function k(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){function n(r,o,s,a){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,s,a)},function(e){n("throw",e,s,a)}):t.resolve(h).then(function(e){l.value=e,s(l)},function(e){return n("throw",e,s,a)})}a(c.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,r){n(e,i,t,r)})}return o=o?o.then(r,r):r()}})}function w(e,t,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return{value:void 0,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=S(s,i);if(a){if(a===d)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var c=u(e,t,i);if("normal"===c.type){if(n=i.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n="completed",i.method="throw",i.arg=c.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),l(E.prototype,a,function(){return this}),e.AsyncIterator=E,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new E(h(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then(function(e){return e.done?e.value:s.next()})},k(b),l(b,c,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return s.type="throw",s.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),_(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;_(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function r(e,t,i,n,r,o,s){try{var a=e[o](s),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,r)}cc._RF.push(t,"7d8e15Pn1tCeJ6MEtYyQSQF","helper");var o=e("BigNumber"),s=e("qs"),a=e("circular-json"),c=e("ccHelper"),l={request:function(e,t,i,n){var r=this;return void 0===n&&(n=5),new Promise(function(o,a){var c=new XMLHttpRequest;if(c.onload=function(){var e=c.responseText;if("400"==c.status)return r.isJson(e)?void a(JSON.parse(e)):void a(e);"404"!=c.status?r.isJson(e)?o(JSON.parse(e)):o(e):a("404 (Not Found)")},c.ontimeout=function(){a("request timeout")},c.onerror=function(){a("request network error")},c.timeout=1e3*n,t&&"buffer"===i){c.open("POST",e),c.setRequestHeader("Content-Type","multipart/form-data");var l=function(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0,r=e.length;n<r;n++)i[n]=e.charCodeAt(n);return t}(s.stringify(t));c.send(l)}else t&&"GET"===i?(e=e+"?"+s.stringify(t),c.open("GET",e),c.send()):t?(c.open("POST",e),c.send(s.stringify(t))):(c.open("GET",e),c.send())})},isJson:function(e){if("string"==typeof e){var t=Number(e);if("number"==typeof t&&!isNaN(t))return!1;try{return JSON.parse(e),!0}catch(i){return!1}}return!1},uid:function(e){void 0===e&&(e=21);for(var t="",i=e;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},sysInfo:function(){var e={platform:{}};for(var t in cc.sys)"platform"!=t&&cc.sys[t]==cc.sys.platform&&(e.platform[t]=cc.sys[t]);return e.os=cc.sys.os,e.language=cc.sys.language,e.languageCode=cc.sys.languageCode,e},isAndroid:function(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative},isIos:function(){return cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative},isNative:function(){return cc.sys.isNative},isBrowser:function(){return cc.sys.isBrowser},isHans:function(){return"zh"===cc.sys.language&&(-1!=cc.sys.languageCode.indexOf("hans")||"zh"==cc.sys.languageCode||"zh-cn"==cc.sys.languageCode||"zh_cn"==cc.sys.languageCode)},isEmpty:function(e){return!e||0===Object.keys(e).length},isArr:function(e){return"[object Array]"===Object.prototype.toString.call(e)},mini:function(){return"undefined"!=typeof wx?wx:null},exitGame:function(){var e=this.mini();e?e.exitMiniProgram():cc.game.end()},num:function(e,t){return void 0===t&&(t=0),e=Number(e),isNaN(e)?0:0==t?Math.round(e):1==t?Math.round(10*e)/10:2==t?Math.round(100*e)/100:e},numAbbr:function(e,t){if(void 0===t&&(t=2),(e=this.num(e))<1e5)return e;var i=(e=new o(e).toFixed()).length,n=["K","M","G","T"],r=Math.ceil(i/3)-2;if(r>=4){var s="abcdefghijklmnopqrstuvwxyz".split("");s.forEach(function(e){s.forEach(function(t){n.push(e+t)})})}var a=n[r],c=i-3*(Math.ceil(i/3)-1),l=e.substring(c,c+t),h=e.substring(0,c);return"00"!=l&&(h+="."+l),h+a},clone:function(e){return a.parse(a.stringify(e))},randArr:function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=!1),!e)return t>1||i?[]:void 0;if(e.length<1)return i?[]:"";if(t<=1){var n=e[Math.floor(Math.random()*e.length)];return i?[n]:n}var r=[];for(var o in e)r.push(e[o]);for(var s=[],a=0;a<t&&r.length>0;a++){var c=Math.floor(Math.random()*r.length);s[a]=r[c],r.splice(c,1)}return s},randNum:function(e,t,i){return void 0===i&&(i=!1),!1===i?Math.round(Math.random()*(t-e))+e:Math.random()*(t-e)+e},calOdds:function(e){return e?(e*=10)>=1e3||Math.floor(1e3*Math.random())<e:0},time:function(e){return void 0===e&&(e=!1),e?(new Date).getTime():parseInt((new Date).getTime().toString().substr(0,10))},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},date:function(e,t){void 0===t&&(t="Y-m-d H:i:s"),e=e.toString()+"000";var i=new Date;i.setTime(parseInt(e));var n=i.getMonth()+1,r=i.getDate(),o=i.getHours(),s=i.getMinutes(),a=i.getSeconds(),c={Y:i.getFullYear(),m:1==n.toString().length?"0"+n:n,d:1==r.toString().length?"0"+r:r,H:1==o.toString().length?"0"+o:o,i:1==s.toString().length?"0"+s:s,s:1==a.toString().length?"0"+a:a};for(var l in c)t=t.replace(new RegExp(l),c[l]);return t},secondFormat:function(e,t){void 0===t&&(t="{h}:{m}:{s}");var i=parseInt(e/60/60%24),n=i<10?"0"+i:i,r=parseInt(e/60%60),o=r<10?"0"+r:r,s=parseInt(e%60),a=s<10?"0"+s:s;return t.replace(/{h}/g,i).replace(/{hh}/g,n).replace(/{m}/g,r).replace(/{mm}/g,o).replace(/{s}/g,s).replace(/{ss}/g,a)},pageArr:function(e,t){for(var i=e.length,n=[],r=Math.ceil(i/t*1),o=0;o<r;){var s=i-o*t>=t?t:i-o*t,a=e.slice(o*t,o*t+s);n.push(a),o++}return n},toString:function(e){return e?("object"==typeof e&&(e=String(e)),e.replace&&(e=(e=e.replace(/\\n/g,"\n")).replace(/<br\/> /g,"<br/>")),e):""},dedupe:function(e,t){var i=[e[0]];if(t)for(var n=1;n<e.length;n++){for(var r=!1,o=0;o<i.length;o++)if(t&&e[n][t]===i[o][t]){r=!0;break}r||i.push(e[n])}else for(var s=1;s<e.length;s++){for(var a=!1,c=0;c<i.length;c++)if(e[s]===i[c]){a=!0;break}a||i.push(e[s])}return i},arrExec:function(e,t,i){void 0===i&&(i=.2);for(var n=i,r=function(t){t<=0?"function"==typeof e[t]&&e[t]():t>0&&(t>1&&(n+=i),setTimeout(function(){"function"==typeof e[t]&&e[t]()},1e3*n))},o=0;o<e.length;o++)r(o);setTimeout(function(){t&&t()},1e3*n)},getNextData:function(e,t){if(t<=0)return e[0];var i;if(t<=e.length)i=e[t-1];else{var n=t%e.length;0==n&&(n=e.length),i=e[n-1]}return i||(i=e[0]),i},getVersion:function(e){return"v"+e.toString().split("").join(".")},delay:function(e){return(t=n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){return setTimeout(t,1e3*e)}));case 1:case"end":return t.stop()}},t)}),function(){var e=this,i=arguments;return new Promise(function(n,o){var s=t.apply(e,i);function a(e){r(s,n,o,a,c,"next",e)}function c(e){r(s,n,o,a,c,"throw",e)}a(void 0)})})();var t}};"undefined"==typeof jsb?l.log=console.log:l.log=function(){for(var e="",t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach(function(t){e+=JSON.stringify(t),e+=" "}),e=e.substr(0,e.length-1),console.log(e)},t.exports=i({},l,c),cc._RF.pop()},{BigNumber:"BigNumber",ccHelper:"ccHelper","circular-json":"circular-json",qs:"qs"}],hole:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"236ca48MW5MorcpDbNPNINA","hole"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,color:"#FFFFFF",hurtCd:.5,hurtPercent:100},e),this.remove();var t=G("pool").get(app.getPrefab(e.asset));t.parent=G("skill").parent1Node,t.zIndex=cc.macro.MAX_ZINDEX,this.skill=H.add$(t,"skill"),this.skill.node.scaleX=e.scale,this.skill.node.scaleY=e.scale,this.find("anim",this.skill.node).color=cc.color(e.color),this.skill.initBase({role:this.role,hurtPercent:e.hurtPercent,skillName:this.skillName}),this.skill.isCollide=!1,this.skill.isStay=!0,this.skill.defHurtCd=e.hurtCd,this.skill.hurtCd=this.skill.defHurtCd,this.skill.update=this.update.bind(this)},remove:function(){this.skill&&(this.skill.node.removeComponent("skill"),G("pool").put(this.skill.node),this.skill=null)},update:function(e){if(this.role&&this.skill&&!M("fight").stop){if(this.role.data.HP<=0)return G("pool").put(this.skill.node),void(this.skill=null);var t=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.skill.node.setWorldPosition(t),this.skill.hurtCd>0?(this.skill.hurtCd-=e,this.skill.isCollide=!1):(this.skill.hurtCd=this.skill.defHurtCd,this.skill.isCollide=!0)}}}),cc._RF.pop()},{ccBase:"ccBase"}],i18n:[function(e,t){"use strict";cc._RF.push(t,"2a09c+/44hAeabNN/8TTjbF","i18n");var i=e("polyglot.min"),n=null,r=function(e){e&&(n?n.replace(e):n=new i({phrases:e,allowMissing:!0}))};t.exports={language:cc.sys.language,isInit:!1,init:function(t){var i=this;t||(t=cc.sys.language),"zh"===t&&(t=this.isHans()?"zh":"zh-hant");var n=function(t){var n=e(t);if(!n)throw"i18n Error: "+t;r(n),i.language=t,i.isInit=!0};try{n(t)}catch(o){console.log(o);try{n("en")}catch(o){console.log(o)}}},t:function(e,t){if(n)return n.t(e,t)},upd:function(){for(var e=cc.director.getScene().children,t=[],i=0;i<e.length;++i){var n=e[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n);for(var r=0;r<t.length;++r)t[r].updateLabel()}for(var o=[],s=0;s<e.length;++s){var a=e[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,a)}for(var c=0;c<o.length;++c)o[c].updateSprite(this.language)},isHans:function(){return"zh"===cc.sys.language&&(-1!=cc.sys.languageCode.indexOf("hans")||"zh"==cc.sys.languageCode||"zh-cn"==cc.sys.languageCode||"zh_cn"==cc.sys.languageCode)}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],iceItem:[function(e,t){"use strict";cc._RF.push(t,"74d493jw8xAJq1fRnQd55bu","iceItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t){if(void 0===t&&(t=800),this.isBullet=!0,this.target=e,this.target){this.speed=t;var i=this.target.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.node.setWorldPosition(this.byWorldPos),this.dir=i.sub(this.byWorldPos).normalize(),G("effect").updDirAngle(this.node,this.dir),this.isInit=!0}else this.remove()},initData:function(e){this.freezeCd=e.freezeCd,this.freezeScale=e.freezeScale,this.pierce=e.pierce},remove:function(){G("pool").put(this.node)},onEnter:function(e){var t=G("role").getRole(e.node,!0);if(t&&this.role&&t.group!=this.role.group){if(!t.bossLevel){t.state.sleep.cd=this.freezeCd;var i=H.randArr(["freeze","freeze2"]);t.effect[i]=G("effect").create({by:t.node,asset:i,timeout:this.freezeCd,once:!0,parentNode:t.node}),t.effect[i].node.scaleX=this.freezeScale,t.effect[i].node.scaleY=this.freezeScale}0!=this.pierce&&(this.pierce-=1,this.pierce<=0&&this.remove())}},update:function(e){if(this.isInit)if(app.screen.isOutView(this.role.node,this.node))this.remove();else if(this.dir){var t=this.speed*e;this.node.x+=this.dir.x*t,this.node.y+=this.dir.y*t}}}),cc._RF.pop()},{skill:"skill"}],ice:[function(e,t){"use strict";var i;function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"1e5e8lg1h5BEpoMcQejgjAH","ice"),cc.Class(((i={extends:e("ccBase")}).extends=cc.Component,i.properties={},i.init=function(e,t){this.role=e,this.skillName=t},i.initData=function(e){e=n({},{asset:"",scale:1,num:1,speed:800,cd:3,pierce:1,freezeCd:1,freezeScale:1,hurtPercent:100},e),this.param=e,this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.speed=e.speed,this.defCd=e.cd,this.cd=this.defCd},i.createItems=function(){var e=this;if(G("skill").checkRole(this.role)){var t=G("role").getRandTargets(this.role,this.num);t.length<1||t.forEach(function(t){var i=G("pool").get(e.prefab);i.scaleX=e.scale,i.scaleY=e.scale,i.parent=G("skill").parent2Node;var n=$(i,"skill");n.initBase({role:e.role,hurtPercent:e.hurtPercent,skillName:e.skillName}),n.init(t,e.speed),n.initData(e.param)})}},i.update=function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))},i)),cc._RF.pop()},{ccBase:"ccBase"}],indexAchive:[function(e,t){"use strict";cc._RF.push(t,"cbec8d39cFMaLF7CRAgL7vB","indexAchive"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){this.itemNode=this.find("item"),this.itemNode.active=!1,this.initItems()},createItem:function(){var e={};return e.node=G("pool").get(this.itemNode,"indexAchiveItem"),e.node.parent=this.itemNode.parent,e.roleSprite=this.find("layout/roleIcon",cc.Sprite,e.node),e.iconSprite=this.find("layout/icon",cc.Sprite,e.node),e.levelLabel=this.find("layout/levelLabel",cc.Label,e.node),e.desLabel=this.find("desLabel",cc.Label,e.node),e.totalLabel=this.find("totalLabel",cc.Label,e.node),e.progressBar=this.find("progressBar",cc.ProgressBar,e.node),e.progressBar.progress=0,e.progressBar.label=this.find("label",cc.Label,e.progressBar.node),e.progressBar.label.string="0 / 0",e.reward={},e.reward.node=this.find("reward",e.node),e.reward.label=this.find("label",cc.Label,e.reward.node),e.roleSprite.node.active=!1,e.iconSprite.node.active=!1,e.reward.node.active=!1,e},initItems:function(){var e=this;this.items&&this.items.forEach(function(e){G("pool").put(e.node,!0)}),this.items=[];var t=function(t){var i,n;if("useRole"!=t&&"useSkill"!=t&&"usePassiveSkill"!=t)for(var r in M("achive").defData[t]){var o=e.createItem();o.type=t,o.assetOrKey=r,o.desLabel.string=L("achiveInfo."+t+"."+r),o.iconSprite.node.active=!0,o.iconSprite.spriteFrame=app.find[r+"SpriteFrame"],e.items.push(o)}else"useRole"==t&&(i=M("role").getPlayerBaseDatas(),n="asset"),"useSkill"==t&&(i=M("skill").getBaseDatas(),n="name"),"usePassiveSkill"==t&&(i=M("skill").getPassiveBaseDatas(),n="name"),i.forEach(function(i){var r=e.createItem();r.type=t,r.assetOrKey=i[n],r.desLabel.string=L("achiveInfo."+t),"useRole"==t&&(r.roleSprite.node.active=!0,G("role").loadSpriteFrame(r.assetOrKey,function(e){r.roleSprite.spriteFrame=e})),"useSkill"==t&&(r.iconSprite.node.active=!0,r.iconSprite.spriteFrame=G("skill").getSpriteFrame(r.assetOrKey,1)),"usePassiveSkill"==t&&(r.iconSprite.node.active=!0,r.iconSprite.spriteFrame=app.find[r.assetOrKey+"SpriteFrame"]),e.items.push(r)})};for(var i in M("achive").defData)t(i);this.items.forEach(function(t){t.reward.node.on("touchend",function(e){E.stop(e),M("achive").isDone(t.type,t.assetOrKey)?R("server").api("claimAchiveReward",{type:t.type,assetOrKey:t.assetOrKey}).then(function(e){if(0==e.errcode){var i=M("achive").getReward(t.type,t.assetOrKey);M("game").setReward(i),M("achive").incLevel(t.type,t.assetOrKey),V("gainTip").show(i)}}):V("tip").error(L("error_action"))}),e.updItem(t.type,t.assetOrKey)})},updItem:function(e,t){if(this.items){var i=this.items.filter(function(i){return i.type==e&&i.assetOrKey==t})[0];if(i){i.totalLabel.string=L("total")+": "+H.numAbbr(M("achive").getTotal(i.type,i.assetOrKey));var n=M("achive").getCount(e,t),r=M("achive").getNextCount(e,t);i.progressBar.progress=n/r,i.progressBar.label.string=H.numAbbr(n)+" / "+H.numAbbr(r);var o=M("achive").getLevel(e,t);if(i.levelLabel.string="Lv"+H.numAbbr(o),i.levelLabel.node.color=o>0?cc.color("#F6DB96"):cc.color("#888888"),i.reward.node.active=M("achive").isDone(e,t),i.reward.node.active){var s=M("achive").getReward(i.type,i.assetOrKey);i.reward.label.string=H.numAbbr(s.prop.gold)}}}},onInc:function(e,t){this.updItem(e,t)},onEnable:function(){E.on(M("achive").eventType.INC_COUNT,this.onInc,this),E.on(M("achive").eventType.INC_LEVEL,this.onInc,this)},onDisable:function(){E.off(M("achive").eventType.INC_COUNT,this.onInc,this),E.off(M("achive").eventType.INC_LEVEL,this.onInc,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],indexEquipSetting:[function(e,t){"use strict";cc._RF.push(t,"4efbces6xJFAa/N62wYjwJe","indexEquipSetting");var i=cc.Enum({OPEN:1,CLOSE:2});cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){this.selectNode=this.find("select"),this.selectNode.active=!1,this.arrowNode=this.find("arrow"),this.arrowNode.scaleY=-1,this.parentNode=this.find("parent"),this.rankItemNode=this.find("rankItem"),this.rankItemNode.active=!1,this.starItemNode=this.find("starItem"),this.starItemNode.active=!1,this.allRankItem={},this.allRankItem.node=this.find("allIRankItem"),this.allRankItem.node.on("touchend",function(e){E.stop(e),M("setting").setOpenEquip("rank","*")}),this.allRankItem.checkmarkNode=this.find("checkmark",this.allRankItem.node),this.allRankItem.checkmarkNode.active=!1,this.allStarItem={},this.allStarItem.node=this.find("allStarItem"),this.allStarItem.node.on("touchend",function(e){E.stop(e),M("setting").setOpenEquip("star","*")}),this.allStarItem.checkmarkNode=this.find("checkmark",this.allStarItem.node),this.allRankItem.checkmarkNode.active=!1,this.rankSelectedItemNode=this.find("rankSelectedItem"),this.rankSelectedItemNode.active=!1,this.starSelectedItemNode=this.find("starSelectedItem"),this.starSelectedItemNode.active=!1,this.updSelectedItem(),this.selectedNode=this.find("selected"),this.selectedNode.active=!0,this.state=i.CLOSE,this.node.on("touchend",this.onTouchEnd,this),this.selectNode.on("touchend",function(e){E.stop(e)}),this.initItems()},onTouchEnd:function(){var e=this;this.selectNode.stopAllActions(),this.state==i.CLOSE?(this.selectedNode.active=!1,this.state=i.OPEN,this.selectNode.height=0,this.selectNode.active=!0,cc.tween(this.selectNode).to(.2,{height:this.parentNode.height}).start()):(this.selectedNode.active=!0,this.state=i.CLOSE,cc.tween(this.selectNode).to(.1,{height:0}).call(function(){e.selectNode.active=!1}).start()),this.arrowNode.scaleY=this.state==i.CLOSE?-1:1},initItems:function(){var e=this;this.rankItems&&this.rankItems.forEach(function(e){G("pool").put(e.node,!0)}),this.rankItems=[],this.starItems&&this.starItems.forEach(function(e){G("pool").put(e.node,!0)}),this.starItems=[];for(var t=function(t){var i={};i.rank=t,i.node=G("pool").get(e.rankItemNode,"indexEquipSetting_rankItemNode"),i.node.parent=e.rankItemNode.parent,i.iconNode=e.find("icon",i.node),i.iconNode.color=cc.color(M("equip").getColor({rank:t})),i.checkmarkNode=e.find("checkmark",i.node),i.checkmarkNode.active=!1,i.node.on("touchend",function(e){E.stop(e),M("setting").setOpenEquip("rank",t)}),e.rankItems.push(i);var n={};n.star=t,n.node=G("pool").get(e.starItemNode,"indexEquipSetting_starItemNode"),n.node.parent=e.starItemNode.parent,n.starLabel=e.find("starLabel",cc.Label,n.node),n.starLabel.string=t,n.checkmarkNode=e.find("checkmark",n.node),n.checkmarkNode.active=!1,n.node.on("touchend",function(e){E.stop(e),M("setting").setOpenEquip("star",t)}),e.starItems.push(n)},i=1;i<=5;i++)t(i);this.updRankItems(),this.updStarItems()},updRankItems:function(){this.rankItems&&(this.allRankItem.checkmarkNode.active="*"==M("data").setting.openEquip.rank,this.rankItems.forEach(function(e){e.checkmarkNode.active=M("data").setting.openEquip.rank==e.rank}),this.updSelectedItem())},updStarItems:function(){this.starItems&&(this.allStarItem.checkmarkNode.active="*"==M("data").setting.openEquip.star,this.starItems.forEach(function(e){e.checkmarkNode.active=M("data").setting.openEquip.star==e.star}),this.updSelectedItem())},updSelectedItem:function(){this.rankSelectedItemNode.active="*"!=M("data").setting.openEquip.rank,this.rankSelectedItemNode.active&&(this.find("icon",this.rankSelectedItemNode).color=cc.color(M("equip").getColor({rank:M("data").setting.openEquip.rank}))),this.starSelectedItemNode.active="*"!=M("data").setting.openEquip.star,this.starSelectedItemNode.active&&(this.find("starLabel",cc.Label,this.starSelectedItemNode).string=M("data").setting.openEquip.star)},onEnable:function(){E.on(M("setting").eventType.SET_OPEN_EQUIP.rank,this.updRankItems,this),E.on(M("setting").eventType.SET_OPEN_EQUIP.star,this.updStarItems,this)},onDisable:function(){E.off(M("setting").eventType.SET_OPEN_EQUIP.rank,this.updRankItems,this),E.off(M("setting").eventType.SET_OPEN_EQUIP.star,this.updStarItems,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],indexEquip:[function(e,t){"use strict";cc._RF.push(t,"5e936CO0f5IIKJJSqPUgsaN","indexEquip"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){this.selectRoleData=M("data").roles.filter(function(e){return e.selected})[0],this.HPLabel=this.find("HP/label",cc.Label),this.ATKLabel=this.find("ATK/label",cc.Label),this.attrItemNode=this.find("attrParent/attrItem"),this.attrItemNode.active=!1,this.skillAttrItemNode=this.find("attrParent/skillAttrItem"),this.skillAttrItemNode.active=!1,this.equipBtn=this.find("equipBtn",cc.Button),this.equipNumLabel=this.find("label",cc.Label,this.equipBtn.node),this.updEquipBtn(),this.initEquipItems(),this.initRoleDataItems(),this.addBtnEvents()},initEquipItems:function(){var e=this;this.equipItems&&this.equipItems.forEach(function(e){G("pool").put(e.node,!0)}),this.equipItems=[],this.find("equipParent").children.forEach(function(t,i){var n=i+1;t.children.forEach(function(t){var i=t.name,r=M("equip").getData(n,i);if(r){var o=G("pool").get(app.getPrefab("equip"));o.parent=t;var s=$(o,"equip");s.upd(r),s.node.on("touchend",function(){V("equipInfo").show(r)}),e.equipItems.push(s)}})})},initRoleDataItems:function(){var e=this,t=M("role").createPlayerData(this.selectRoleData.asset);this.HPLabel.string=H.numAbbr(t.HP),this.ATKLabel.string=H.numAbbr(t.ATK),this.attrItems&&this.attrItems.forEach(function(e){G("pool").put(e.node)}),this.attrItems=[],M("role").getAttrs("base").forEach(function(i){if(t[i.key]>0){var n={};n.node=G("pool").get(e.attrItemNode,"indexEquipAttrItemNode"),n.node.parent=e.attrItemNode.parent,n.titleLabel=e.find("titleLabel",cc.Label,n.node),n.label=e.find("label",cc.Label,n.node),n.titleLabel.string=i.name,n.label.string="+"+t[i.key]+"%",e.attrItems.push(n)}}),M("role").getAttrs("skill").forEach(function(i){if(t[i.key]>0){var n={};n.node=G("pool").get(e.skillAttrItemNode,"indexEquipSkillAttrItemNode"),n.node.parent=e.skillAttrItemNode.parent,n.label=e.find("label",cc.Label,n.node),n.iconSprite=e.find("icon",cc.Sprite,n.node),n.iconSprite.spriteFrame=G("skill").getSpriteFrame(i.asset),n.label.string="+"+t[i.key]+"%",e.attrItems.push(n)}}),this.attrItems.length>0?this.attrItemNode.parent.active=!0:this.attrItemNode.parent.active=!1},updEquipBtn:function(){this.equipBtn.interactable=M("data").prop.equipNum>0,this.equipNumLabel.string="x"+H.num(M("data").prop.equipNum)},equipBtnEvent:function(){var e=M("equip").preAdd();if(H.isEmpty(e.error)){var t={};R("server").api("openEquipBox",{}).then(function(e){0==e.errcode&&(t=e.data,V("addEquip").show(t))}),console.log("api return equipData ... ",t)}else V("tip").error(L(e.error.equipNum))},onAdd:function(){this.initEquipItems(),this.initRoleDataItems()},onSetEquipNum:function(){this.updEquipBtn()},onUpLevel:function(){this.initEquipItems(),this.initRoleDataItems()},onEnable:function(){E.on(M("equip").eventType.ADD,this.onAdd,this),E.on(M("prop").eventType.SET_NUM.equipNum,this.onSetEquipNum,this),E.on(M("equip").eventType.UP_LEVEL,this.onUpLevel,this)},onDisable:function(){E.off(M("equip").eventType.ADD,this.onAdd,this),E.off(M("prop").eventType.SET_NUM.equipNum,this.onSetEquipNum,this),E.off(M("equip").eventType.UP_LEVEL,this.onUpLevel,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],indexHero:[function(e,t){"use strict";cc._RF.push(t,"e449cC/S7NG15FSEfDEeJxc","indexHero"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){var e=this;this.upItemNode=this.find("upRoleItem"),this.buyItemNode=this.find("buyRoleItem"),this.upItemNode.active=!1,this.buyItemNode.active=!1,this.chipItemNode=this.find("chipItem"),this.chipItemNode.active=!1,this.ATKLevelBtn=this.find("ATKLevelBtn",cc.Button),this.ATKLevelBtn.tipDotNode=this.find("tipDot",this.ATKLevelBtn.node),this.ATKLevelBtn.tipDotNode.active=!1,this.HPLevelBtn=this.find("HPLevelBtn",cc.Button),this.HPLevelBtn.tipDotNode=this.find("tipDot",this.HPLevelBtn.node),this.HPLevelBtn.tipDotNode.active=!1,this.allUpBtn=this.find("allUpBtn",cc.Button),this.updAllUpBtn(),this.updTipDot(),this.scrollView=this.find("mask",cc.ScrollView),this.roleHelpHPLabel=this.find("roleHelp/HP/label",cc.Label),this.roleHelpATKLabel=this.find("roleHelp/ATK/label",cc.Label),this.initChipItems(),this.initUpItems(),this.initBuyItems(),this.updRoleHelp(),this.updSelectScroll(),this.setUpType(M("data").upType),this.ATKLevelBtn.node.on("touchend",function(){e.ATKLevelBtn.interactable&&(e.setUpType("ATK"),G("audio").playEffect("popup"))}),this.HPLevelBtn.node.on("touchend",function(){e.HPLevelBtn.interactable&&(e.setUpType("HP"),G("audio").playEffect("popup"))}),this.allUpBtn.node.on("touchend",function(){e.allUpBtn.interactable?M("role").getAllUpDatas(M("data").upType).forEach(function(t){var i=M("role").calUpLevel(t.asset,M("data").upType,1);H.isEmpty(i.error)&&e.upLevel(t.asset)}):V("tip").error(L("error_no_upLevel"))}),this.find("roleHelp/faqBtn").on("touchend",function(){V("tip").config({touchClose:!0}).text(L("roleHelpTip"))})},setUpType:function(e){var t=this;M("data").upType=e,"ATK"==e?(this.ATKLevelBtn.interactable=!1,this.HPLevelBtn.interactable=!0):(this.ATKLevelBtn.interactable=!0,this.HPLevelBtn.interactable=!1),this.upItems.forEach(function(e){t.updUpItem(e.asset)}),this.updAllUpBtn()},initUpItems:function(){var e=this;this.upItems&&this.upItems.forEach(function(e){G("pool").put(e.node,!0)}),this.upItems=[],M("data").roles.forEach(function(t){var i={};i.node=G("pool").get(e.upItemNode,"indexHeroUpItemNode"),i.node.parent=e.upItemNode.parent,i.asset=t.asset,i.iconSprite=e.find("role/icon",cc.Sprite,i.node),G("role").loadSpriteFrame(t.asset,function(e){i.iconSprite.spriteFrame=e}),i.skillIconSprite=e.find("role/skillIcon",cc.Sprite,i.node);var n=M("role").getPlayerBaseData(i.asset);i.skillIconSprite.spriteFrame=G("skill").getSpriteFrame(n.skillName,0),i.ATKLabel=e.find("ATK/label",cc.Label,i.node),i.ATKLabel.string=0,i.HPLabel=e.find("HP/label",cc.Label,i.node),i.HPLabel.string=0,i.goldLabel=e.find("gold/label",cc.Label,i.node),i.goldLabel.string=0,i.chipLabel=e.find("chip/label",cc.Label,i.node),i.chipLabel.string=0,i.upBtn=e.find("upBtn",cc.Button,i.node),i.upBtn.levelIconSprite=e.find("levelTypeIcon",cc.Sprite,i.upBtn.node),i.upBtn.levelLabel=e.find("levelLabel",cc.Label,i.upBtn.node),i.selectedNode=e.find("selected",i.node),i.selectedNode.active=!1,i.upBtn.node.on("touchend",function(t){E.stop(t),e.upLevel(i.asset)}),i.node.on("touchend",function(){M("role").getPlayerData(i.asset).selected||(G("audio").playEffect("ding"),M("role").setSelect(i.asset))}),e.upItems.push(i)}),this.upItems.forEach(function(t){e.updUpItem(t.asset)})},updUpItem:function(e){var t=this.upItems.filter(function(t){return t.asset==e})[0];if(t){var i,n=M("role").getPlayerData(e);t.selectedNode.active=n.selected,i="ATK"==M("data").upType?this.find("icon",cc.Sprite,this.ATKLevelBtn.node).spriteFrame:this.find("icon",cc.Sprite,this.HPLevelBtn.node).spriteFrame,t.upBtn.levelIconSprite.spriteFrame=i;var r=n[M("data").upType+"Level"];t.upBtn.levelLabel.string="Lv"+H.numAbbr(r);var o=M("role").createPlayerData(e);t.ATKLabel.string=H.numAbbr(o.ATK),t.HPLabel.string=H.numAbbr(o.HP);var s=M("role").calUpLevel(e,M("data").upType,1);t.goldLabel.string=H.numAbbr(s.gold),t.chipLabel.string=H.numAbbr(s.chip),t.upBtn.interactable=!0,s.error.gold?(t.upBtn.interactable=!1,t.goldLabel.node.color=cc.color("#FF0000")):t.goldLabel.node.color=cc.color("#FFFFFF"),s.error.chip?(t.upBtn.interactable=!1,t.chipLabel.node.color=cc.color("#FF0000")):t.chipLabel.node.color=cc.color("#FFFFFF")}},updUpItems:function(){var e=this;this.upItems.forEach(function(t){e.updUpItem(t.asset)})},updSelectScroll:function(){var e=this;if(this.upItems){var t,i=0;this.upItems.forEach(function(e,n){M("role").getPlayerData(e.asset).selected&&(i=n,t=e)});var n=t.node.height*i+20*i;this.scheduleOnce(function(){e.scrollView.scrollToOffset(cc.v2(0,n),0)})}},setUpItemSelect:function(e){this.upItems.forEach(function(e){e.selectedNode.active=!1});var t=this.upItems.filter(function(t){return t.asset==e})[0];t&&(t.selectedNode.active=!0)},initBuyItems:function(){var e=this;this.buyItems&&this.buyItems.forEach(function(e){G("pool").put(e.node,!0)}),this.buyItems=[],M("role").getPlayerBaseDatas().filter(function(e){return!M("data").roles.filter(function(t){return e.asset==t.asset})[0]}).forEach(function(t){var i={};i.node=G("pool").get(e.buyItemNode,"indexHeroBuyItemNode"),i.node.parent=e.buyItemNode.parent,i.asset=t.asset,i.iconSprite=e.find("role/icon",cc.Sprite,i.node),G("role").loadSpriteFrame(t.asset,function(e){i.iconSprite.spriteFrame=e}),i.skillIconSprite=e.find("role/skillIcon",cc.Sprite,i.node);var n=M("role").getPlayerBaseData(i.asset);i.skillIconSprite.spriteFrame=G("skill").getSpriteFrame(n.skillName,0),i.goldLabel=e.find("gold/label",cc.Label,i.node),i.goldLabel.string=0,i.chipLabel=e.find("chip/label",cc.Label,i.node),i.chipLabel.string=0,i.buyBtn=e.find("buyBtn",cc.Button,i.node),i.buyBtn.node.on("touchend",function(t){E.stop(t),e.buyRole(i.asset)}),i.node.on("touchend",function(){V("tip").error(L("error_select_role"))}),e.buyItems.push(i)}),this.buyItems.forEach(function(t){e.updBuyItem(t.asset)})},updBuyItem:function(e){var t=this.buyItems.filter(function(t){return t.asset==e})[0];if(t){var i=M("role").calAdd(e);t.goldLabel.string=H.numAbbr(i.gold),t.chipLabel.string=H.numAbbr(i.chip),t.buyBtn.interactable=!0,i.error.gold?(t.buyBtn.interactable=!1,t.goldLabel.node.color=cc.color("#FF0000")):t.goldLabel.node.color=cc.color("#FFFFFF"),i.error.chip?(t.buyBtn.interactable=!1,t.chipLabel.node.color=cc.color("#FF0000")):t.chipLabel.node.color=cc.color("#FFFFFF")}},updBuyItems:function(){var e=this;this.buyItems.forEach(function(t){e.updBuyItem(t.asset)})},initChipItems:function(){var e=this;this.chipItems=[],M("role").getPlayerBaseDatas().forEach(function(t){var i={};i.node=H.inst(e.chipItemNode),i.node.parent=e.chipItemNode.parent,i.iconSprite=e.find("icon",cc.Sprite,i.node),G("role").loadSpriteFrame(t.asset,function(e){i.iconSprite.spriteFrame=e}),i.label=e.find("label",cc.Label,i.node),i.label.string=H.numAbbr(M("role").getChip(t.asset)),i.asset=t.asset,e.chipItems.push(i)})},updChipItem:function(e){var t=this.chipItems.filter(function(t){return t.asset==e})[0];t&&(t.label.string=H.numAbbr(M("role").getChip(e)))},updRoleHelp:function(){var e=M("role").getHelpData("role");console.log("Inde Hero / updRoleHelp / roleHelpData ... ",e),this.roleHelpHPLabel.string=H.numAbbr(e.HP),this.roleHelpATKLabel.string=H.numAbbr(e.ATK)},upLevel:function(e){var t=M("role").upLevel(e,M("data").upType,1);if(H.isEmpty(t.error)){G("audio").playEffect("upLevel"),V("tip").success(L("success_upLevel"));var i=this.upItems.filter(function(t){return t.asset==e})[0];i&&G("effect").create({asset:"upLevel",parentNode:i.iconSprite.node})}else for(var n in t.error){var r="#FFFFFF";"chip"==n&&(r=M("role").getChipColor()),V("tip").error(t.error[n],app.find[n+"SpriteFrame"],r)}},buyRole:function(e){R("server").api("buyRole",{asset:e}).then(function(t){if(0==t.errcode){var i=M("role").add(e);if(!H.isEmpty(i.error)){for(var n in i.error){var r="#FFFFFF";"chip"==n&&(r=M("role").getChipColor()),V("tip").error(i.error[n],app.find[n+"SpriteFrame"],r)}return}V("tip").success(L("success_buy"))}else 3==t.errcode?V("tip").error("Insufficient gold"):4==t.errcode?V("tip").error("Insufficient fragment"):V("tip").error(t.errcode)})},updTipDot:function(){var e=this;this.scheduleOnce(function(){e.ATKLevelBtn.tipDotNode.active=M("role").isTip("upLevel","ATK"),e.HPLevelBtn.tipDotNode.active=M("role").isTip("upLevel","HP")})},updAllUpBtn:function(){var e=M("role").getAllUpDatas(M("data").upType);"ATK"==M("data").upType&&(this.allUpBtn.interactable=M("role").isTip("upLevel","ATK")&&e.length>0),"HP"==M("data").upType&&(this.allUpBtn.interactable=M("role").isTip("upLevel","HP")&&e.length>0)},onSetSelect:function(e){this.setUpItemSelect(e),this.updUpItems(),this.updRoleHelp()},onAdd:function(){this.initUpItems(),this.initBuyItems(),this.updRoleHelp(),this.updAllUpBtn()},onUpLevel:function(){this.updUpItems(),this.updRoleHelp(),this.updAllUpBtn()},onSetChip:function(e){this.updChipItem(e),this.updUpItems(),this.updBuyItems(),this.updTipDot(),this.updAllUpBtn()},onSetGold:function(){this.updUpItems(),this.updBuyItems(),this.updTipDot(),this.updAllUpBtn()},onEnable:function(){E.on(M("role").eventType.SELECT,this.onSetSelect,this),E.on(M("role").eventType.ADD,this.onAdd,this),E.on(M("role").eventType.SET_CHIP,this.onSetChip,this),E.on(M("role").eventType.UP_LEVEL,this.onUpLevel,this),E.on(M("prop").eventType.SET_NUM.gold,this.onSetGold,this)},onDisable:function(){E.off(M("role").eventType.SELECT,this.onSetSelect,this),E.off(M("role").eventType.ADD,this.onAdd,this),E.off(M("role").eventType.SET_CHIP,this.onSetChip,this),E.off(M("role").eventType.UP_LEVEL,this.onUpLevel,this),E.off(M("prop").eventType.SET_NUM.gold,this.onSetGold,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],indexSkill:[function(e,t){"use strict";cc._RF.push(t,"e7993J/9gZP1r5SeWCbaF8o","indexSkill"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){var e=this;this.chipItemNode=this.find("chipItem"),this.chipItemNode.active=!1,this.initChipItems(),this.itemNode=this.find("upSkillItem"),this.itemNode.active=!1,this.initItems(),this.allUpBtn=this.find("allUpBtn",cc.Button),this.updAllUpBtn(),this.skillHelpHPLabel=this.find("skillHelp/HP/label",cc.Label),this.skillHelpATKLabel=this.find("skillHelp/ATK/label",cc.Label),this.updSkillHelp(),this.find("skillHelp/faqBtn").on("touchend",function(){V("tip").config({touchClose:!0}).text(L("skillHelpTip"))}),this.allUpBtn.node.on("touchend",function(){e.allUpBtn.interactable?M("skill").getAllUpDatas().forEach(function(t){var i=M("skill").calUpLevel(t.asset,1);H.isEmpty(i.error)&&e.upLevel(t.asset)}):V("tip").error(L("error_no_upLevel"))})},initChipItems:function(){var e=this;this.chipItems=[],M("skill").getBaseDatas().forEach(function(t){var i={};i.node=H.inst(e.chipItemNode),i.node.parent=e.chipItemNode.parent,i.asset=t.name,i.iconSprite=e.find("icon",cc.Sprite,i.node),i.iconSprite.spriteFrame=G("skill").getSpriteFrame(i.asset,0),i.label=e.find("label",cc.Label,i.node),i.label.string=H.numAbbr(M("skill").getChip(i.asset)),e.chipItems.push(i)})},updChipItem:function(e){var t=this.chipItems.filter(function(t){return t.asset==e})[0];t&&(t.label.string=H.numAbbr(M("skill").getChip(e)))},initItems:function(){var e=this;this.items&&this.items.forEach(function(e){G("pool").put(e.node,!0)}),this.items=[],M("skill").getBaseDatas().forEach(function(t){var i={};i.node=G("pool").get(e.itemNode,"indexSkillItemNode"),i.node.parent=e.itemNode.parent,i.asset=t.name,i.iconSprite=e.find("skill/icon",cc.Sprite,i.node),i.iconSprite.spriteFrame=G("skill").getSpriteFrame(i.asset,0),i.goldLabel=e.find("gold/label",cc.Label,i.node),i.goldLabel.string=0,i.chipLabel=e.find("chip/label",cc.Label,i.node),i.chipLabel.string=0,i.upBtn=e.find("upBtn",cc.Button,i.node),i.levelLabel=e.find("levelLabel",cc.Label,i.upBtn.node),i.levelLabel.string="Lv0",i.upBtn.node.on("touchend",function(t){E.stop(t),e.upLevel(i.asset)}),i.iconSprite.node.parent.on("touchend",function(e){E.stop(e),V("skillInfo").show(i.asset)}),e.items.push(i)}),this.items.forEach(function(t){e.updItem(t.asset)})},updItem:function(e){var t=this.items.filter(function(t){return t.asset==e})[0];if(t){t.levelLabel.string="Lv"+H.numAbbr(M("skill").getLevel(e));var i=M("skill").calUpLevel(e,1);t.goldLabel.string=H.numAbbr(i.gold),t.chipLabel.string=H.numAbbr(i.chip),t.upBtn.interactable=!0,i.error.gold?(t.upBtn.interactable=!1,t.goldLabel.node.color=cc.color("#FF0000")):t.goldLabel.node.color=cc.color("#FFFFFF"),i.error.chip?(t.upBtn.interactable=!1,t.chipLabel.node.color=cc.color("#FF0000")):t.chipLabel.node.color=cc.color("#FFFFFF")}},updItems:function(){var e=this;this.items&&this.items.forEach(function(t){e.updItem(t.asset)})},upLevel:function(e){var t=M("skill").upLevel(e,1);if(console.log("index Skill upLevel /// ",t),H.isEmpty(t.error)){G("audio").playEffect("upLevel"),V("tip").success(L("success_upLevel"));var i=this.items.filter(function(t){return t.asset==e})[0];console.log("success level up ... ",i),i&&G("effect").create({asset:"upLevel",parentNode:i.iconSprite.node})}else for(var n in t.error){var r="#FFFFFF";"chip"==n&&(r=M("skill").getChipColor()),V("tip").error(t.error[n],app.find[n+"SpriteFrame"],r)}},updSkillHelp:function(){var e=M("role").getHelpData("skill");this.skillHelpHPLabel.string=H.numAbbr(e.HP),this.skillHelpATKLabel.string=H.numAbbr(e.ATK)},updAllUpBtn:function(){var e=M("skill").getAllUpDatas();this.allUpBtn.interactable=M("skill").isTip()&&e.length>0},onUpLevel:function(){console.log("Enter onUpLevel ... "),this.updItems(),this.updSkillHelp(),this.updAllUpBtn()},onSetChip:function(e){this.updChipItem(e),this.updItems(),this.updAllUpBtn()},onSetGold:function(){this.updItems(),this.updAllUpBtn()},onEnable:function(){console.log("Registering UP_LEVEL event listener"),E.on(M("skill").eventType.SET_CHIP,this.onSetChip,this),E.on(M("skill").eventType.UP_LEVEL,this.onUpLevel,this),E.on(M("prop").eventType.SET_NUM.gold,this.onSetGold,this)},onDisable:function(){console.log("Turn off register UP_LEVEL event listener"),E.off(M("skill").eventType.SET_CHIP,this.onSetChip,this),E.off(M("skill").eventType.UP_LEVEL,this.onUpLevel,this),E.off(M("prop").eventType.SET_NUM.gold,this.onSetGold,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],index:[function(e,t){"use strict";cc._RF.push(t,"a7632EdQQxAuqUht0abDaoz","index"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){cc.game.setFrameRate(60),this.viewDatas=[{name:"indexHero",title:L("hero")},{name:"indexSkill",title:L("skill")},{name:"indexEquip",title:L("equip")},{name:"indexAchive",title:L("achive")}],this.viewBtns=[],this.initViewBtns(),this.updAllTipDots(),this.addBtnEvents(),console.log("enter index ... ",M("data").prop),this.goldLabel=this.find("gold/label",cc.Label),this.updGold(),this.potatoLabel=this.find("token/label",cc.Label),this.updPotato(),this.heartsLabel=this.find("hearts/val_label",cc.Label),this.updHearts(),this.scheduleHeartsRecovery(),this.addHeartsBtn=this.find("hearts/add_btn",cc.Button),this.addHeartsBtn?(console.log("\u627e\u5230add_btn\u6309\u94ae\uff0c\u6dfb\u52a0\u70b9\u51fb\u4e8b\u4ef6"),this.addHeartsBtn.node.on("click",this.buyHeartsEvent,this)):console.error("\u672a\u627e\u5230add_btn\u6309\u94ae"),this.showView("indexHero",!1),this.initTopupBtn()},initViewBtns:function(){var e=this,t=this.find("viewBtnParent/layout/btn");t.active=!1,this.viewDatas.forEach(function(i,n){var r=H.inst(t);r.parent=t.parent;var o=$(r,cc.Button);o.index=n,o.name=i.name,o.label=e.find("label",cc.Label,o.node),o.label.string=i.title,o.tipDotNode=e.find("tipDot",o.node),o.tipDotNode.active=!1,o.node.on("touchend",function(){o.interactable&&e.showView(o.name)}),e.viewBtns.push(o)})},updIndexHeroTipDot:function(){var e=this.viewBtns.filter(function(e){return"indexHero"==e.name})[0];e&&this.scheduleOnce(function(){e.tipDotNode.active=M("role").isTip("add")||M("role").isTip("upLevel","ATK")||M("role").isTip("upLevel","HP")})},updIndexSkillTipDot:function(){var e=this.viewBtns.filter(function(e){return"indexSkill"==e.name})[0];e&&this.scheduleOnce(function(){e.tipDotNode.active=M("skill").isTip()})},updIndexEquipTipDot:function(){var e=this.viewBtns.filter(function(e){return"indexEquip"==e.name})[0];e&&this.scheduleOnce(function(){e.tipDotNode.active=M("equip").isTip()})},updIndexAchiveTipDot:function(){var e=this.viewBtns.filter(function(e){return"indexAchive"==e.name})[0];e&&this.scheduleOnce(function(){e.tipDotNode.active=M("achive").isTip()})},updAllTipDots:function(){this.updIndexHeroTipDot(),this.updIndexSkillTipDot(),this.updIndexEquipTipDot(),this.updIndexAchiveTipDot()},showView:function(e,t){void 0===t&&(t=!0);var i=this.viewBtns.filter(function(t){return t.name===e})[0];if(i&&i.interactable){var n,r="left",o=this.viewBtns.filter(function(e){return!1===e.interactable})[0];if(o&&(r=o.index>i.index?"left":"right"),this.viewBtns.filter(function(e){return e.name!=i.name}).forEach(function(e){e.interactable=!0}),i.interactable=!1,o&&(n=V(o.name)),t){if(n){var s="right"===r?-app.screen.width:app.screen.width;n.node.stopAllActions(),cc.tween(n.node).to(.2,{x:s,opacity:255}).call(function(){n.remove()}).start()}var a=V(e,this.find("parent")).show();a.node.opacity=255;var c="right"===r?app.screen.width:-app.screen.width;return a.node.x=c,a.node.stopAllActions(),cc.tween(a.node).to(.2,{x:0,opacity:255}).start(),void G("audio").playEffect("popup")}n&&n.remove(),V(e,this.find("parent")).show().node.opacity=255}},updGold:function(){this.goldLabel.string=H.numAbbr(M("data").prop.gold)},updPotato:function(){this.potatoLabel.string=H.num(M("data").prop.potato,4)},updHearts:function(){var e=M("data").hearts;console.log("updHearts called, hearts data:",e),this.heartsLabel.string=e.current+"/"+e.max},scheduleHeartsRecovery:function(){this.unschedule(this.checkHeartsRecovery);var e=M("data").hearts;if(e.current<e.max&&e.nextRecoveryTime>0){var t=Math.floor(Date.now()/1e3),i=Math.max(0,e.nextRecoveryTime-t);console.log("scheduleHeartsRecovery ... ",i,e.nextRecoveryTime,t,i+3),this.scheduleOnce(this.checkHeartsRecovery,i+3)}},checkHeartsRecovery:function(){var e=this;R("server").api("getHearts").then(function(t){0===t.errcode&&(M("data").hearts.current=t.data.hearts,M("data").hearts.max=t.data.maxHearts,M("data").hearts.nextRecoveryTime=t.data.nextRecoveryTime,e.updHearts(),e.scheduleHeartsRecovery(),E.emit(M("prop").eventType.SET_NUM.hearts))})},myBtnEvent:function(){V("my").show()},shareBtnEvent:function(){var e={};H.isIos()?e.title=L("ios_app_name"):e.title=L("android_app_name"),e.url="https://api-9grm21o25576f966-1302715122.tcloudbaseapp.com/MBRO/",R("native").share(e)},buyHeartsEvent:function(){var e=this;console.log("Enter buyHeartsEvent ... "),console.log("\u5f53\u524d\u4f53\u529b\u503c:",M("data").hearts.current,"/",M("data").hearts.max),console.log("\u5f53\u524dpotato\u4f59\u989d:",M("data").prop.potato),V("tip").showLoading("Processing..."),R("server").api("buyHearts").then(function(t){console.log("buyHearts API \u8fd4\u56de\u7ed3\u679c:",t),V("tip").close(),0===t.errcode?(M("data").hearts.current=t.data.hearts,M("data").hearts.max=t.data.maxHearts,M("data").hearts.nextRecoveryTime=t.data.nextRecoveryTime,M("data").prop.potato=Number(t.data.potatoBalance).toFixed(4),e.updPotato(),e.updHearts(),e.scheduleHeartsRecovery(),console.log("\u8d2d\u4e70\u6210\u529f! \u65b0\u4f53\u529b\u503c:",M("data").hearts.current,"/",M("data").hearts.max),console.log("\u65b0potato\u4f59\u989d:",M("data").prop.potato),V("tip").success("Successfully purchased 20 hearts for "+t.data.price+" POTATO"),E.emit(M("prop").eventType.SET_NUM.hearts)):6===t.errcode?(console.error("\u8d2d\u4e70\u5931\u8d25: \u4f59\u989d\u4e0d\u8db3"),V("tip").error("Insufficient POTATO balance")):(console.error("\u8d2d\u4e70\u5931\u8d25:",t.errcode,t.data?t.data.message:"\u672a\u77e5\u9519\u8bef"),V("tip").error(t.data.message||"Failed to purchase hearts"))}).catch(function(e){V("tip").close(),console.error("Buy hearts failed:",e),V("tip").error("Failed to purchase hearts")})},onSetGold:function(){this.updGold(),this.updAllTipDots()},onSetEquipNum:function(){this.updIndexEquipTipDot()},onAchiveInc:function(){this.updIndexAchiveTipDot()},onEnable:function(){G("audio").playMusic("bgm1"),this.refreshUserData(),E.on(M("prop").eventType.SET_NUM.gold,this.onSetGold,this),E.on(M("prop").eventType.SET_NUM.hearts,this.updHearts,this),E.on(M("role").eventType.SET_CHIP,this.updIndexHeroTipDot,this),E.on(M("skill").eventType.SET_CHIP,this.updIndexSkillTipDot,this),E.on(M("prop").eventType.SET_NUM.equipNum,this.onSetEquipNum,this),E.on(M("achive").eventType.INC_COUNT,this.onAchiveInc,this),E.on(M("achive").eventType.INC_LEVEL,this.onAchiveInc,this)},onDisable:function(){E.off(M("prop").eventType.SET_NUM.gold,this.onSetGold,this),E.off(M("prop").eventType.SET_NUM.hearts,this.updHearts,this),E.off(M("role").eventType.SET_CHIP,this.updIndexHeroTipDot,this),E.off(M("skill").eventType.SET_CHIP,this.updIndexSkillTipDot,this),E.off(M("prop").eventType.SET_NUM.equipNum,this.onSetEquipNum,this),E.off(M("achive").eventType.INC_COUNT,this.onAchiveInc,this),E.off(M("achive").eventType.INC_LEVEL,this.onAchiveInc,this)},refreshUserData:function(){var e=this,t=S("login_token");t&&R("server").api("login",{token:t}).then(function(t){0===t.errcode&&t.data&&(M("data").hearts.current=t.data.hearts,M("data").hearts.max=t.data.maxHearts,M("data").hearts.nextRecoveryTime=t.data.nextRecoveryTime,e.updHearts(),e.scheduleHeartsRecovery(),console.log("\u7528\u6237\u6570\u636e\u5df2\u5237\u65b0\uff0c\u4f53\u529b\u503c:",M("data").hearts))}).catch(function(e){console.error("\u5237\u65b0\u7528\u6237\u6570\u636e\u5931\u8d25:",e)})},initTopupBtn:function(){var e=this.find("topup_potato_btn");e&&e.on("click",this.topupBtnEvent,this)},topupBtnEvent:function(){V("topup").show()}}),cc._RF.pop()},{ccBase:"ccBase"}],initApp:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"26dee2SeRtHTrnHNjm0R4qm","initApp"),globalThis.E=new cc.EventTarget,E.stop=function(e){e.stopPropagation&&e.stopPropagation(e)},globalThis.H=e("helper"),globalThis.$=H.$,globalThis.log=H.log,globalThis.i18n=e("i18n"),globalThis.L=i18n.t;var n=e("localStorage"),r=n.localStorageInit,o=n.localStorage;cc.Class({editor:{menu:"base/initApp"},extends:e("ccBase"),properties:{screenNode:cc.Node,parentNode:cc.Node,popupParentNode:cc.Node},ctor:function(){this.prefabs=[],this.audioClips=[],this.view={},this.require={}},load:function(e,t){var i=this;this.assets||(this.assets=[]);var n=e+t.toString();return new Promise(function(r,o){var s=i.assets.filter(function(e){return e.key==n})[0];s?r(s.data):i.bundle.load(e,t,function(e,t){if(e)return H.log("app.load",e),void o();i.assets.filter(function(e){return e.key==n})[0]||i.assets.push({key:n,data:t}),r(t)})})},loadDir:function(e,t){var i=this;return new Promise(function(n,r){i.bundle.loadDir(e,t,function(e,t){e?r(e):n(t)})})},loadAssets:function(e){var t=this;e=i({},{onSuccess:function(){},onError:function(){},onProgress:function(){}},e),this.prefabs=[],this.audioClips=[];var n=[];n.push(new Promise(function(i,n){t.bundle.loadDir("./",cc.Prefab,function(t,i){e.onProgress(t,i)},function(e,r){e?n(e):(t.prefabs=r,i())})})),n.push(new Promise(function(i,n){t.bundle.loadDir("./",cc.AudioClip,function(t,i){e.onProgress(t,i)},function(e,r){e?n(e):(t.audioClips=r,i())})})),Promise.all(n).then(function(){e.onSuccess()}).catch(function(t){e.onError(t)})},getPrefab:function(e){return this.prefabs.filter(function(t){return t.name==e})[0]},getAudioClip:function(e){return this.audioClips.filter(function(t){return t.name==e})[0]},V:function(e,t){var i=this;if(this.view[e]&&(this.view[e].node||delete this.view[e]),this.view[e])return t&&(this.view[e].node.parent=t),this.view[e];cc.log("view\u5b9e\u4f8b",e);var n=this.getPrefab(e);if(n){var r=H.inst(n);H.add$(r,cc.BlockInputEvents,!0),r.active=!1;var o=H.add$(r,e,!0);if(o||((o={}).node=r),t)r.parent=t;else{var s=$(r,"ccPopup");r.parent=s?this.popupParentNode:this.parentNode}return H.setIndex(r,"last"),o.show||(o.show=function(){return r.active=!0,o}),o._close=function(){o.node.active=!1},o.onClose=function(){},o.close||(o.close=function(){o._close(),o.onClose()}),o._remove=function(){cc.log("view\u9500\u6bc1",e),o.node.destroy(),delete i.view[e]},o.onRemove=function(){},o.remove||(o.remove=function(){o._remove(),o.onRemove()}),this.view[e]=o,o}cc.log("view\u672a\u627e\u5230",e)},R:function(t){if(this.require[t])return this.require[t];try{return this.require[t]=e(t),this.require[t]}catch(i){return delete this.require[t],null}},M:function(e){return this.R(e+"Model")},G:function(e){return this.R(e+"Mgr")},S:function(e,t){return o(e,t)},init:function(e){var t=this;e=i({},{appName:"IS_GAME",bundleName:"is_app",onSuccess:function(){},onError:function(){},onProgress:function(){}},e),r(e.appName),globalThis.S=this.S.bind(this),globalThis.M=this.M.bind(this),globalThis.V=this.V.bind(this),globalThis.G=this.G.bind(this),globalThis.R=this.R.bind(this),"undefined"==typeof app&&(globalThis.app={}),app.load=this.load.bind(this),app.loadDir=this.loadDir.bind(this),app.getPrefab=this.getPrefab.bind(this),app.getAudioClip=this.getAudioClip.bind(this),this.screenNode&&(app.screen=H.add$(this.screenNode,"screen",!0)),this.bundle=cc.assetManager.getBundle(e.bundleName),this.bundle?this.loadAssets(e):cc.assetManager.loadBundle(e.bundleName,{onFileProgress:function(t,i){e.onProgress(t,i)}},function(i,n){if(i)return e.onError(i),void(n&&n.releaseAll());t.bundle=n,t.loadAssets(e)})}}),cc._RF.pop()},{ccBase:"ccBase",helper:"helper",i18n:"i18n",localStorage:"localStorage"}],inputSid:[function(e,t){"use strict";cc._RF.push(t,"43ebecnkKRGCZuZxia8QU0M","inputSid"),cc.Class({extends:e("popup"),properties:{editBox:cc.EditBox},show:function(){return this.initItems(),this.addBtnEvents(),H.show(this)},initItems:function(){var e=this,t=M("game").getSidReward(),i=function(){var t=G("pool").get(app.getPrefab("rewardItem"),"inputSidrewardItem");return t.parent=e.find("rewardParent"),$(t,"rewardItem")};for(var n in t.prop)i().updProp(n,t.prop[n]);t.chips.forEach(function(e){i().updChip(e)})},btnEvent:function(e){var t=this;if(M("data").player.isGuest)V("tip").error(L("error_guest"));else{var i=H.trim(this.editBox.string);if(M("data").player.childSids.length>=100)V("tip").error(L("error_sid_max"));else if(M("data").player.childSids.includes(i))V("tip").error(L("error_sid_self"));else if(i.length<2||i.length>=50)V("tip").error(L("error_length",{length:"2-50"}));else if(i!=M("data").player.sid){var n=$(e,cc.Button);n.interactable&&(n.interactable=!1,V("tip").showLoading(),R("server").api("setSid",{sid:M("data").player.sid,friendSid:i}).then(function(e){if(n.interactable=!0,V("tip").close(),e.error)V("tip").error(e.error);else{t.editBox.string="",M("data").player.childSids.push(i);var r=M("game").getSidReward(!0);M("game").setReward(r),V("gainTip").show(r)}}).catch(function(e){n.interactable=!0,V("tip").close(),V("tip").error(e)}))}else V("tip").error(L("error_sid_friendSid"))}}}),cc._RF.pop()},{popup:"popup"}],joystickInput:[function(e,t){"use strict";cc._RF.push(t,"90943xSnKpFHLpWT9HrpEhG","joystickInput"),cc.Class({extends:e("ccBase"),properties:{stickNode:cc.Node},onEnable:function(){this.maxR=this.node.width/2-this.stickNode.width/4/2,this.isUse=!1,this.pos=cc.v2(0,0),this.realDir=cc.v2(0,0),this.node.parent.on("touchstart",this.activeTouch,this),this.node.parent.on("touchend",this.deactiveTouch,this),this.node.parent.on("touchmove",this.moveStick,this),this.deactiveTouch()},onDisable:function(){this.node.parent.off("touchstart",this.activeTouch,this),this.node.parent.off("touchend",this.deactiveTouch,this),this.node.parent.off("touchmove",this.moveStick,this)},activeTouch:function(e){this.isUse=!0,this.node.opacity=255,this.pos=e.getLocation(),this.node.position=this.node.parent.convertToNodeSpaceAR(this.pos),this.stickNode.position=cc.v2(0,0)},deactiveTouch:function(){this.isUse=!1,this.node.opacity=0},moveStick:function(e){if(this.isUse){var t=e.getLocation().sub(this.pos),i=t.x,n=t.y,r=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));if(this.maxR<r){var o=this.maxR/r;i*=o,n*=o}this.stickNode.position=cc.v2(i,n),this.realDir=t.normalize()}},getDir:function(){return this.isUse?cc.v2(this.stickNode.x/this.maxR,this.stickNode.y/this.maxR):cc.v2(0,0)},getRealDir:function(){return this.isUse?this.realDir:cc.v2(0,0)}}),cc._RF.pop()},{ccBase:"ccBase"}],keyboardInput:[function(e,t){"use strict";cc._RF.push(t,"e6da1ItUpBOy7dAuXP4rBFx","keyboardInput"),cc.Class({extends:e("ccBase"),properties:{},onEnable:function(){this.dir=cc.v2(0,0),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDisable:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyUp:function(e){e.keyCode!=cc.macro.KEY.w&&e.keyCode!=cc.macro.KEY.up||(this.dir.y=1==this.dir.y?0:this.dir.y),e.keyCode!=cc.macro.KEY.s&&e.keyCode!=cc.macro.KEY.down||(this.dir.y=-1==this.dir.y?0:this.dir.y),e.keyCode!=cc.macro.KEY.d&&e.keyCode!=cc.macro.KEY.right||(this.dir.x=1==this.dir.x?0:this.dir.x),e.keyCode!=cc.macro.KEY.a&&e.keyCode!=cc.macro.KEY.left||(this.dir.x=-1==this.dir.x?0:this.dir.x)},onKeyDown:function(e){e.keyCode!=cc.macro.KEY.w&&e.keyCode!=cc.macro.KEY.up||(this.dir.y=1),e.keyCode!=cc.macro.KEY.s&&e.keyCode!=cc.macro.KEY.down||(this.dir.y=-1),e.keyCode!=cc.macro.KEY.d&&e.keyCode!=cc.macro.KEY.right||(this.dir.x=1),e.keyCode!=cc.macro.KEY.a&&e.keyCode!=cc.macro.KEY.left||(this.dir.x=-1)},getDir:function(){return cc.v2(this.dir.x,this.dir.y).normalize()}}),cc._RF.pop()},{ccBase:"ccBase"}],kniveItem:[function(e,t){"use strict";cc._RF.push(t,"3b218mo1gRLJZI3FKxw47Ng","kniveItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t){if(this.target=e,this.target){var i=this.target.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.node.setWorldPosition(this.byWorldPos),this.speed=t,this.dir=i.sub(this.byWorldPos).normalize(),G("effect").updDirAngle(this.node,this.dir),this.isTemp=!1,this.isInit=!0}else this.remove()},onEnter:function(e){if(this.role){var t=$(e.node,"skill");if(t){if(t.role.group==this.role.group)return;if(!t.isBullet)return;if(t.remove)return G("effect").create({by:t.node,asset:"boom"}),void t.remove()}}},remove:function(){G("pool").put(this.node)},update:function(e){if(this.isInit)if(H.dist(this.byWorldPos,this.node.getWorldPosition(cc.Vec2.ZERO))>app.screen.width)this.remove();else if(this.dir){var t=this.speed*e;this.node.x+=this.dir.x*t,this.node.y+=this.dir.y*t}}}),cc._RF.pop()},{skill:"skill"}],knive:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"149cdcrvGlE6olOIo/ojiad","knive"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,num:1,cd:3,speed:600,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.speed=e.speed,this.scale=e.scale,this.num=e.num,this.defCd=e.cd,this.cd=this.defCd},createItems:function(){if(G("skill").checkRole(this.role)){var e=G("role").getTargets(this.role,this.num);if(!(e.length<1))for(var t=0;t<e.length;t++){var i=G("pool").get(this.prefab);i.scaleX=this.scale,i.scaleY=this.scale,i.parent=G("skill").parent2Node;var n=e[t],r=$(i,"skill");r.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),r.init(n,this.speed)}}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],laserItem:[function(e,t){"use strict";cc._RF.push(t,"52759N5wzJE9p3y2YcG2AP0","laserItem"),cc.Class({extends:e("skill"),init:function(e){this.animNode=this.find("anim"),this.node.width=0,this._toWorldPos=G("role").getEnemyWorldPos(this.role),this._byWorldPos=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),this.dir=this._toWorldPos.sub(this._byWorldPos).normalize(),this.node.angle=H.getDirAngle(this.dir),this.updByWorldPos(),this.updSize(),this.timeout=e,this.isStay=!0,this.defHurtCd=.2,this.hurtCd=this.defHurtCd,this.isInit=!0},updByWorldPos:function(){var e=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),t=this._toWorldPos.sub(e).normalize();this.node.angle=H.getDirAngle(t);var i=Math.PI/180*this.node.angle;this.byWorldPos=cc.v2(0,0),this.byWorldPos.x=e.x+.5*this.role.node.width*Math.cos(i),this.byWorldPos.y=e.y+.5*this.role.node.height*Math.sin(i),this.node.setWorldPosition(this.byWorldPos)},updSize:function(){this.collider&&(this.animNode.width=this.node.width,this.collider.size.width=this.node.width,this.collider.size.height=this.node.height,this.collider.offset.x=this.node.width/2)},remove:function(){G("pool").put(this.node)},update:function(e){if(this.role&&!M("fight").stop&&this.isInit){this.updByWorldPos();var t=cc.v2(this.byWorldPos.x,this.byWorldPos.y);if(this.dir){t.x+=this.dir.x*app.screen.height,t.y+=this.dir.y*app.screen.height;var i=H.dist(this.byWorldPos,t);this.node.width=i}this.updSize(),this.timeout-=e,this.timeout<=0?this.collider.enabled&&this.remove():this.hurtCd>0?(this.hurtCd-=e,this.isCollide=!1):(this.hurtCd=this.defHurtCd,this.isCollide=!0)}}}),cc._RF.pop()},{skill:"skill"}],laser:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"55668RZp/1F1ZsumzbSwiQr","laser"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,num:1,cd:3,timeout:5,hurtPercent:10},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.timeout=e.timeout,this.defCd=e.cd,this.cd=this.defCd,this.skillCd=0},createItems:function(){if(G("skill").checkRole(this.role)){this.skillCd=this.timeout;for(var e=1;e<=this.num;e++){var t=G("pool").get(this.prefab);t.scaleX=this.scale,t.scaleY=this.scale,t.parent=G("skill").parent2Node;var i=$(t,"skill");i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),i.init(this.timeout)}}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.skillCd>0?this.skillCd-=e:(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd))))}}),cc._RF.pop()},{ccBase:"ccBase"}],lightningItem:[function(e,t){"use strict";cc._RF.push(t,"461f8kUzaVEr5BNhvWEYPKM","lightningItem"),cc.Class({extends:e("skill"),properties:{},init:function(e){var t=this;this.anim=this.find("anim",cc.Animation),this.anim.play().once(cc.Animation.EventType.FINISHED,function(){G("pool").put(t.node)}),this.anim.skill=function(){t.createBoom()},this.role&&e&&e.collide({node:this.node})},createBoom:function(){var e="lightning2"==this.node.name?"lightningBoom2":"lightningBoom1",t=G("pool").get(app.getPrefab(e));t.parent=G("skill").parent2Node,t.scaleX=this.node.scaleX,t.scaleY=this.node.scaleY,t.setWorldPosition(this.node.getWorldPosition(cc.Vec2.ZERO));var i=H.add$(t,"skill",!0);i.isCollide=!0,i.initBase({role:this.role,hurtPercent:this.hurtPercent/2,skillName:this.skillName});var n=this.find("anim",cc.Animation,t);n.play().once(cc.Animation.EventType.FINISHED,function(){G("pool").put(t)}),n.skillEnd=function(){i.isCollide=!1}}}),cc._RF.pop()},{skill:"skill"}],lightning:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"0bb35P2IxFHtaV2vcAZyfa2","lightning"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:1,num:1,cd:3,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.defCd=e.cd,this.cd=this.defCd},createItems:function(){var e=this;if(G("skill").checkRole(this.role)){var t=G("role").getRandTargets(this.role,this.num);t.length<1||t.forEach(function(t){var i=G("pool").get(e.prefab);i.scaleX=e.scale,i.scaleY=e.scale,H.calOdds(50)&&(i.scaleX=-i.scaleX),i.parent=G("skill").parent2Node,i.setWorldPosition(t.node.getWorldPosition(cc.Vec2.ZERO));var n=$(i,"skill");n.initBase({role:e.role,hurtPercent:e.hurtPercent,skillName:e.skillName}),n.init(t)})}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd)))}}),cc._RF.pop()},{ccBase:"ccBase"}],loading:[function(e,t){"use strict";cc._RF.push(t,"6153dLLRJ1C5LvGlDEHWiBg","loading"),cc.Class({extends:cc.Component,properties:{label:cc.Label,progressLabel:cc.Label,progressBar:cc.ProgressBar},onLoad:function(){this.updProgress(0,1)},tip:function(e,t){void 0===t&&(t="#FFFFFF"),this.label.node.color=cc.color(t),this.label.string=e},success:function(e){this.tip(e,"#00FF00")},error:function(e){this.tip(e,"#FF0000")},updProgress:function(e,t){var i=e/t;this.progressBar.progress=i,this.progressLabel.string=this.num(100*i)+"%"},num:function(e){return e=Number(e),isNaN(e)?0:Math.round(100*e)/100},show:function(){return this.node.active=!0,this},close:function(){return this.node.active=!1,this},remove:function(){this.node.destroy()}}),cc._RF.pop()},{}],localStorage:[function(e,t){"use strict";cc._RF.push(t,"aa24cuZQvFEWL+O/rwryVTD","localStorage");var i=e("crypt"),n={cryptKey:i.md5("!QAZ@WSX#eo2025C"),appName:"survivors",init:function(e){this.appName=e},encode:function(e){return i.encode(e,this.cryptKey)},decode:function(e){return i.decode(e,this.cryptKey)},get:function(e){try{e=this.appName+"_"+e;var t=cc.sys.localStorage.getItem(e);return t&&(t=JSON.parse(this.decode(t))),t}catch(i){}},getAll:function(){if(!cc.sys.isNative){var e={};for(var t in cc.sys.localStorage)if("string"==typeof cc.sys.localStorage[t]){var i=t.replace(this.appName+"_","");t==this.appName+"_"+i&&(e[i]=this.get(i))}return e}},set:function(e,t){try{e=this.appName+"_"+e,cc.sys.localStorage.setItem(e,this.encode(JSON.stringify(t)))}catch(i){cc.log("Cache.set Error",i)}},clear:function(e){e=this.appName+"_"+e,cc.sys.localStorage.removeItem(e)},clearAll:function(){if(cc.sys.isNative)cc.sys.localStorage.clear();else for(var e in cc.sys.localStorage)if("string"==typeof cc.sys.localStorage[e]){var t=e.replace(this.appName+"_","");e==this.appName+"_"+t&&this.clear(t)}}};t.exports={localStorageInit:function(e){n.init(e)},localStorage:function(e,t){try{return null===e?n.clearAll():e?null===t?n.clear(e):t||"boolean"==typeof t||"number"==typeof t?n.set(e,t):n.get(e):n.getAll()}catch(i){cc.log("LocalStorage Error",i)}}},cc._RF.pop()},{crypt:"crypt"}],login:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function n(){n=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),a=new L(n||[]);return r(s,"_invoke",{value:w(e,i,a)}),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(R){return{type:"throw",arg:R}}}e.wrap=h;var d={};function p(){}function f(){}function v(){}var g={};l(g,s,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&i.call(y,s)&&(g=y);var b=v.prototype=p.prototype=Object.create(g);function k(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){function n(r,o,s,a){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,s,a)},function(e){n("throw",e,s,a)}):t.resolve(h).then(function(e){l.value=e,s(l)},function(e){return n("throw",e,s,a)})}a(c.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,r){n(e,i,t,r)})}return o=o?o.then(r,r):r()}})}function w(e,t,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return{value:void 0,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=S(s,i);if(a){if(a===d)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var c=u(e,t,i);if("normal"===c.type){if(n=i.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n="completed",i.method="throw",i.arg=c.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),l(E.prototype,a,function(){return this}),e.AsyncIterator=E,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new E(h(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then(function(e){return e.done?e.value:s.next()})},k(b),l(b,c,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return s.type="throw",s.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),_(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;_(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function r(e,t,i,n,r,o,s){try{var a=e[o](s),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise(function(n,o){var s=e.apply(t,i);function a(e){r(s,n,o,a,c,"next",e)}function c(e){r(s,n,o,a,c,"throw",e)}a(void 0)})}}cc._RF.push(t,"6b6eaw21+xMtbDmhFvpgbiI","login"),cc.Class({extends:e("ccBase"),properties:{webViewNode:cc.WebView,walletListPrefab:cc.Prefab},show:function(e){var t=this;return o(n().mark(function i(){var r,o,s;return n().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("enter login show ... "),t.callFunc=e,t.guestBtn=t.find("guestBtn",cc.Button),t.guestBtn.node.active=!0,t.guestUnisatBtn=t.find("guestUnisatBtn",cc.Button),t.guestUnisatBtn.node.active=!0,(r=t.find("guestBtn/layout/label",cc.Label))&&(r.string="OKX Wallet"),(o=t.find("guestUnisatBtn/layout/label",cc.Label))&&(o.string="Unisat Wallet"),t.taptapBtn=t.find("taptapBtn",cc.Button),t.taptapBtn.node.active=!1,t.appleBtn=t.find("appleBtn",cc.Button),t.appleBtn.node.active=!1,t.qqBtn=t.find("qqBtn",cc.Button),t.qqBtn.node.active=!1,t.parentNode=t.find("parent"),t.parentNode.active=!0,t.addBtnEvents(),t.setupMessageListeners(),(s=S("login_token"))?(console.log("Found token in localStorage, attempting to login"),t.requestLoginBackend({token:s})):(t.requestTokenFromParent(),t.initSdk()),i.abrupt("return",H.show(t));case 23:case"end":return i.stop()}},i)}))()},requestTokenFromParent:function(){try{window.parent&&window.parent!==window?(console.log("Game is running in iframe, requesting token from parent"),window.parent.postMessage({type:"GAME_READY"},"*"),setTimeout(function(){S("login_token")||(console.log("No token received after 5s, requesting again"),window.parent.postMessage({type:"TOKEN_REQUEST"},"*"))},5e3)):console.log("Game is not running in iframe")}catch(e){console.error("Error requesting token from parent:",e)}},setupMessageListeners:function(){var e=this;window.addEventListener("message",function(t){if(["http://localhost:3039","https://localhost:3039","https://bitsurvivors.xyz","https://www.bitsurvivors.xyz"].includes(t.origin)){if(t.data&&"object"==typeof t.data)switch(console.log("Game received message:",t.data.type),t.data.type){case"TOKEN_TRANSFER":var i=t.data.token;if(console.log("Received token from parent window:",{tokenExists:!!i,tokenType:typeof i,tokenLength:i?i.length:0,tokenPrefix:i?i.substring(0,10)+"...":"undefined",tokenIsUndefinedString:"undefined"===i}),!i||"undefined"===i)return console.error("ERROR: Received invalid token from parent window"),void V("tip").config({color:"#FF0000",touchClose:!0}).text("Authentication error: Invalid token received");console.log("Saving valid token to localStorage"),S("login_token",i),e.requestLoginBackend({token:i});break;case"WEB_LOGOUT":console.log("Received logout request from web"),e.logout()}}else console.warn("Received message from untrusted origin: "+t.origin)})},initSdk:function(){},taptapBtnEvent:function(){var e=this;H.isNative()?(R("taptap").login.onSign=function(t){t?t.openid?e.login({account:t.openid,nickname:t.nickname,api:"taptap"}):e.error("openid Error"):e.error("res Error")},R("taptap").login.onClose=function(){},R("taptap").login.onError=function(t){t?e.error(t):e.error(L("error_action"))},R("taptap").login.sign()):this.login({account:"taptap",api:"taptap"})},appleBtnEvent:function(e){var t=this;if(H.isNative()){var i=$(e,cc.Button);i.interactable&&(i.interactable=!1,V("tip").showLoading(),R("apple").login.onSign=function(e){i.interactable=!0,V("tip").close(),e?e.user?t.login({account:e.user,api:"apple"}):t.error("user Error"):t.error("res Error")},R("apple").login.onClose=function(){i.interactable=!0,V("tip").close()},R("apple").login.onError=function(){i.interactable=!0,V("tip").close(),t.error(L("error_action"))},R("apple").login.sign())}else this.login({account:"apple",api:"apple"})},qqBtnEvent:function(){var e=this;H.isNative()?(R("qq").login.onSign=function(t){t?t.openid?e.login({account:t.openid,api:"qq"}):e.error("openid Error"):e.error("res Error")},R("qq").login.onClose=function(){},R("qq").login.onError=function(t){t?e.error(t):e.error(L("error_action"))},R("qq").login.sign()):this.login({account:"qq",api:"qq"})},guestBtnEvent:function(){var e=this;return o(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connectWithOKX();case 2:case"end":return t.stop()}},t)}))()},guestUnisatBtnEvent:function(){var e=this;return o(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connectWithUnisat();case 2:case"end":return t.stop()}},t)}))()},isWalletInstalled:function(e){return"okx"===e?!!window.okxwallet:"unisat"===e&&(console.log("window.unisat",window.unisat),!!window.unisat)},getSignMessage:function(){return"Welcome to \ud83e\udd8eBit Survivors!"},connectWithOKX:function(){var e=this;return o(n().mark(function t(){var i,r,o,s,a;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,V("tip").showLoading("Connecting to OKX Wallet..."),e.isWalletInstalled("okx")){t.next=6;break}return V("tip").close(),e.error("OKX Wallet extension not found. Please install OKX Wallet."),t.abrupt("return");case 6:if(!window.okxwallet||!window.okxwallet.fractalBitcoin){t.next=40;break}return t.prev=7,t.next=10,window.okxwallet.fractalBitcoin.disconnect();case 10:return t.next=12,window.okxwallet.fractalBitcoin.requestAccounts();case 12:if((i=t.sent)&&0!==i.length){t.next=17;break}return V("tip").close(),e.error("No address found in OKX Wallet."),t.abrupt("return");case 17:return r=i[0],o=e.getSignMessage(),V("tip").showLoading("Signing message..."),t.next=22,window.okxwallet.fractalBitcoin.signMessage(o,"ecdsa");case 22:return s=t.sent,a="",t.prev=24,t.next=27,window.okxwallet.fractalBitcoin.getPublicKey();case 27:a=t.sent,t.next=33;break;case 30:t.prev=30,t.t0=t.catch(24),console.error("\u83b7\u53d6\u516c\u94a5\u5931\u8d25:",t.t0);case 33:return e.requestLoginBackend({walletAddress:r,sign:s,publicKey:a,walletType:"okx"}),t.abrupt("return");case 37:t.prev=37,t.t1=t.catch(7),console.error("OKX fractalBitcoin API\u8fde\u63a5\u5931\u8d25:",t.t1);case 40:V("tip").close(),e.error("OKX Wallet connection failed. Please try again."),t.next=49;break;case 44:t.prev=44,t.t2=t.catch(0),V("tip").close(),console.error("OKX Connect failed:",t.t2),e.error("OKX Wallet connection failed: "+(t.t2.message||"Unknown error"));case 49:case"end":return t.stop()}},t,null,[[0,44],[7,37],[24,30]])}))()},connectWithUnisat:function(){var e=this;return o(n().mark(function t(){var i,r,o,s,a,c,l,h,u,d;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,V("tip").showLoading("Connecting to Unisat Wallet..."),e.isWalletInstalled("unisat")){t.next=6;break}return V("tip").close(),e.error("Unisat Wallet extension not found. Please install Unisat Wallet."),t.abrupt("return");case 6:if(!window.unisat||!window.unisat.fractalBitcoin){t.next=40;break}return t.prev=7,t.next=10,window.unisat.fractalBitcoin.disconnect();case 10:return t.next=12,window.unisat.fractalBitcoin.requestAccounts();case 12:if((i=t.sent)&&0!==i.length){t.next=17;break}return V("tip").close(),e.error("No address found in Unisat Wallet."),t.abrupt("return");case 17:return r=i[0],o=e.getSignMessage(),V("tip").showLoading("Signing message..."),t.next=22,window.unisat.fractalBitcoin.signMessage(o,"ecdsa");case 22:return s=t.sent,a="",t.prev=24,t.next=27,window.unisat.fractalBitcoin.getPublicKey();case 27:a=t.sent,t.next=33;break;case 30:t.prev=30,t.t0=t.catch(24),console.error("\u83b7\u53d6\u516c\u94a5\u5931\u8d25:",t.t0);case 33:return e.requestLoginBackend({walletAddress:r,sign:s,publicKey:a,walletType:"unisat"}),t.abrupt("return");case 37:t.prev=37,t.t1=t.catch(7),console.error("Unisat fractalBitcoin API\u8fde\u63a5\u5931\u8d25:",t.t1);case 40:return t.next=42,window.unisat.requestAccounts();case 42:if((c=t.sent)&&0!==c.length){t.next=47;break}return V("tip").close(),e.error("No address found in Unisat Wallet."),t.abrupt("return");case 47:return l=c[0],h=e.getSignMessage(),V("tip").showLoading("Signing message..."),t.next=52,window.unisat.signMessage(h);case 52:return u=t.sent,d="",t.prev=54,t.next=57,window.unisat.getPublicKey();case 57:d=t.sent,t.next=63;break;case 60:t.prev=60,t.t2=t.catch(54),console.error("\u83b7\u53d6\u516c\u94a5\u5931\u8d25:",t.t2);case 63:e.requestLoginBackend({walletAddress:l,sign:u,publicKey:d,walletType:"unisat"}),t.next=71;break;case 66:t.prev=66,t.t3=t.catch(0),V("tip").close(),console.error("Unisat Connect failed:",t.t3),e.error("Unisat Wallet connection failed: "+(t.t3.message||"Unknown error"));case 71:case"end":return t.stop()}},t,null,[[0,66],[7,37],[24,30],[54,60]])}))()},requestLoginBackend:function(e){var t=this;e=i({},{account:"",isGuest:!1,api:"",walletType:""},e),V("tip").showLoading("Logging in...");var n="unisat"===e.walletType?"Unisat":"okx"===e.walletType?"OKX":"";console.log("Requesting login from backend with params:",{hasWalletAddress:!!e.walletAddress,hasSign:!!e.sign,hasPublicKey:!!e.publicKey,hasToken:!!e.token,walletType:e.walletType}),R("server").api("login",{walletAddress:e.walletAddress,sign:e.sign,publicKey:e.publicKey,walletType:e.walletType,token:e.token}).then(function(i){if(console.log("Login API response:",{errcode:i.errcode,hasData:!!i.data,message:i.message||i.errmsg}),11!==i.errcode)if(0==i.errcode){if(V("tip").close(),e.success=!1,i.data&&i.data.token){S("login_token",i.data.token),console.log("Login response hearts data:",{hearts:i.data.hearts,maxHearts:i.data.maxHearts,nextRecoveryTime:i.data.nextRecoveryTime}),M("data").init({account:i.data.wallet_address,player:i.data.player,walletType:e.walletType,hearts:i.data.hearts,maxHearts:i.data.maxHearts,nextRecoveryTime:i.data.nextRecoveryTime}),e.success=!0;try{window.parent&&window.parent!==window&&window.parent.postMessage({type:"GAME_LOGIN_SUCCESS",token:i.data.token,walletAddress:i.data.wallet_address,walletType:e.walletType},"*")}catch(r){console.error("Error sending login success message:",r)}n&&V("tip").config({color:"#00FF00",touchClose:!0}).text(n+" Wallet connected successfully!")}t.callFunc&&t.callFunc(e)}else 4==i.errcode?(V("tip").close(),t.error("Sorry, you are not eligible for the beta access yet.")):(V("tip").close(),t.error(i.message||i.errmsg||"Login failed. Please try again... ("+i.errcode+")"));else console.log("Token expired detected in login response")}).catch(function(e){V("tip").close(),console.error("Login backend error:",e),11!==e.errcode?t.error(e.message||"Connection to server failed. Please try again."):console.log("Token expired detected in login error")})},logout:function(){S("login_token",null),localStorage.removeItem("login_token"),localStorage.removeItem("survivors_user_info");try{window.parent&&window.parent!==window&&window.parent.postMessage({type:"GAME_LOGOUT"},"*")}catch(e){console.error("Error sending logout message:",e)}console.log("Game logged out successfully")},userDocBtnEvent:function(){V("agreement").show("user")},privacyDocBtnEvent:function(){V("agreement").show("privacy")},error:function(e){return V("tip").config({color:"#FF0000",touchClose:!0}).text(e)},addBtnEvents:function(){var e=this;this.guestBtn&&(this.guestBtn.node.off("click"),this.guestBtn.node.on("click",function(){e.guestBtnEvent()})),this.guestUnisatBtn&&(this.guestUnisatBtn.node.off("click"),this.guestUnisatBtn.node.on("click",function(){e.guestUnisatBtnEvent()}))}}),cc._RF.pop()},{ccBase:"ccBase"}],my:[function(e,t){"use strict";cc._RF.push(t,"4352aStMfRD95MZ0xdwd804","my"),cc.Class({extends:e("popup"),properties:{},show:function(){this.versionLabel=this.find("versionLabel",cc.Label),this.versionLabel.string=H.getVersion(app.config.version),app.config.bundle.version&&(this.versionLabel.string+="_"+app.config.bundle.version),this.playDayLabel=this.find("playDayLabel",cc.Label),this.playDayLabel.string=L("playDayTip",{day:M("data").getPlayDay()});var e=M("data").getDefData();this.uploadDataCd=e.timeCount.uploadData,this.uploadStop=!1,this.find("sid").active=!M("data").player.isGuest;var t=M("data").player.uid,i=t.length>10?t.slice(0,5)+"..."+t.slice(-5):t;return this.find("sid/bg/label",cc.Label).string=i,this.exitBtn=this.find("exitBtn",cc.Button),this.addBtnEvents(),H.show(this)},exitBtnEvent:function(){var e=this;V("confirm").show(L("exitGame")+"?",function(t){t&&(localStorage.removeItem("survivors_auth_token"),localStorage.removeItem("survivors_user_info"),e.notifyWebLogout(),S("login_token",null),e.backLogin())})},notifyWebLogout:function(){try{window.parent&&window.parent!==window&&(console.log("Notifying web about logout"),window.parent.postMessage({type:"GAME_LOGOUT"},"*"))}catch(e){console.error("Error notifying web about logout:",e)}},backLogin:function(){G("audio").stopMusic(),V("login").show(function(e){M("data").init(e),V("index").show(),V("login").remove()}),this.remove(),V("index").remove()},userDocBtnEvent:function(){V("agreement").show("user")},privacyDocBtnEvent:function(){V("agreement").show("privacy")},copyBtnEvent:function(){R("native").copyText(M("data").player.uid),V("tip").success(L("success_action"))},sidBtnEvent:function(){V("inputSid").show()},onEnable:function(){this._super(),E.on(app.root.eventType.LOOP,this.updDataBtn,this)},onDisable:function(){this._super(),E.off(app.root.eventType.LOOP,this.updDataBtn,this)}}),cc._RF.pop()},{popup:"popup"}],native:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"68080+BA6VJc4hQmzWfS9hp","native"),"undefined"==typeof sdkEvent&&(globalThis.sdkEvent={});var n={};n.isAndroid=H.isAndroid(),n.isIos=H.isIos(),n.call=function(e,t){for(var i,r,o,s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];return(i=console).log.apply(i,["==========native.call: "+e+"."+t].concat(a)),n.isAndroid?(e="org/cocos2dx/javascript/"+e,(r=jsb.reflection).callStaticMethod.apply(r,[e,t].concat(a))):n.isIos?Object.keys(a).length>0?(o=jsb.reflection).callStaticMethod.apply(o,[e,t+":"].concat(a)):jsb.reflection.callStaticMethod(e,t):void 0},n.openSetting=function(e){n.isIos&&n.call("AppController","openSetting",e)},n.share=function(e){e=i({},{title:"",content:"",url:""},e),n.isAndroid&&n.call("AppActivity","share","(Ljava/lang/String;)V",JSON.stringify(e)),n.isIos&&n.call("AppController","share",JSON.stringify(e))},n.copyText=function(e){if(n.isAndroid)n.call("AppActivity","copyText","(Ljava/lang/String;)V",e);else if(n.isIos)n.call("AppController","copyText",e);else{var t=e+"",i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var r=getSelection(),o=null;r.rangeCount>0&&(o=r.getRangeAt(0)),document.body.appendChild(i),i.select(),i.selectionStart=0,i.selectionEnd=t.length,document.execCommand("copy"),o&&(r.removeAllRanges(),r.addRange(o)),document.body.removeChild(i)}},t.exports=n,cc._RF.pop()},{}],player:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"ffcf6b03TFCF75unhwnX4F+","player"),cc.Class({extends:e("roleBase"),properties:{},loadAsset:function(e,t){var i=this;if(this.animExt){var n="fight/role/player/"+e;app.loadDir(n,cc.SpriteFrame).then(function(e){e=e.sort(function(e,t){return H.num(e.name)-H.num(t.name)}),$(i.animExt.anim.node,cc.Sprite).spriteFrame=e[0];var n=cc.AnimationClip.createWithSpriteFrames([e[0]],10);n.name="idle",n._duration=.6,n.wrapMode=cc.WrapMode.Loop,n.curveData.props={},n.curveData.props.scaleY=[],n.curveData.props.scaleY.push({frame:0,value:1}),n.curveData.props.scaleY.push({frame:.3,value:.9}),n.curveData.props.scaleY.push({frame:.6,value:1}),n.curveData.props.anchorY=[],n.curveData.props.anchorY.push({frame:0,value:.5}),n.curveData.props.anchorY.push({frame:.3,value:.556}),n.curveData.props.anchorY.push({frame:.6,value:.5}),i.animExt.anim.addClip(n),e.splice(0,1);var r=cc.AnimationClip.createWithSpriteFrames(e,10);r.name="move",r.wrapMode=cc.WrapMode.Loop,i.animExt.anim.addClip(r),t&&t()})}},setMoveSpeed:function(e){this.move.speed=290+10*e},setPropRadius:function(e){this.propRadius=70+30*e},initInput:function(e){this.inputs=e},initData:function(e){this.data=i({},{HP:100,ATK:10},e),this.defData=H.clone(this.data)},init:function(e){var t=this;e=i({},{data:{}},e),this.initBase(),this.skills=[],this.passiveSkills=[],this.camera=$(cc.find("Canvas/Main Camera"),"camera"),this.camera.follow(this.node);var n=cc.find("roleProgressBar",this.node);n||((n=G("pool").get(app.getPrefab("roleProgressBar"))).parent=this.node,n.y=this.node.height,this.find("HP",n).color=cc.color("#00FF00")),this.progressBar={},this.progressBar.HP=$(this.find("HP",n),cc.ProgressBar),this.group="player",this.move={},this.move.dir=cc.Vec2.ZERO,this.move.speed=300,this.dir=cc.Vec2.ZERO,this.initData(e.data),this.setMoveSpeed(1),this.setPropRadius(1),this.isInit=!1,this.loadAsset(this.asset,function(){t.isInit=!0}),this.defHurtCd=.5,this.hurtCd=0,this.target=null,this.interval=.1},onEnter:function(e){this.checkCollide(e)&&this.collide(e)},onStay:function(e){var t=G("role").getEnemy(e.node,!0);if(t){if(this.hurtCd>0)return;return this.hurtCd=this.defHurtCd,void E.emit(G("role").eventType.HURT,{self:t,target:this,skill:null})}this.checkCollide(e,!0)&&this.collide(e)},getDir:function(e){if(void 0===e&&(e=!1),this.inputs){var t=function(t){return e&&t.getRealDir?t.getRealDir():t.getDir()};if(!H.isArr(this.inputs))return t(this.inputs);for(var i=0;i<this.inputs.length;i++){var n=t(this.inputs[i]);if(0!=n.x||0!=n.y)return n}return cc.v2(0,0)}},update:function(e){if(this.isInit&&!(M("fight").stop||(this.progressBar.HP.progress=this.data.HP/this.defData.HP,this.data.HP<=0)))if(this.camera.stop=this.data.HP<=0,this.interval-=e,this.interval<=0&&(this.interval=.1,this.target=this.getTarget()),this.state.sleep.cd>0)this.state.sleep.cd-=e;else if(this.hurtCd>0&&(this.hurtCd-=e),this.move.dir=this.getDir(),this.move.dir.x>0&&(this.bodyNode.scaleX=1),this.move.dir.x<0&&(this.bodyNode.scaleX=-1),this.move.dir.equals(cc.Vec2.ZERO))this.animExt.isPlaying("idle")||this.animExt.play("idle");else{this.dir=this.getDir(!0);var t=this.move.speed*e;this.node.x+=this.move.dir.x*t,this.node.y+=this.move.dir.y*t,this.animExt.isPlaying("move")||this.animExt.play("move")}}}),cc._RF.pop()},{roleBase:"roleBase"}],"polyglot.min":[function(e,t,i){"use strict";cc._RF.push(t,"e3986Sv3exNMIvUaeTUpOBP","polyglot.min"),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof i?t.exports=n(e):e.Polyglot=n(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function i(e){var t,i,n,r={};for(t in e)if(e.hasOwnProperty(t))for(n in i=e[t])r[i[n]]=t;return r}function n(e){return e.replace(/^\s+|\s+$/g,"")}function r(e,t,i){var r;return null!=i&&e?n((r=e.split(h))[s(t,i)]||r[0]):e}function o(e){var t=i(d);return t[e]||t.en}function s(e,t){return u[o(e)](t)}function a(e,t){for(var i in t)"_"!==i&&t.hasOwnProperty(i)&&(e=e.replace(new RegExp("%\\{"+i+"\\}","g"),t[i]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var i in e)t[i]=e[i];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var i;for(var n in e)e.hasOwnProperty(n)&&(i=e[n],t&&(n=t+"."+n),"object"==typeof i?this.extend(i,n):this.phrases[n]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var i,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?i=this.phrases[e]:"string"==typeof t._?i=t._:this.allowMissing?i=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof i&&(t=l(t),n=a(n=r(i,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var h="||||",u={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],poolMgr:[function(e,t){"use strict";cc._RF.push(t,"30d1fE3w4VHRL/4MKnVdTL2","poolMgr");var i=e("helper");t.exports={pool:{},get:function(e,t,n){var r=this;if(e){var o;if(e instanceof cc.Node&&(e.uuid,o=e.name),e instanceof cc.Prefab&&(e.data.uuid,o=e.data.name),n||(n=o),t||(t=o),this.pool[t]||(this.pool[t]=new cc.NodePool(n)),this.pool[t].size()<1){var s=cc.instantiate(e);s._put=function(){r.pool[t]?(s.stopAllActions(),r.pool[t].put(s)):s.destroy()},this.pool[t].put(s)}return i.resetNode(this.pool[t].get())}},put:function(e,t){void 0===t&&(t=!1),e&&(t&&i.findAllchildren(e).forEach(function(e){for(var t in cc.Node.EventType)-1!=t.indexOf("TOUCH_")&&e.targetOff(cc.Node.EventType[t])}),e._put?e._put():e.destroy())},clearAll:function(){if(this.pool)for(var e in this.pool)this.pool[e].clear(),delete this.pool[e]}},cc._RF.pop()},{helper:"helper"}],popup:[function(e,t){"use strict";cc._RF.push(t,"bccfey+iMlDFakIAXykE563","popup"),cc.Class({extends:e("ccPopup"),properties:{},onEnable:function(){G("audio").playEffect("popup"),this.bgNode=this.find("bg"),this.bgNode&&(this.bgNode.on("touchend",function(e){E.stop(e)}),this.bgNode.scaleX=.9,this.bgNode.scaleY=.9,cc.tween(this.bgNode).to(.05,{scaleX:1.1,scaleY:1.1}).to(.05,{scaleX:1,scaleY:1}).start()),this._super()},onDisable:function(){this.bgNode&&this.bgNode.off("touchend"),this._super()},remove:function(){var e=this;this.bgNode?cc.tween(this.bgNode).to(.05,{scaleX:.5,scaleY:.5}).call(function(){e._remove(),e.onRemove()}).start():this._super()}}),cc._RF.pop()},{ccPopup:"ccPopup"}],propModel:[function(e,t){"use strict";cc._RF.push(t,"8b5c0WUl3FB+KqVwOSup8AD","propModel"),t.exports={eventType:{SET_NUM:{gold:"propModel.setNum.gold",equipNum:"propModel.setNum.equipNum",hearts:"propModel.setNum.hearts"}},setNum:function(e,t,i){void 0===t&&(t="+"),i=H.num(i),e in M("data").prop||(M("data").prop[e]=0),"+"==t&&(M("data").prop[e]+=i),"-"==t&&(M("data").prop[e]-=i),"="==t&&(M("data").prop[e]=i),"-"!=t&&"="!=t||M("data").prop[e]<0&&(M("data").prop[e]=0),e in this.eventType.SET_NUM&&E.emit(this.eventType.SET_NUM[e])}},cc._RF.pop()},{}],qq:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"eafc6N+PENMhLWLgVzjLQ2m","qq");var n=e("native"),r=n.isAndroid,o=n.isIos;sdkEvent.QQ={},sdkEvent.QQ.login={};var s={init:function(e){r&&n.call("QQ","init","(Ljava/lang/String;)V",e),o&&n.call("QQ","init",e)},login:{}};s.login.sign=function(){r&&n.call("QQ","login","()V"),o&&n.call("QQ","login")},s.login.onError=function(){},sdkEvent.QQ.login.onError=function(){var e;(e=s.login).onError.apply(e,arguments)},s.login.onClose=function(){},sdkEvent.QQ.login.onClose=function(){var e;(e=s.login).onClose.apply(e,arguments)},s.login.onSign=function(){},sdkEvent.QQ.login.onSign=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];setTimeout(function(){var e;(e=s.login).onSign.apply(e,t)},1e3)},sdkEvent.QQ.share={},s.share={},s.share.toQQ=function(e){e=i({},{title:"",des:"",url:"",imgUrl:""},e),r&&n.call("QQ","shareToQQ","(Ljava/lang/String;)V",JSON.stringify(e)),o&&n.call("QQ","shareToQQ",JSON.stringify(e))},t.exports=s,cc._RF.pop()},{native:"native"}],qs:[function(e,t,i){(function(n){"use strict";cc._RF.push(t,"984ecHY6/hPR4Cf5cLordo9","qs"),function(e){"object"==typeof i&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).Qs=e()}(function(){return function t(i,n,r){function o(a,c){if(!n[a]){if(!i[a]){var l="function"==typeof e&&e;if(!c&&l)return l(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[a]={exports:{}};i[a][0].call(u.exports,function(e){return o(i[a][1][e]||e)},u,u.exports,t,i,n,r)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){var i=String.prototype.replace,n=/%20/g,r=e("./utils"),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports=r.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return i.call(e,n,"+")},RFC3986:function(e){return String(e)}}},o)},{"./utils":5}],2:[function(e,t){var i=e("./stringify"),n=e("./parse"),r=e("./formats");t.exports={formats:r,parse:n,stringify:i}},{"./formats":1,"./parse":3,"./stringify":4}],3:[function(e,t){var i=e("./utils"),n=Object.prototype.hasOwnProperty,r=Array.isArray,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},a=function(e,t){var a,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,u=l.split(t.delimiter,h),d=-1,p=t.charset;if(t.charsetSentinel)for(a=0;a<u.length;++a)0===u[a].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[a]?p="utf-8":"utf8=%26%2310003%3B"===u[a]&&(p="iso-8859-1"),d=a,a=u.length);for(a=0;a<u.length;++a)if(a!==d){var f,v,g=u[a],m=g.indexOf("]="),y=-1===m?g.indexOf("="):m+1;-1===y?(f=t.decoder(g,o.decoder,p,"key"),v=t.strictNullHandling?null:""):(f=t.decoder(g.slice(0,y),o.decoder,p,"key"),v=t.decoder(g.slice(y+1),o.decoder,p,"value")),v&&t.interpretNumericEntities&&"iso-8859-1"===p&&(v=s(v)),v&&"string"==typeof v&&t.comma&&v.indexOf(",")>-1&&(v=v.split(",")),g.indexOf("[]=")>-1&&(v=r(v)?[v]:v),n.call(c,f)?c[f]=i.combine(c[f],v):c[f]=v}return c},c=function(e,t,i){for(var n=t,r=e.length-1;r>=0;--r){var o,s=e[r];if("[]"===s&&i.parseArrays)o=[].concat(n);else{o=i.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);i.parseArrays||""!==a?!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(o=[])[c]=n:o[a]=n:o={0:n}}n=o}return n},l=function(e,t,i){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=i.depth>0&&/(\[[^[\]]*])/.exec(r),a=s?r.slice(0,s.index):r,l=[];if(a){if(!i.plainObjects&&n.call(Object.prototype,a)&&!i.allowPrototypes)return;l.push(a)}for(var h=0;i.depth>0&&null!==(s=o.exec(r))&&h<i.depth;){if(h+=1,!i.plainObjects&&n.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+r.slice(s.index)+"]"),c(l,t,i)}},h=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}};t.exports=function(e,t){var n=h(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?a(e,n):e,o=n.plainObjects?Object.create(null):{},s=Object.keys(r),c=0;c<s.length;++c){var u=s[c],d=l(u,r[u],n);o=i.merge(o,d,n)}return i.compact(o)}},{"./utils":5}],4:[function(e,t){var i=e("./utils"),n=e("./formats"),r=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,a=Array.prototype.push,c=function(e,t){a.apply(e,s(t)?t:[t])},l=Date.prototype.toISOString,h=n.default,u={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:n.formatters[h],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,n,r,o,a,l,h,d,p,f,v,g,m){var y,b=t;if("function"==typeof h?b=h(n,b):b instanceof Date?b=f(b):"comma"===r&&s(b)&&(b=b.join(",")),null===b){if(o)return l&&!g?l(n,u.encoder,m,"key"):n;b=""}if("string"==typeof(y=b)||"number"==typeof y||"boolean"==typeof y||"symbol"==typeof y||"bigint"==typeof y||i.isBuffer(b))return l?[v(g?n:l(n,u.encoder,m,"key"))+"="+v(l(b,u.encoder,m,"value"))]:[v(n)+"="+v(String(b))];var k,E=[];if(void 0===b)return E;if(s(h))k=h;else{var w=Object.keys(b);k=d?w.sort(d):w}for(var S=0;S<k.length;++S){var P=k[S];a&&null===b[P]||(s(b)?c(E,e(b[P],"function"==typeof r?r(n,P):n,r,o,a,l,h,d,p,f,v,g,m)):c(E,e(b[P],n+(p?"."+P:"["+P+"]"),r,o,a,l,h,d,p,f,v,g,m)))}return E},p=function(e){if(!e)return u;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||u.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=n.default;if(void 0!==e.format){if(!r.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=n.formatters[i],a=u.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:u.addQueryPrefix,allowDots:void 0===e.allowDots?u.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:u.charsetSentinel,delimiter:void 0===e.delimiter?u.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:u.encode,encoder:"function"==typeof e.encoder?e.encoder:u.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:u.encodeValuesOnly,filter:a,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:u.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:u.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:u.strictNullHandling}};t.exports=function(e,t){var i,n=e,r=p(t);"function"==typeof r.filter?n=(0,r.filter)("",n):s(r.filter)&&(i=r.filter);var a,l=[];if("object"!=typeof n||null===n)return"";a=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=o[a];i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=0;u<i.length;++u){var f=i[u];r.skipNulls&&null===n[f]||c(l,d(n[f],f,h,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.formatter,r.encodeValuesOnly,r.charset))}var v=l.join(r.delimiter),g=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),v.length>0?g+v:""}},{"./formats":1,"./utils":5}],5:[function(e,t){var i=Object.prototype.hasOwnProperty,n=Array.isArray,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(n(i)){for(var r=[],o=0;o<i.length;++o)void 0!==i[o]&&r.push(i[o]);t.obj[t.prop]=r}}},s=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(i[n]=e[n]);return i};t.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce(function(e,i){return e[i]=t[i],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],n=0;n<t.length;++n)for(var r=t[n],s=r.obj[r.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],h=s[l];"object"==typeof h&&null!==h&&-1===i.indexOf(h)&&(t.push({obj:s,prop:l}),i.push(h))}return o(t),e},decode:function(e,t,i){var n=e.replace(/\+/g," ");if("iso-8859-1"===i)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(r){return n}},encode:function(e,t,i){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===i)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",s=0;s<n.length;++s){var a=n.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=n.charAt(s):a<128?o+=r[a]:a<2048?o+=r[192|a>>6]+r[128|63&a]:a<55296||a>=57344?o+=r[224|a>>12]+r[128|a>>6&63]+r[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(s)),o+=r[240|a>>18]+r[128|a>>12&63]+r[128|a>>6&63]+r[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(n(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(o&&(o.plainObjects||o.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return n(t)&&!n(r)&&(a=s(t,o)),n(t)&&n(r)?(r.forEach(function(n,r){if(i.call(t,r)){var s=t[r];s&&"object"==typeof s&&n&&"object"==typeof n?t[r]=e(s,n,o):t.push(n)}else t[r]=n}),t):Object.keys(r).reduce(function(t,n){var s=r[n];return i.call(t,n)?t[n]=e(t[n],s,o):t[n]=s,t},a)}}},{}]},{},[2])(2)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./formats":void 0,"./parse":void 0,"./stringify":void 0,"./utils":void 0}],reportToAdmin:[function(e,t){"use strict";cc._RF.push(t,"0e9f5cD5/hKY6lN9bapztg5","reportToAdmin"),cc.Class({extends:e("popup"),properties:{},onLoad:function(){this.addBtnEvents(),this.editBox=this.find("editBox",cc.EditBox)},btnEvent:function(e){var t=$(e,cc.Button);if(t.interactable){var i=H.trim(this.editBox.string);if(!i||i.length<2||i.length>200)V("tip").error(L("error_length",{length:"2-200"}));else{t.interactable=!1,V("tip").showLoading();var n={};n.content=i,n.player={},n.player.api=M("data").player.api,M("data").player.isGuest||(n.player.account=M("data").player.account),R("server").api("reportToAdmin",n).then(function(e){if(V("tip").close(),e.error)return t.interactable=!0,void V("tip").error(e.error);V("tip").success(L("success_action"))}).catch(function(e){t.interactable=!0,V("tip").close(),V("tip").error(e)})}}}}),cc._RF.pop()},{popup:"popup"}],rewardItem:[function(e,t){"use strict";cc._RF.push(t,"60694oAykpAoppMh1zHTuDm","rewardItem"),cc.Class({extends:e("ccBase"),properties:{chipNode:cc.Node,iconSprite:cc.Sprite,roleSprite:cc.Sprite,label:cc.Label,randLabel:cc.Label,randSprite:cc.Sprite},_init:function(){this.chipNode.active=!1,this.iconSprite.node.active=!1,this.roleSprite.node.active=!1,this.randLabel.node.active=!1,this.randSprite.node.active=!1},updProp:function(e,t){this._init(),this.iconSprite.node.active=!0,this.iconSprite.spriteFrame=app.find[e+"SpriteFrame"],this.label.string=H.numAbbr(t)},updChip:function(e){var t=this;this._init(),this.chipNode.active=!0,"?"==e.asset&&(this.randLabel.node.active=!0,this.randSprite.node.active=!0),"role"==e.type&&(this.chipNode.color=cc.color(M("role").getChipColor()),"?"==e.asset?(this.randSprite.node.color=cc.color(M("role").getChipColor()),this.randLabel.string=L("hero")):(this.roleSprite.node.active=!0,G("role").loadSpriteFrame(e.asset,function(e){t.roleSprite.spriteFrame=e}))),"skill"==e.type&&(this.chipNode.color=cc.color(M("skill").getChipColor()),"?"==e.asset?(this.randSprite.node.color=cc.color(M("skill").getChipColor()),this.randLabel.string=L("skill")):(this.iconSprite.node.active=!0,this.iconSprite.spriteFrame=G("skill").getSpriteFrame(e.asset))),this.label.string=H.numAbbr(e.chip)}}),cc._RF.pop()},{ccBase:"ccBase"}],roleArrowTip:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"be4d6zHHYNHd5vh7WST+JE8","roleArrowTip"),cc.Class({extends:e("ccBase"),properties:{},init:function(e){e=i({},{self:null,player:null},e),this.self=e.self,this.player=e.player,this.node.scaleX=this.self.node.scaleX,this.node.scaleY=this.self.node.scaleY},hide:function(){this.node.opacity=0},show:function(){this.node.opacity=255},update:function(){if(this.self&&this.player)if(app.screen.isOutView(this.player.node,this.self.node)){var e=H.getWorldPos(this.self.bodyNode);this.node.setWorldPosition(e);var t=this.node.getBoundingBox(),i=app.screen.checkView(this.player.node,this.node,{left:-t.width,top:-t.height/2,bottom:-t.height/2});(i.isMaxX||i.isMaxY)&&this.node.setWorldPosition(i.worldPos);var n=H.getWorldPos(this.node),r=H.getWorldPos(this.player.bodyNode),o=180*Math.atan2(n.y-r.y,n.x-r.x)/Math.PI;this.node.angle=o,this.show()}else this.hide()}}),cc._RF.pop()},{ccBase:"ccBase"}],roleBase:[function(e,t){"use strict";cc._RF.push(t,"2cf1eDNPQtPirlquo5mbTjU","roleBase"),cc.Class({extends:e("ccBase"),properties:{},initBase:function(){var e=this;this.collider=$(this.node,cc.BoxCollider),this.collider||(this.collider=$(this.node,cc.CircleCollider)),this.collider.onCollisionEnter=this.onEnter.bind(this),this.collider.onCollisionStay=this.onStay.bind(this),this.collider.onCollisionExit=this.onExit.bind(this),this.collider.enabled=!0,this.animExt=$(this.node,"animExt"),this.animSprite=$(this.animExt.anim.node,cc.Sprite),this.bodyNode=this.find("body"),this.shadowNode=this.find("shadow"),this.shadowNode&&(this.shadowNode.active=!0),this.animExt.anim.node.opacity=255,this.target=null,this.group="",this.state={},this.state.sleep={cd:0},this.state.stop={cd:0},this.effect={},app.loadDir("./",cc.Material).then(function(t){t.forEach(function(t){e[t.name+"Material"]=t}),e.setMaterial(e.defaultMaterial)})},onEnter:function(){},onStay:function(){},onExit:function(){},collide:function(e){var t=this,i=this.getSkill(e);i&&i.role&&i.role.group!=this.group&&this.scheduleOnce(function(){E.emit(G("role").eventType.HURT,{self:t.target,target:t,skill:i})})},checkCollide:function(e,t){void 0===t&&(t=!1);var i=this.getSkill(e);if(!i)return!1;if(!i.isCollide)return!1;if(t){if(!i.isStay)return!1}else if(i.isStay)return!1;return!0},getSkill:function(e){var t=$(e.node,"skill");if(t){if(!t.role)return;if(t.role.group==this.group)return}return t},getTarget:function(e){return void 0===e&&(e="ASC"),G("role").getRandTargets(this,1,e)[0]},getRandTarget:function(){return G("role").getRandTargets(this,1)[0]},setMaterial:function(e){this.animSprite.setMaterial(0,e)},getMaterial:function(e){return void 0===e&&(e=0),this.animSprite.getMaterial(e)},play:function(e,t){var i=this;if(this.animExt.anim.node.stopAllActions(),"hurt"==e&&(this.setMaterial(this.whiteMaterial),cc.tween(this.animExt.anim.node).to(.15,{},{onUpdate:function(e,t){e.opacity=255*t}}).call(function(){i.animExt.anim.node.opacity=255,i.setMaterial(i.defaultMaterial),t&&t()}).start()),"lose"==e){this.collider.enabled=!1,this.setMaterial(this.dissolveMaterial);var n=this.getMaterial(0),r=0;this.shadowNode&&(this.shadowNode.active=!1),cc.tween(this.animExt.anim.node).to(1,{},{onUpdate:function(e,t){r>=0&&r<=1&&(r+=.03*t),n&&n.setProperty("fade_pct",r)}}).call(function(){i.animExt.anim.node.opacity=0,i.setMaterial(i.defaultMaterial),t&&t()}).start()}}}),cc._RF.pop()},{ccBase:"ccBase"}],roleMgr:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"920dbv1RehJcqsCGI/sr7gW","roleMgr"),t.exports={eventType:{LOSE:"roleMgr.lose",HURT:"roleMgr.hurt"},init:function(e){e=i({},{parent1Node:null,parent2Node:null,effectParent2Node:null},e),this.parent1Node=e.parent1Node,this.parent2Node=e.parent2Node,this.effectParent2Node=e.effectParent2Node,this.roles=[],this.halfWidth=app.screen.width/2,this.halfHeight=app.screen.height/2},create:function(e){e=i({},{asset:"",data:null,target:null},e);var t=G("pool").get(app.getPrefab(e.asset)),n=$(t,"player");if(n||(n=this.getEnemy(t)),n.uid=H.uid(),n.asset=e.asset,n.node.parent=this.parent1Node,n.init({target:e.target,data:e.data}),e.target&&"player"==e.target.group&&e.data.bossLevel>0){var r=G("pool").get(app.getPrefab("roleArrowTip")),o=H.add$(r,"roleArrowTip",!0);o.node.parent=this.effectParent2Node,o.init({self:n,player:e.target}),o.hide(),n.arrowTip=o}return this.roles.push(n),n},createGroup:function(e){e=i({},{asset:"",target:null,data:null},e);for(var t=[],n=0;n<20;n++){var r=G("pool").get(app.getPrefab(e.asset)),o=$(r,"enemyGroup");o.uid=H.uid(),o.asset=e.asset,o.node.parent=this.parent2Node,o.init({target:e.target,data:e.data}),this.roles.push(o),t.push(o)}return this.setGroupEnemyWorldPos(t,e.target),t.forEach(function(e){e.initFirst(t[0])}),t},remove:function(e){for(var t in e.arrowTip&&G("pool").put(e.arrowTip.node),e.effect)G("pool").put(e.effect[t].node);G("pool").put(e.node),this.roles=this.roles.filter(function(t){return t.uid!=e.uid})},getEnemyWorldPos:function(e){var t=this.halfWidth;this.halfWidth<this.halfHeight&&(t=this.halfHeight);var i=t,n=H.randNum(0,360),r=t*Math.cos(n),o=i*Math.sin(n),s=e.node.getWorldPosition(cc.Vec2.ZERO);return cc.v2(r+s.x,o+s.y)},setGroupEnemyWorldPos:function(e,t){var i=e[0];i.node.setWorldPosition(this.getEnemyWorldPos(t)),e.forEach(function(e,t){if(t>0){var n=H.randNum(-150,150),r=H.randNum(-150,150);e.node.x=i.node.x+n,e.node.y=i.node.y+r}})},isOut:function(e,t){var i=e.getWorldPosition(cc.Vec2.ZERO),n=t.getWorldPosition(cc.Vec2.ZERO),r=t.getBoundingBox(),o=r.width*(.5-t.anchorX),s=r.height*(.5-t.anchorY),a=H.dist(i,n),c=n.sub(i).normalize(),l=cc.Vec2.ZERO;l.x=c.x*a,l.y=c.y*a,l.x<0&&(l.x+=r.width/2+o),l.x>0&&(l.x-=r.width/2-o),l.y<0&&(l.y+=r.height/2+s),l.y>0&&(l.y-=r.height/2-s,l.y+=app.screen.top);var h=.7*app.screen.height;return Math.abs(l.x)>h||Math.abs(l.y)>h},getEnemy:function(e,t){void 0===t&&(t=!1);var i=$(e,"enemyRvo");if(i||(i=$(e,"enemyNear")),i||(i=$(e,"enemyRange")),i||(i=$(e,"enemyGroup")),!(i&&t&&i.data.HP<=0))return i},getRole:function(e,t){void 0===t&&(t=!1);var i=$(e,"player");if(i||(i=this.getEnemy(e)),!(i&&t&&i.data.HP<=0))return i},getTargets:function(e,t,i){void 0===t&&(t=1),void 0===i&&(i="ASC");var n=this.roles.filter(function(t){return t.group!=e.group&&t.data.HP>0&&app.screen.isInView(e.node,t.node)});return n.length<1?[]:(n.sort(function(t,n){var r=H.dist(t.bodyNode,e.bodyNode),o=H.dist(n.bodyNode,e.bodyNode);return"ASC"==i?r-o:o-r}),n.slice(0,t))},getRandTargets:function(e,t){void 0===t&&(t=1);var i=this.roles.filter(function(t){return t.group!=e.group&&t.data.HP>0&&app.screen.isInView(e.node,t.node)});return H.randArr(i,t,!0)},setHP:function(e){var t=this;if((e=i({},{self:null,target:null,skill:null,action:"-",value:0},e)).self&&e.target&&!(e.self.data.HP<=0||e.target.data.HP<=0)&&("player"!=e.self.group||app.screen.isInView(e.self.node,e.target.node))){var n=!1,r=!1,o=e.value;if(o<=0){if(o=e.self.data.ATK,e.skill){if("player"==e.self.group){var s=H.num(e.self.data[e.skill.skillName+"Level"]);s&&(o+=s),o+=o*(H.num(e.self.data[e.skill.skillName+"Pencent"],2)/100)}(o*=e.skill.hurtPercent/100)<1&&(o=1)}H.calOdds(e.self.data.critOdds)&&(o*=1.5,n=!0),H.calOdds(e.self.data.doubleOdds)&&(o*=2,r=!0)}o=H.num(o),"+"==e.action&&(e.target.data.HP+=o,e.target.data.HP>=e.target.defData.HP&&(e.target.data.HP=e.target.defData.HP)),"-"==e.action&&(e.target.data.HP-=o,e.target.data.HP<=0&&(e.target.data.HP=0),"player"==e.self.group&&e.skill&&(e.skill.isTemp||M("fight").setSkillNum(e.skill.skillName,"hurt",o,"+")),e.self.group,G("audio").playEffect("hurt")),"player"==e.self.group&&G("effect").showTip({by:e.target.bodyNode,string:("-"==e.action?"":"+")+H.num(o),fontSize:n||r?70:50,color:"+"==e.action?"#00FF00":n||r?"#FF0000":"#FFFFFF",addY:.1*e.target.node.height}),e.target.data.HP<=0?(e.target.data.HP=0,"player"==e.target.group?E.emit(this.eventType.LOSE,e.target):(E.emit(this.eventType.LOSE,e.target),e.target.play("lose",function(){t.remove(e.target)}))):"-"==e.action&&e.target.play("hurt")}},loadSpriteFrame:function(e,t,i){void 0===i&&(i="player"),app.load("./fight/role/"+i+"/"+e+"/0",cc.SpriteFrame).then(function(e){t&&t(e)})}},cc._RF.pop()},{}],roleModel:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"e713fSrPrFKM6gOp6fCgm3e","roleModel"),t.exports={eventType:{ADD:"roleModel.add#asset",UP_LEVEL:"roleModel.upLevel#asset",SELECT:"roleModel.setSelect#asset",SET_CHIP:"roleModel.setChip#asset"},createPlayerData:function(e){var t=M("data").roles.filter(function(t){return t.asset==e})[0],i={};for(var n in i.HP=100+5*t.HPLevel,i.ATK=10+t.ATKLevel,M("data").skill)i[n]=M("data").skill[n];for(var r in i)i[r]=H.num(i[r]);if(this.getAttrs().forEach(function(e){i[e.key]=0}),!t.selected)return i;var o=this.getHelpData();return i.HP+=o.HP,i.ATK+=o.ATK,M("data").equips.forEach(function(e){"HP"in e&&(i.HP+=e.HP),"ATK"in e&&(i.ATK+=e.ATK),e.attrs&&e.attrs.forEach(function(e){"HPPencent"==e.key&&(i.HP+=H.num(i.HP*(e.value/100))),"ATKPencent"==e.key&&(i.ATK+=H.num(i.ATK*(e.value/100))),i[e.key]+=e.value,i[e.key]=H.num(i[e.key],2)})}),i},getHelpData:function(e){var t={HP:0,ATK:0},i=0,n=function(){M("data").roles.filter(function(e){return!e.selected}).forEach(function(e){var t=e.HPLevel+1,n=e.ATKLevel+1;i+=t,i+=n})},r=0,o=function(){for(var e in M("data").skill)r+=M("data").skill[e]};e?("role"==e&&n(),"skill"==e&&o()):(n(),o()),i=H.num(i);for(var s=1;s<=i;s++)s%2==0?t.ATK+=1:t.HP+=2;for(var a=1;a<=r;a++)a%2==0?t.ATK+=.5:t.HP+=1;return t.HP=H.num(t.HP),t.ATK=H.num(t.ATK),t},getAllUpDatas:function(e){var t=this,i=0,n=[];M("data").roles.filter(function(i){var n=t.calUpLevel(i.asset,e,1);return H.isEmpty(n.error)}).forEach(function(t){var r=t[e+"Level"];i+=r,n.push({asset:t.asset,level:r})});var r=H.num(i/n.length);return n=n.filter(function(e){return e.level<=r}).sort(function(e,t){return e.level-t.level})},calUpLevel:function(e,t,i){void 0===t&&(t="ATK"),void 0===i&&(i=1);var n={chip:0,gold:0,upNum:0,error:{}};if(i<1)return n;for(var r=function(e){var i={},n=0,r=0;return"ATK"==t?(n=2,r=500):(n=1,r=400),i.chip=n+e*n,i.gold=r+e*r,i},o=this.getPlayerData(e)[t+"Level"],s=i;!(i&&--s<0);){var a=r(o);n.chip+=a.chip,n.gold+=a.gold,o++,n.upNum++}return this.getChip(e)<n.chip&&(n.error.chip=L("error_chip")),M("data").prop.gold<n.gold&&(n.error.gold=L("error_gold")),n},upLevel:function(e,t,i){var n=this;void 0===t&&(t="ATK"),void 0===i&&(i=1);var r=this.calUpLevel(e,t,i);return H.isEmpty(r.error)&&R("server").api("upLevelRole",{asset:e,upRes:r,upType:t}).then(function(i){0==i.errcode?(n.setChip(e,"-",r.chip),M("prop").setNum("gold","-",r.gold),n.getPlayerData(e)[t+"Level"]+=r.upNum,E.emit(n.eventType.UP_LEVEL,e)):3==i.errcode?r.error.chip=L("error_chip"):4==i.errcode?r.error.gold=L("error_gold"):r.error.other="errors"}),r},calAdd:function(e){var t={chip:0,gold:0,error:{}};M("data").roles.filter(function(t){return t.asset==e})[0]&&(t.error.has=L("error_has_role"));var i=this.getPlayerBaseData(e);return i||(t.error.chip=L("error_role")),t.chip=50*(i.mul-1),t.chip<50&&(t.chip=50),t.gold=5e3*(i.mul-1),t.gold<5e3&&(t.gold=5e3),this.getChip(e)<t.chip&&(t.error.chip=L("error_chip")),M("data").prop.gold<t.gold&&(t.error.gold=L("error_gold")),t},add:function(e){var t=this.calAdd(e);return H.isEmpty(t.error)&&(this.setChip(e,"-",t.chip),M("prop").setNum("gold","-",t.gold),M("data").roles.push({asset:e,ATKLevel:0,HPLevel:0}),E.emit(this.eventType.ADD,e)),t},isTip:function(e,t){var i=this;void 0===t&&(t="ATK");var n=!1;return"add"==e&&this.getPlayerBaseDatas().forEach(function(e){if(!M("data").roles.filter(function(t){return t.asset==e.asset})[0]){var t=i.calAdd(e.asset);H.isEmpty(t.error)&&(n=!0)}}),"upLevel"==e&&M("data").roles.forEach(function(r){if("upLevel"==e){var o=i.calUpLevel(r.asset,t,1);H.isEmpty(o.error)&&(n=!0)}}),n},createEnemyData:function(e){var t=(e=i({},{level:0,bossLevel:0,calPercent:100},e)).calPercent/100,n={};for(var r in n.HP=20*e.level*t,n.HP<10&&(n.HP=10),e.bossLevel&&(n.HP=200*n.HP*e.bossLevel),n.ATK=2*e.level*t,n.ATK<1&&(n.ATK=1),e.bossLevel&&(n.ATK=5*n.ATK*e.bossLevel),n.bossLevel=e.bossLevel,n)n[r]=H.num(n[r]);return n},setSelect:function(e){var t=this,i=this.getPlayerData(e);i.selected||R("server").api("selectRole",{asset:e}).then(function(n){0==n.errcode&&(M("data").roles.forEach(function(e){delete e.selected}),i.selected=!0,E.emit(t.eventType.SELECT,e))})},setChip:function(e,t,i){void 0===t&&(t="+"),M("data").setChip("role",e,t,i),E.emit(this.eventType.SET_CHIP,e)},getAttrs:function(e){void 0===e&&(e="*");var t=[];return"*"!=e&&"base"!=e||(t.push({name:L("HPPencent"),key:"HPPencent"}),t.push({name:L("ATKPencent"),key:"ATKPencent"}),t.push({name:L("critOdds"),key:"critOdds"}),t.push({name:L("doubleOdds"),key:"doubleOdds"})),"*"!=e&&"skill"!=e||M("skill").getBaseDatas().forEach(function(e){t.push({asset:e.name,name:L("skillInfo."+e.name+".title"),key:e.name+"Pencent"})}),t},getChip:function(e){var t=M("data").chip.role[e];return H.num(t)},getChipColor:function(){return"#FFAA00"},getPlayerData:function(e){return M("data").roles.filter(function(t){return t.asset==e})[0]},getPlayerBaseData:function(e){return this.getPlayerBaseDatas().filter(function(t){return t.asset==e})[0]},getPlayerBaseDatas:function(){var e=[];return e.push({asset:"allianceGuard",skillName:"sword"}),e.push({asset:"orcWarrior",skillName:"knive"}),e.forEach(function(e,t){e.mul=t+1}),e},getGroupAssets:function(){return["batGroup","blackVultureGroup"]},getNearAssets:function(){return["bat","boar","sheep","wolf","greenMurloc","orangeCrab","darkScorpion","redRaptor","lion","blackVulture"]},getRangeAssets:function(){return["succubus","voidwalker","felhound"]}},cc._RF.pop()},{}],root:[function(e,t){"use strict";cc._RF.push(t,"62ae7ZwU/tOw6zRvdqb9c4o","root"),cc.Class({extends:e("ccBase"),properties:{},ctor:function(){this.eventType={LOOP:"root.loop"}},onLoad:function(){},run:function(){var e=this;console.log("Enter run ... "),this.isRun||(this.isRun=!0,this.stop=!1,this.runTime=0,this.schedule(this.loop,1),this.achiveTips=[],V("login").show(function(t){console.log("run() ... loginData ",t),t.success&&(e.onShow(),G("audio").init(M("data").setting.audio),V("index").show(),V("login").remove(),e.checkAchive())}))},loop:function(){if(!this.stop){if(this.runTime+=1,this.runTime%60==0&&this.checkVersion(),S("login_token"))for(var e in M("data").timeCount)M("data").timeCount[e]+=1;E.emit(this.eventType.LOOP,this.runTime)}},onShow:function(){if(this.stop=!1,S("login_token")){var e=0,t=H.num(M("data").player.hideTime);for(var i in t>1&&(e=H.num(H.time()-t)),M("data").timeCount)M("data").timeCount[i]+=e}},onHide:function(){this.stop=!0,S("login_token")&&(M("data").player.hideTime=H.time(),M("data").save())},checkVersion:function(){var e=this;H.isNative()&&(this._dontCheckVersion||this._isShowCheckVersion||cc.assetManager.loadRemote(app.loader.url+"?"+(new Date).getTime(),{ext:".json"},function(t,i){if(!t){var n=i.json;app.config.version==n.version&&app.config.bundle.version==n.bundle.version||(e._isShowCheckVersion=!0,V("confirm").show(L("error_version"),function(t){if(e._isShowCheckVersion=!1,t)return S("login_token")&&M("data").save(),void H.exitGame();e._dontCheckVersion=!0}))}}))},checkAchive:function(){for(var e in M("data").achive)for(var t in M("data").achive[e])this.onAchiveInc(e,t)},onAchiveInc:function(e,t){if(M("achive").isDone(e,t)){var i=M("achive").getLevel(e,t);if(this.achiveTips.filter(function(n){return n.type==e&&n.assetOrKey==t&&n.level==i})[0])return;this.achiveTips.push({type:e,assetOrKey:t,level:i}),G("audio").playTipEffect("tip"),"useRole"==e?G("role").loadSpriteFrame(t,function(i){V("tip").showTop(M("achive").getTopTip(e,t),i,"#F6DB96")}):"useSkill"==e?V("tip").showTop(M("achive").getTopTip(e,t),G("skill").getSpriteFrame(t,1),"#F6DB96"):V("tip").showTop(M("achive").getTopTip(e,t),app.find[t+"SpriteFrame"],"#F6DB96")}},onEnable:function(){cc.game.on(cc.game.EVENT_SHOW,this.onShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),E.on(M("achive").eventType.INC_COUNT,this.onAchiveInc,this),E.on(M("achive").eventType.INC_LEVEL,this.onAchiveInc,this)},onDisable:function(){cc.game.off(cc.game.EVENT_SHOW,this.onShow,this),cc.game.off(cc.game.EVENT_HIDE,this.onHide,this),E.off(M("achive").eventType.INC_COUNT,this.onAchiveInc,this),E.off(M("achive").eventType.INC_LEVEL,this.onAchiveInc,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],screen:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"737c4dNbPhP1qOzzBjE9WzE","screen"),cc.Class({editor:{menu:"base/screen"},extends:cc.Component,properties:{},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);this.top=0;var t=window.innerWidth,i=window.innerHeight,n=(this.isMobileDevice(),cc.view.getCanvasSize()),r=n.width/n.height,o=.5625*i;console.log("onLoad originalRatio ... ",r,i,t,o,.5625),cc.view.setFrameSize(o,i),e.fitWidth=!0,e.fitHeight=!0,this.width=cc.winSize.width,this.height=cc.winSize.height},isMobileDevice:function(){if(cc.sys.isBrowser){var e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)}return cc.sys.isMobile},isInView:function(e,t,n){n=i({},{top:0,bottom:0,left:0,right:0},n);var r=e.getWorldPosition(cc.Vec2.ZERO),o=t.getWorldPosition(cc.Vec2.ZERO),s=t.getBoundingBox(),a=s.width*(.5-t.anchorX),c=s.height*(.5-t.anchorY),l=H.dist(r,o),h=o.sub(r).normalize(),u=cc.Vec2.ZERO;return u.x=h.x*l,u.y=h.y*l,u.x<0&&(u.x-=s.width/2-a,u.x-=n.left),u.x>0&&(u.x+=s.width/2+a,u.x+=n.right),u.y<0&&(u.y-=s.height/2-c,u.y-=n.bottom),u.y>0&&(u.y+=s.height/2+c,u.y+=n.top,u.y+=this.top),Math.abs(u.x)<this.width/2&&Math.abs(u.y)<this.height/2},isOutView:function(e,t,n){n=i({},{top:0,bottom:0,left:0,right:0},n);var r=e.getWorldPosition(cc.Vec2.ZERO),o=t.getWorldPosition(cc.Vec2.ZERO),s=t.getBoundingBox(),a=s.width*(.5-t.anchorX),c=s.height*(.5-t.anchorY),l=H.dist(r,o),h=o.sub(r).normalize(),u=cc.Vec2.ZERO;return u.x=h.x*l,u.y=h.y*l,u.x<0&&(u.x+=s.width/2+a,u.x-=n.left),u.x>0&&(u.x-=s.width/2-a,u.x+=n.right),u.y<0&&(u.y+=s.height/2+c,u.y-=n.bottom),u.y>0&&(u.y-=s.height/2-c,u.y+=n.top,u.y+=this.top),Math.abs(u.x)>this.width/2||Math.abs(u.y)>this.height/2},checkView:function(e,t,n){n=i({},{top:0,bottom:0,left:0,right:0},n);var r=e.getWorldPosition(cc.Vec2.ZERO),o=t.getWorldPosition(cc.Vec2.ZERO),s=t.getBoundingBox(),a=s.width*(.5-t.anchorX),c=s.height*(.5-t.anchorY),l=H.dist(r,o),h=o.sub(r).normalize(),u=cc.Vec2.ZERO;u.x=h.x*l,u.y=h.y*l;var d={};return d.worldPos=o,d.isMaxX=!1,d.isMaxY=!1,u.x<0&&(u.x-=s.width/2-a,u.x-=n.left),u.x>0&&(u.x+=s.width/2+a,u.x+=n.right),u.y<0&&(u.y-=s.height/2-c,u.y-=n.bottom),u.y>0&&(u.y+=s.height/2+c,u.y+=n.top,u.y+=this.top),(Math.abs(u.x)>this.width/2||Math.abs(u.y)>this.height/2)&&(Math.abs(u.x)>this.width/2&&(d.isMaxX=!0,u.x<0&&(d.worldPos.x+=-this.width/2-u.x),u.x>0&&(d.worldPos.x-=u.x-this.width/2)),Math.abs(u.y)>this.height/2&&(d.isMaxY=!0,u.y<0&&(d.worldPos.y+=-this.height/2-u.y),u.y>0&&(d.worldPos.y-=u.y-this.height/2))),d}}),cc._RF.pop()},{}],selectLevel:[function(e,t){"use strict";cc._RF.push(t,"5fa2eRpcSJOaYCbiO7sC53X","selectLevel"),cc.Class({extends:e("ccBase"),properties:{},onLoad:function(){var e=this;this.prevBtn=this.find("prevBtn",cc.Button),this.nextBtn=this.find("nextBtn",cc.Button),this.startBtn=this.find("startBtn",cc.Button),this.levelLabel=this.find("levelLabel",cc.Label,this.startBtn.node),this.chipRewardItemNode=this.find("chipRewardItem",this.startBtn.node),this.chipRewardItemNode.active=!1,this.chipRewardItems=[],this.updLevel(),this.roleSprite=this.find("role/icon",cc.Sprite),this.updRoleSprite();var t=function(t,i){var n=!1;t.node.on(cc.Node.EventType.TOUCH_START,function(){n=!0,console.log(t.node.name+" touch started")},e),t.node.on(cc.Node.EventType.TOUCH_END,function(e){console.log(t.node.name+" touch ended, started: "+n),n&&(n=!1,i(e))},e),t.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){console.log(t.node.name+" touch cancelled"),n=!1},e)};t(this.prevBtn,function(){e.prevBtn.interactable&&(console.log("Executing prev button callback"),M("fight").setSelectLevel("-",1),G("audio").playEffect("popup"))}),t(this.nextBtn,function(){e.nextBtn.interactable&&(M("fight").setSelectLevel("+",1),G("audio").playEffect("popup"))}),t(this.startBtn,function(){M("data").roles.filter(function(e){return e.selected})[0]?V("animMask").show("close",function(){M("fight").stop=!0,V("animMask").show("open",function(e){e.remove(),M("fight").stop=!1}),V("fight").show(),V("index").remove()}):V("tip").error(L("error_role"))})},updLevel:function(){var e=this;this.levelLabel.string="Lv"+H.numAbbr(M("data").fight.selectLevel),M("data").fight.level<=1?(this.prevBtn.interactable=!1,this.nextBtn.interactable=!1):M("data").fight.selectLevel<=1?(this.prevBtn.interactable=!1,this.nextBtn.interactable=!0):M("data").fight.selectLevel>=M("data").fight.level?(this.prevBtn.interactable=!0,this.nextBtn.interactable=!1):(this.prevBtn.interactable=!0,this.nextBtn.interactable=!0),this.chipRewardItems&&this.chipRewardItems.forEach(function(e){G("pool").put(e.node,!0)}),this.chipRewardItems=[],M("fight").getRewardChipAssets(M("data").fight.selectLevel).forEach(function(t){var i={};i.node=G("pool").get(e.chipRewardItemNode,"selectLevelChipRewardItemNode"),i.node.parent=e.chipRewardItemNode.parent,i.chipNode=e.find("chip",i.node),i.roleIconSprite=e.find("roleIcon",cc.Sprite,i.node),i.roleIconSprite.node.active=!1,i.skillIconSprite=e.find("skillIcon",cc.Sprite,i.node),i.skillIconSprite.node.active=!1,"role"==t.type&&(i.chipNode.color=cc.color(M("role").getChipColor()),i.roleIconSprite.node.active=!0,G("role").loadSpriteFrame(t.asset,function(e){i.roleIconSprite.spriteFrame=e})),"skill"==t.type&&(i.chipNode.color=cc.color(M("skill").getChipColor()),i.skillIconSprite.node.active=!0,i.skillIconSprite.spriteFrame=G("skill").getSpriteFrame(t.asset,0)),e.chipRewardItems.push(i)})},updRoleSprite:function(){var e=this,t=M("data").roles.filter(function(e){return e.selected})[0];G("role").loadSpriteFrame(t.asset,function(t){e.roleSprite.spriteFrame=t})},onSetSelectLevel:function(){this.updLevel()},onSelectRole:function(){this.updRoleSprite()},onEnable:function(){E.on(M("fight").eventType.SET_SELECT_LEVEL,this.onSetSelectLevel,this),E.on(M("role").eventType.SELECT,this.onSelectRole,this)},onDisable:function(){E.off(M("fight").eventType.SET_SELECT_LEVEL,this.onSetSelectLevel,this),E.off(M("role").eventType.SELECT,this.onSelectRole,this)}}),cc._RF.pop()},{ccBase:"ccBase"}],server:[function(e,t){"use strict";function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),a=new L(n||[]);return r(s,"_invoke",{value:w(e,i,a)}),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(R){return{type:"throw",arg:R}}}e.wrap=h;var d={};function p(){}function f(){}function v(){}var g={};l(g,s,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&n.call(y,s)&&(g=y);var b=v.prototype=p.prototype=Object.create(g);function k(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){function i(r,o,s,a){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,s,a)},function(e){i("throw",e,s,a)}):t.resolve(h).then(function(e){l.value=e,s(l)},function(e){return i("throw",e,s,a)})}a(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return o=o?o.then(r,r):r()}})}function w(e,t,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return{value:void 0,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=S(s,i);if(a){if(a===d)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var c=u(e,t,i);if("normal"===c.type){if(n=i.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n="completed",i.method="throw",i.arg=c.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),l(E.prototype,a,function(){return this}),e.AsyncIterator=E,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new E(h(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then(function(e){return e.done?e.value:s.next()})},k(b),l(b,c,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return s.type="throw",s.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),_(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;_(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function n(e,t,i,n,r,o,s){try{var a=e[o](s),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,r)}function r(e){return function(){var t=this,i=arguments;return new Promise(function(r,o){var s=e.apply(t,i);function a(e){n(s,r,o,a,c,"next",e)}function c(e){n(s,r,o,a,c,"throw",e)}a(void 0)})}}cc._RF.push(t,"03fc0839L1LaJpW2znGsCvc","server");var o=e("crypt"),s=e("../../scripts/libs/axios");t.exports={url:"https://is-backend-test-api.potato-nonofficial.xyz",key:"",encode:function(e){return o.encode(e,this.key)},decode:function(e){return o.decode(e,this.key)},handleTokenExpired:function(e){void 0===e&&(e="Login session expired. Please login again."),console.log("Token expired, clearing token..."),S("login_token",null),localStorage.removeItem("login_token"),console.log("Token expired, clearing token... done");try{window.parent&&window.parent!==window&&window.parent.postMessage({type:"GAME_LOGOUT",reason:"token_expired"},"*")}catch(i){console.error("Error sending logout message:",i)}console.log("handleTokenExpired ... ",e),"function"==typeof V&&(V("tip").close(),V("tip").config({color:"#FF0000",touchClose:!0}).text(e));var t=cc.find("Canvas/login");return t&&t.getComponent&&"function"==typeof t.getComponent("login").logout&&t.getComponent("login").logout(),{errcode:11,message:e}},api:function(e,t){var n=this;return r(i().mark(function r(){return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:void 0===t&&(t={}),console.log("enter api ... ",e,t),i.t0=e,i.next="login"===i.t0?5:"getPlayerInfo"===i.t0?6:"subsinfo"===i.t0?7:"upLevelRole"===i.t0?8:"upLevelSkill"===i.t0?9:"gameStart"===i.t0?10:"gameSyncFight"===i.t0?11:"gameRevive"===i.t0?12:"gameClaimAll"===i.t0?13:"gameDoubleReward"===i.t0?14:"gameEnd"===i.t0?15:"selectRole"===i.t0?16:"buyRole"===i.t0?17:"openEquipBox"===i.t0?18:"putOnEquip"===i.t0?19:"sellEquip"===i.t0?20:"claimAchiveReward"===i.t0?21:"getHearts"===i.t0?22:"buyHearts"===i.t0?23:24;break;case 5:return i.abrupt("return",n._loginRequest(t));case 6:return i.abrupt("return",n._getPlayerInfo());case 7:return i.abrupt("return",n._subsInfo(t));case 8:return i.abrupt("return",n._upLevelRole(t));case 9:return i.abrupt("return",n._upLevelSkill(t));case 10:return i.abrupt("return",n._gameStart(t));case 11:return i.abrupt("return",n._gameSyncFight(t));case 12:return i.abrupt("return",n._gameRevive(t));case 13:return i.abrupt("return",n._gameClaimAll(t));case 14:return i.abrupt("return",n._gameDoubleReward(t));case 15:return i.abrupt("return",n._gameEnd(t));case 16:return i.abrupt("return",n._selectRole(t));case 17:return i.abrupt("return",n._buyRole(t));case 18:return i.abrupt("return",n._openEquipBox(t));case 19:return i.abrupt("return",n._putOnEquip(t));case 20:return i.abrupt("return",n._sellEquip(t));case 21:return i.abrupt("return",n._claimAchiveReward(t));case 22:return i.abrupt("return",n._getHearts());case 23:return i.abrupt("return",n._buyHearts());case 24:return i.abrupt("return",Promise.resolve({errcode:404,message:'API name "'+e+'" not found'}));case 25:case"end":return i.stop()}},r)}))()},_upLevelRole:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.url+"/upLevelRole",i.prev=1,o=S("login_token"),i.next=5,s({method:"POST",url:r,data:{asset:e.asset,upNum:e.upRes.upNum,upType:e.upType},headers:{Authorization:"Bearer "+o}});case 5:return a=i.sent,console.log("after upLevelRole ... ",a),i.abrupt("return",a.data);case 10:return i.prev=10,i.t0=i.catch(1),i.abrupt("return",t.handleRequestError(i.t0,"_upLevelRole"));case 13:case"end":return i.stop()}},n,null,[[1,10]])}))()},_upLevelSkill:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.url+"/upLevelSkill",i.prev=1,o=S("login_token"),i.next=5,s({method:"POST",url:r,data:{asset:e.asset,upNum:e.upRes.upNum},headers:{Authorization:"Bearer "+o}});case 5:return a=i.sent,console.log("after _upLevelSkill ... ",a),i.abrupt("return",a.data);case 10:return i.prev=10,i.t0=i.catch(1),i.abrupt("return",t.handleRequestError(i.t0,"_upLevelSkill"));case 13:case"end":return i.stop()}},n,null,[[1,10]])}))()},_loginRequest:function(e){var t=this;return r(i().mark(function n(){var r,o,a,c,l,h;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.walletAddress,o=e.sign,a=e.publicKey,c=e.token,console.log("_loginRequest received data:",{hasWalletAddress:!!r,hasSign:!!o,hasPublicKey:!!a,hasToken:!!c,tokenType:typeof c,tokenValue:c,tokenIsUndefinedString:"undefined"===c}),c){i.next=5;break}if(r&&o&&a){i.next=5;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing walletAddress or sign"}));case 5:if("undefined"!==c){i.next=8;break}return console.error("ERROR: Token is the string 'undefined', not a valid token!"),i.abrupt("return",Promise.resolve({errcode:12,message:'Invalid token: received "undefined" string instead of actual token'}));case 8:return l=t.url+"/login",i.prev=9,console.log("Sending login request to backend with:",{walletAddress:r?r.substring(0,5)+"...":null,hasSign:!!o,hasPublicKey:!!a,tokenLength:c?c.length:0,tokenPrefix:c?c.substring(0,10)+"...":null}),i.next=13,s({method:"POST",url:l,data:{walletAddress:e.walletAddress,sign:e.sign,publicKey:e.publicKey,token:c},validateStatus:function(){return!0}});case 13:if(401!==(h=i.sent).status||!h.data||11!==h.data.errcode){i.next=16;break}return i.abrupt("return",t.handleTokenExpired(h.data.message||"Login session expired. Please login again."));case 16:if(200===h.status){i.next=18;break}return i.abrupt("return",t.handleRequestError({response:h},"login"));case 18:return i.abrupt("return",h.data);case 21:return i.prev=21,i.t0=i.catch(9),i.abrupt("return",t.handleRequestError(i.t0,"login"));case 24:case"end":return i.stop()}},n,null,[[9,21]])}))()},_subsInfo:function(){var e=this;return r(i().mark(function t(){var n,r,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=S("login_token")){t.next=3;break}return t.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return r=e.url+"/subs/info",t.prev=4,t.next=7,s({method:"GET",url:r,headers:{Authorization:"Bearer "+n},data:{}});case 7:return o=t.sent,console.log("after subs/info ... ",o),t.abrupt("return",o.data);case 12:return t.prev=12,t.t0=t.catch(4),t.abrupt("return",e.handleRequestError(t.t0,"_subsInfo"));case 15:case"end":return t.stop()}},t,null,[[4,12]])}))()},_gameStart:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token"),console.log("enter _gameStart token ... ",r),r){i.next=4;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 4:return o=t.url+"/game/start",i.prev=5,i.next=8,s({method:"POST",url:o,data:{selectLevel:e.selectLevel},headers:{Authorization:"Bearer "+r}});case 8:return a=i.sent,console.log("after game/start ... ",a),i.abrupt("return",a.data);case 13:return i.prev=13,i.t0=i.catch(5),i.abrupt("return",t.handleRequestError(i.t0,"_gameStart"));case 16:case"end":return i.stop()}},n,null,[[5,13]])}))()},_gameSyncFight:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/game/syncFight",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"gameSyncFight"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_gameRevive:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/game/revive",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"gameRevive"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_gameClaimAll:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/game/claimAll",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"gameClaimAll"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_gameDoubleReward:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/game/doubleReward",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"gameDoubleReward"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_openEquipBox:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/openEquipBox",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"_openEquipBox"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_putOnEquip:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/putOnEquip",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"_putOnEquip"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_sellEquip:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/sellEquip",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"_sellEquip"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_claimAchiveReward:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/claimAchiveReward",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"_claimAchiveReward"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_selectRole:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/selectRole",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"selectRole"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_buyRole:function(e){var t=this;return r(i().mark(function n(){var r,o,a;return i().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=S("login_token")){i.next=3;break}return i.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return o=t.url+"/buyRole",i.prev=4,i.next=7,s({method:"POST",url:o,data:e,headers:{Authorization:"Bearer "+r}});case 7:return a=i.sent,i.abrupt("return",a.data);case 11:return i.prev=11,i.t0=i.catch(4),i.abrupt("return",t.handleRequestError(i.t0,"buyRole"));case 14:case"end":return i.stop()}},n,null,[[4,11]])}))()},_getHearts:function(){var e=this;return r(i().mark(function t(){var n,r,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=S("login_token")){t.next=3;break}return t.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return r=e.url+"/hearts",t.prev=4,t.next=7,s({method:"GET",url:r,headers:{Authorization:"Bearer "+n}});case 7:return o=t.sent,t.abrupt("return",o.data);case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",e.handleRequestError(t.t0,"_getHearts"));case 14:case"end":return t.stop()}},t,null,[[4,11]])}))()},_buyHearts:function(){var e=this;return r(i().mark(function t(){var n,r,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=S("login_token")){t.next=3;break}return t.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return r=e.url+"/buyHearts",t.prev=4,t.next=7,s({method:"POST",url:r,headers:{Authorization:"Bearer "+n}});case 7:return o=t.sent,t.abrupt("return",o.data);case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",e.handleRequestError(t.t0,"_buyHearts"));case 14:case"end":return t.stop()}},t,null,[[4,11]])}))()},handleRequestError:function(e,t){if(console.error("API "+t+" failed:",e),e.response){var i,n,r=e.response.status;return 401===r&&e.response.data&&11===e.response.data.errcode?this.handleTokenExpired(e.response.data.message||"Login session expired. Please login again."):(500===r&&(console.log("Server error 500, clearing token and reloading game..."),S("login_token",null),window.location.reload()),{errcode:(null==(i=e.response.data)?void 0:i.errcode)||r,message:(null==(n=e.response.data)?void 0:n.message)||t+" failed with status "+r})}return{errcode:500,message:e.message||t+" Network Error"}},_getPlayerInfo:function(){var e=this;return r(i().mark(function t(){var n,r,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=S("login_token")){t.next=3;break}return t.abrupt("return",Promise.resolve({errcode:1,message:"Missing authorization token"}));case 3:return r=e.url+"/login",t.prev=4,t.next=7,s({method:"POST",url:r,data:{token:n}});case 7:return o=t.sent,t.abrupt("return",o.data);case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",e.handleRequestError(t.t0,"getPlayerInfo"));case 14:case"end":return t.stop()}},t,null,[[4,11]])}))()}},cc._RF.pop()},{"../../scripts/libs/axios":void 0,crypt:"crypt"}],settingModel:[function(e,t){"use strict";cc._RF.push(t,"c73721SFJZAjrV41I0ifTNw","settingModel"),t.exports={eventType:{SET_FRAMERATE:"settingModel.setFrameRate#val",SET_OPEN_EQUIP:{rank:"settingModel.setOpenEquip.rank",star:"settingModel.setOpenEquip.star"}},setFrameRate:function(e){e=H.num(e),M("data").setting.frameRate=e,E.emit(this.eventType.SET_FRAMERATE,e)},setOpenEquip:function(e,t){M("data").setting.openEquip[e]=t,E.emit(this.eventType.SET_OPEN_EQUIP[e])}},cc._RF.pop()},{}],setting:[function(e,t){"use strict";cc._RF.push(t,"03dd4YKwO1DIqe2mb9mb0k6","setting"),cc.Class({extends:e("ccBase"),properties:{frameRate60Btn:cc.Button,frameRate30Btn:cc.Button,musicBtn:cc.Button,effectBtn:cc.Button,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onEnable:function(){this.musicBtn.iconSprite=this.find("icon",cc.Sprite,this.musicBtn.node),this.effectBtn.iconSprite=this.find("icon",cc.Sprite,this.effectBtn.node),this.updAudio(),this.musicBtn.node.on("touchend",this.setMusic,this),this.effectBtn.node.on("touchend",this.setEffect,this),this.frameRate60Btn.node.on("touchend",this.setFrameRate,this),this.frameRate30Btn.node.on("touchend",this.setFrameRate,this),this.updFrameRateBtn()},onDisable:function(){this.musicBtn.node.off("touchend",this.setMusic,this),this.effectBtn.node.off("touchend",this.setEffect,this),this.frameRate60Btn.node.off("touchend",this.setFrameRate,this),this.frameRate30Btn.node.off("touchend",this.setFrameRate,this)},setMusic:function(){M("data").setting.audio.music=!M("data").setting.audio.music,G("audio").init(M("data").setting.audio),M("data").setting.audio.music?G("audio").playPreMusic():G("audio").stopMusic(),this.updAudio()},setEffect:function(){M("data").setting.audio.effect=!M("data").setting.audio.effect,G("audio").init(M("data").setting.audio),G("audio").stopAllEffects(),this.updAudio()},updAudio:function(){M("data").setting.audio.music?this.musicBtn.iconSprite.spriteFrame=this.onSpriteFrame:this.musicBtn.iconSprite.spriteFrame=this.offSpriteFrame,M("data").setting.audio.effect?this.effectBtn.iconSprite.spriteFrame=this.onSpriteFrame:this.effectBtn.iconSprite.spriteFrame=this.offSpriteFrame},setFrameRate:function(e){-1!=e.target.name.indexOf("60")?M("setting").setFrameRate(60):M("setting").setFrameRate(30),this.updFrameRateBtn()},updFrameRateBtn:function(){M("data").setting.frameRate>=60?(this.find("checkmark",this.frameRate60Btn.node).active=!0,this.find("checkmark",this.frameRate30Btn.node).active=!1):(this.find("checkmark",this.frameRate60Btn.node).active=!1,this.find("checkmark",this.frameRate30Btn.node).active=!0)}}),cc._RF.pop()},{ccBase:"ccBase"}],skillInfo:[function(e,t){"use strict";cc._RF.push(t,"9ded9k/3kRM3KA47FxfhSjV","skillInfo"),cc.Class({extends:e("popup"),properties:{},show:function(e){var t=this;this.itemNode=this.find("item"),this.itemNode.active=!1;var i=L("skillInfo."+e+".des").split("\n"),n=i[0],r=[];return i[1]&&(r=i[1].split(",")),this.itemNode.parent.active=r.length>0,this.find("desLabel",cc.Label).string=n,r.forEach(function(e){var i={};i.node=H.inst(t.itemNode),i.node.parent=t.itemNode.parent,i.label=t.find("label",cc.Label,i.node),i.label.string=e}),H.show(this)}}),cc._RF.pop()},{popup:"popup"}],skillMgr:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"e9fa1U3rGlPRbfsLH6N8eB/","skillMgr"),t.exports={eventType:{SET_LEVEL:"skillMgr.level",SET_PASSIVE_LEVEL:"skillMgr.passiveLevel"},init:function(e){e=i({},{parent1Node:null,parent2Node:null},e),this.parent1Node=e.parent1Node,this.parent2Node=e.parent2Node},reset:function(){console.log("\u91cd\u7f6e\u6280\u80fd\u7cfb\u7edf"),M("fight")&&M("fight").player&&(M("fight").player.skill={},M("fight").player.passiveSkill={})},checkRole:function(e){return!!e&&!(e.data.HP<=0)&&(e.state.sleep.cd>0?void 0:!(e.target&&"player"==e.target.group&&e.target.data.HP<=0))},setLevel:function(e,t,i){var n=this;if(void 0===i&&(i=1),e&&!(e.data.HP<=0)){if(null===i){var r=e.skills.filter(function(e){return e.skillName==t})[0];return r.remove&&r.remove(),r.removeAll&&r.removeAll(),e.node.removeComponent(r),e.skills=e.skills.filter(function(e){return e.skillName!=t}),void delete M("fight").player.skill[t]}if(e[t])e[t].initData(M("skill").createData({name:t,level:i})),M("fight").setSkillNum(t,"level",i),E.emit(this.eventType.SET_LEVEL,e,t);else{var o=function(r){e[t]=H.add$(e.node,r),e[t].init(e,t),e[t].initData(M("skill").createData({name:t,level:i})),e.skills.push(e[t]),M("fight").setSkillNum(t,"level",i),E.emit(n.eventType.SET_LEVEL,e,t)};if(["dart","fireBall","magicBall"].includes(t))return void o("bullet");o(t)}}},setPassiveLevel:function(e,t,i){if(void 0===i&&(i=1),e&&!(e.data.HP<=0)){M("fight").setPassiveSkillNum(t,"level",i);var n=M("fight").player.passiveSkill[t];if("HP"==t||"ATK"==t){var r=M("data").roles.filter(function(e){return e.selected})[0],o=M("role").createPlayerData(r.asset),s=n.level*n.pencent;"HP"==t&&(e.defData[t]=H.num(e.defData[t]+o[t]*(s/100)),G("role").setHP({self:e,target:e,action:"+",value:.1*e.defData.HP})),"ATK"==t&&(e.data[t]=H.num(e.data[t]+o[t]*(s/100)),e.defData[t]=H.num(e.defData[t]+o[t]*(s/100)))}"SPD"==t&&e.setMoveSpeed(n.level+1),"propRadius"==t&&e.setPropRadius(n.level+1),E.emit(this.eventType.SET_PASSIVE_LEVEL,e,t)}},getSpriteFrame:function(e,t){return void 0===t&&(t=0),app.find[e+"SpriteFrames"][t]}},cc._RF.pop()},{}],skillModel:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"df6d1yI1+5LDYMhDC+mJjqd","skillModel"),t.exports={eventType:{SET_CHIP:"skillModel.setChip#asset",UP_LEVEL:"skillModel.upLevel#asset"},createData:function(e){var t={};return"fireBall"==(e=i({},{name:"",level:1,hurtPercent:0},e)).name&&(t.hurtPercent=100,t.asset="fireBall",t.scale=1,t.angle=10,t.num=1,t.speed=400,t.cd=3,t.pierce=3,t.isRandTarget=!1,e.level>1&&(t.num=2),e.level>2&&(t.cd=2),e.level>3&&(t.num=3),e.level>4&&(t.scale=2,t.hurtPercent=150),e.level>5&&(t.num=4),e.level>6&&(t.cd=1),e.level>7&&(t.num=5),e.level>8&&(t.pierce=!1),e.level>9&&(t.asset="fireBall2",t.scale=4,t.cd=.5,t.num=2,t.isRandTarget=!0)),"stony"==e.name&&(t.hurtPercent=100,t.asset="stony",t.num=3,t.cd=3,t.radius=100,t.roundTime=2,t.scale=1,e.level>1&&(t.num=4),e.level>2&&(t.cd=2),e.level>3&&(t.radius=150),e.level>4&&(t.roundTime=1.5),e.level>5&&(t.num=5),e.level>6&&(t.cd=1),e.level>7&&(t.radius=200),e.level>8&&(t.roundTime=1),e.level>9&&(t.hurtPercent=150,t.asset="stony2",t.cd=0,t.roundTime=1,t.scale=1.2)),"dart"==e.name&&(t.hurtPercent=100,t.asset="dart",t.isRound=!1,t.angle=10,t.num=3,t.speed=600,t.cd=3,t.scale=1,t.pierce=1,e.level>1&&(t.angle=15,t.num=5),e.level>2&&(t.cd=2),e.level>3&&(t.pierce=2),e.level>4&&(t.angle=20,t.num=7),e.level>5&&(t.scale=1.5,t.cd=1),e.level>6&&(t.pierce=3),e.level>7&&(t.isRound=!0,t.angle=20),e.level>8&&(t.angle=15,t.pierce=4),e.level>9&&(t.cd=1.5,t.hurtPercent=150,t.asset="dart2",t.angle=25,t.scale=2,t.pierce=!1)),"drug"==e.name&&(t.hurtPercent=50,t.asset="drug",t.cd=3,t.num=1,t.scale=1,t.timeout=3,e.level>1&&(t.num=2),e.level>2&&(t.cd=2),e.level>3&&(t.scale=1.5),e.level>4&&(t.timeout=5),e.level>5&&(t.num=3),e.level>5&&(t.cd=1),e.level>6&&(t.scale=2),e.level>7&&(t.num=4),e.level>8&&(t.num=5),e.level>9&&(t.asset="drug2",t.num=6,t.hurtPercent=80)),"hole"==e.name&&(t.hurtPercent=50,t.asset="hole",t.scale=1,t.hurtCd=.5,e.level>1&&(t.scale=1.5),e.level>2&&(t.hurtPercent=60),e.level>3&&(t.scale=2),e.level>4&&(t.hurtPercent=70),e.level>5&&(t.scale=2.5),e.level>6&&(t.hurtPercent=80),e.level>7&&(t.scale=3),e.level>8&&(t.hurtPercent=90),e.level>9&&(t.asset="hole2",t.hurtPercent=100)),"sword"==e.name&&(t.hurtPercent=150,t.asset="sword",t.scale=1,t.cd=2,t.num=1,t.roundNum=1,e.level>1&&(t.scale=1.5),e.level>2&&(t.cd=t.cd/2),e.level>3&&(t.num=2),e.level>4&&(t.roundNum=2),e.level>5&&(t.scale=2),e.level>6&&(t.hurtPercent=165),e.level>7&&(t.num=3),e.level>8&&(t.hurtPercent=180),e.level>9&&(t.asset="sword2",t.hurtPercent=200,t.scale=1.5,t.num=3,t.cd=t.cd/2,t.roundNum=3)),"magicBall"==e.name&&(t.hurtPercent=100,t.asset="magicBall",t.scale=1,t.speed=600,t.cd=1,t.pierce=1,e.level>1&&(t.cd=.9),e.level>2&&(t.cd=.8),e.level>3&&(t.cd=.7),e.level>4&&(t.cd=.6),e.level>5&&(t.cd=.5),e.level>6&&(t.cd=.4),e.level>7&&(t.cd=.3),e.level>8&&(t.cd=.2),e.level>9&&(t.asset="magicBall2",t.hurtPercent=150,t.speed=800,t.cd=.05)),"lightning"==e.name&&(t.hurtPercent=100,t.asset="lightning",t.cd=3,t.scale=1,t.num=1,e.level>1&&(t.num=2),e.level>2&&(t.num=3),e.level>3&&(t.cd=2,t.num=4),e.level>4&&(t.num=5),e.level>5&&(t.num=6),e.level>6&&(t.num=7),e.level>7&&(t.num=8),e.level>8&&(t.num=9),e.level>9&&(t.asset="lightning2",t.hurtPercent=150,t.scale=1.5,t.num=10),t.cd=1),"boomerang"==e.name&&(t.hurtPercent=50,t.asset="boomerang",t.cd=3,t.scale=1,t.num=1,e.level>1&&(t.num=2),e.level>2&&(t.hurtPercent=60,t.num=3),e.level>3&&(t.num=4,t.cd=1.5),e.level>4&&(t.hurtPercent=70,t.num=5),e.level>5&&(t.hurtPercent=80,t.scale=1.5,t.num=6),e.level>6&&(t.num=7),e.level>7&&(t.num=8),e.level>8&&(t.num=9),e.level>9&&(t.hurtPercent=100,t.asset="boomerang2",t.num=10,t.scale=3,t.cd=1)),"bomb"==e.name&&(t.hurtPercent=100,t.asset="bomb",t.cd=3,t.scale=1,t.boomScale=1,t.num=1,t.speed=500,e.level>1&&(t.num=2),e.level>2&&(t.hurtPercent=110,t.num=3),e.level>3&&(t.num=4,t.cd=2),e.level>4&&(t.hurtPercent=120,t.num=5),e.level>5&&(t.hurtPercent=130,t.scale=1.5,t.num=6),e.level>6&&(t.num=7),e.level>7&&(t.num=8),e.level>8&&(t.num=9),e.level>9&&(t.hurtPercent=150,t.asset="bomb2",t.num=10,t.scale=1.5,t.boomScale=2,t.speed=600)),"ice"==e.name&&(t.hurtPercent=100,t.asset="ice",t.scale=1,t.num=1,t.speed=800,t.cd=3,t.pierce=1,t.freezeCd=2,t.freezeScale=1,e.level>1&&(t.num=2),e.level>2&&(t.cd=2),e.level>3&&(t.num=3),e.level>4&&(t.scale=1.5,t.hurtPercent=110,t.pierce=2),e.level>5&&(t.num=4),e.level>6&&(t.num=5),e.level>7&&(t.pierce=3),e.level>8&&(t.pierce=4),e.level>9&&(t.asset="ice2",t.cd=1.5,t.hurtPercent=150,t.speed=1e3,t.pierce=!1,t.freezeCd=3,t.freezeScale=1.5)),"knive"==e.name&&(t.hurtPercent=100,t.asset="knive",t.scale=1,t.num=1,t.speed=500,t.cd=3,e.level>1&&(t.num=2),e.level>2&&(t.cd=2),e.level>3&&(t.hurtPercent=110),e.level>4&&(t.scale=1.5),e.level>5&&(t.scale=2),e.level>6&&(t.speed=700),e.level>7&&(t.hurtPercent=120),e.level>8&&(t.hurtPercent=130),e.level>9&&(t.hurtPercent=150,t.asset="knive2",t.scale=3,t.num=3,t.cd=1.5)),"gem"==e.name&&(t.hurtPercent=50,t.asset="gem",t.scale=1,t.num=1,t.speed=1e3,t.cd=5,t.timeout=5,e.level>1&&(t.num=2),e.level>2&&(t.hurtPercent=60),e.level>3&&(t.num=3),e.level>4&&(t.hurtPercent=70),e.level>5&&(t.num=4),e.level>6&&(t.hurtPercent=80),e.level>7&&(t.num=5),e.level>8&&(t.hurtPercent=90),e.level>9&&(t.hurtPercent=100,t.asset="gem2",t.cd=3)),"laser"==e.name&&(t.hurtPercent=50,t.asset="laser",t.cd=3,t.num=1,t.scale=1,t.timeout=3,e.level>1&&(t.num=2),e.level>2&&(t.cd=2),e.level>3&&(t.num=3),e.level>4&&(t.scale=2),e.level>5&&(t.hurtPercent=60),e.level>6&&(t.num=4),e.level>7&&(t.num=5),e.level>8&&(t.scale=5),e.level>9&&(t.num=6,t.timeout=5,t.asset="laser2",t.cd=1.5,t.hurtPercent=80)),"tornado"==e.name&&(t.hurtPercent=50,t.asset="tornado",t.cd=5,t.num=1,t.scale=2,t.timeout=10,t.speed=200,e.level>1&&(t.num=2),e.level>2&&(t.cd=3),e.level>3&&(t.hurtPercent=60,t.speed=250),e.level>4&&(t.scale=2.5),e.level>5&&(t.hurtPercent=70),e.level>6&&(t.num=3,t.speed=300),e.level>7&&(t.scale=3),e.level>8&&(t.num=4),e.level>9&&(t.asset="tornado2",t.hurtPercent=80,t.num=5,t.cd=2.5,t.scale=4)),t.hurtPercent=t.hurtPercent+e.hurtPercent,t},getAllUpDatas:function(){var e=this,t=0,i=[];this.getBaseDatas().filter(function(t){var i=e.calUpLevel(t.name,1);return H.isEmpty(i.error)}).forEach(function(n){var r=e.getLevel(n.name);t+=r,i.push({asset:n.name,level:r})});var n=H.num(t/i.length);return i=i.filter(function(e){return e.level<=n}).sort(function(e,t){return e.level-t.level})},getBaseDatas:function(){var e=[];e.push({name:"fireBall",title:L("skillInfo.fireBall.title"),des:L("skillInfo.fireBall.des")}),e.push({name:"stony",title:L("skillInfo.stony.title"),des:L("skillInfo.stony.des")}),e.push({name:"dart",title:L("skillInfo.dart.title"),des:L("skillInfo.dart.des")}),e.push({name:"drug",title:L("skillInfo.drug.title"),des:L("skillInfo.drug.des")}),e.push({name:"sword",title:L("skillInfo.sword.title"),des:L("skillInfo.sword.des")}),e.push({name:"hole",title:L("skillInfo.hole.title"),des:L("skillInfo.hole.des")}),e.push({name:"magicBall",title:L("skillInfo.magicBall.title"),des:L("skillInfo.magicBall.des")}),e.push({name:"lightning",title:L("skillInfo.lightning.title"),des:L("skillInfo.lightning.des")}),e.push({name:"boomerang",title:L("skillInfo.boomerang.title"),des:L("skillInfo.boomerang.des")}),e.push({name:"bomb",title:L("skillInfo.bomb.title"),des:L("skillInfo.bomb.des")}),e.push({name:"ice",title:L("skillInfo.ice.title"),des:L("skillInfo.ice.des")}),e.push({name:"knive",title:L("skillInfo.knive.title"),des:L("skillInfo.knive.des")}),e.push({name:"gem",title:L("skillInfo.gem.title"),des:L("skillInfo.gem.des")}),e.push({name:"laser",title:L("skillInfo.laser.title"),des:L("skillInfo.laser.des")}),e.push({name:"tornado",title:L("skillInfo.tornado.title"),des:L("skillInfo.tornado.des")});var t=[],i=[];return M("role").getPlayerBaseDatas().forEach(function(n){var r=e.filter(function(e){return e.name==n.skillName})[0];r&&(i.push(r),t.push(r.name))}),i=i.concat(e.filter(function(e){return!t.includes(e.name)}))},getPassiveBaseDatas:function(){var e=[];return e.push({name:"propRadius",title:L("passiveSkillInfo.propRadius.title")}),e.push({name:"ATK",title:L("passiveSkillInfo.ATK.title"),pencent:5}),e.push({name:"HP",title:L("passiveSkillInfo.HP.title"),pencent:10}),e.push({name:"SPD",title:L("passiveSkillInfo.SPD.title")}),e},getMaxNum:function(e){return"passive"==e?2:5},setChip:function(e,t,i){void 0===t&&(t="+"),M("data").setChip("skill",e,t,i),E.emit(this.eventType.SET_CHIP,e)},getChip:function(e){var t=M("data").chip.skill?M("data").chip.skill[e]:null;return H.num(t)},getChipColor:function(){return"#00FFFF"},calUpLevel:function(e,t){void 0===t&&(t=1);var i={chip:0,gold:0,upNum:0,error:{}};if(t<1)return i;for(var n=function(e){var t={};return t.chip=2+2*e,t.gold=500+500*e,t},r=H.num(M("data").skill[e+"Level"]),o=t;!(t&&--o<0);){var s=n(r);i.chip+=s.chip,i.gold+=s.gold,r++,i.upNum++}return this.getChip(e)<i.chip&&(i.error.chip=L("error_chip")),M("data").prop.gold<i.gold&&(i.error.gold=L("error_gold")),i},getLevel:function(e){return H.num(M("data").skill[e+"Level"])},upLevel:function(e,t){var i=this;void 0===t&&(t=1);var n=this.calUpLevel(e,t);return H.isEmpty(n.error)&&R("server").api("upLevelSkill",{asset:e,upRes:n}).then(function(t){if(0==t.errcode){i.setChip(e,"-",n.chip),M("prop").setNum("gold","-",n.gold);var r=e+"Level";r in M("data").skill||(M("data").skill[r]=0),console.log("upLevel after ... 1",M("data").skill[r],n.upNum),M("data").skill[r]+=n.upNum,E.emit(i.eventType.UP_LEVEL,e),console.log("upLevel after ... 2",M("data").skill[r])}else 3==t.errcode?n.error.chip=L("error_chip"):4==t.errcode?n.error.gold=L("error_gold"):n.error.other="errors"}),n},isTip:function(){var e=this,t=!1;return this.getBaseDatas().forEach(function(i){var n=e.calUpLevel(i.name,1);H.isEmpty(n.error)&&(t=!0)}),t}},cc._RF.pop()},{}],skill:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"18321B8cZxKPp5weYyGkUNo","skill"),cc.Class({extends:e("ccBase"),properties:{},initBase:function(e){e=i({},{role:null,hurtPercent:100,skillName:""},e),this.role=e.role,this.hurtPercent=e.hurtPercent,this.skillName=e.skillName,this.collider=$(this.node,cc.BoxCollider),this.collider||(this.collider=$(this.node,cc.CircleCollider)),this.collider||(this.collider=$(this.node,cc.PolygonCollider)),this.collider&&(this.collider.onCollisionEnter=this.onEnter.bind(this),this.collider.onCollisionStay=this.onStay.bind(this),this.collider.onCollisionExit=this.onExit.bind(this),this.collider.enabled=!0),this.isCollide=!0,this.isStay=!1,this.isBullet=!1,this.isTemp=!1},onEnter:function(){},onStay:function(){},onExit:function(){}}),cc._RF.pop()},{ccBase:"ccBase"}],sortChildIndex:[function(e,t){"use strict";cc._RF.push(t,"6c4baUetUlK5qHLloQ31HTr","sortChildIndex"),cc.Class({editor:{menu:"base/sortChildIndex"},extends:e("ccBase"),properties:{},onLoad:function(){this._frame=0},sortChildrenByY:function(){var e=this.node.children.slice();e.sort(function(e,t){return t.getPosition().y-e.getPosition().y});for(var t=0;t<e.length;++t){var i=e[t];i.active&&i.setSiblingIndex(t+1)}},update:function(){this._frame++,this._frame%6==0&&(this._frame=0,this.sortChildrenByY())}}),cc._RF.pop()},{ccBase:"ccBase"}],stonyItem:[function(e,t){"use strict";cc._RF.push(t,"114b3dhmzZCv5J8xjF5LyVe","stonyItem"),cc.Class({extends:e("skill"),properties:{},onEnter:function(e){if(this.role){var t=$(e.node,"skill");if(t){if(t.role.group==this.role.group)return;if(!t.isBullet)return;if(t.remove)return G("effect").create({by:t.node,asset:"boom"}),void t.remove()}var i=G("role").getRole(e.node,!0);i&&i.group!=this.role.group&&i.hurtRepel&&i.hurtRepel(this.role.node)}}}),cc._RF.pop()},{skill:"skill"}],stony:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"663e6tGB/VDEr/nqSoW7Vnv","stony"),cc.Class({extends:e("ccBase"),properties:{},ctor:function(){this.items=[]},initData:function(e){e=i({},{asset:"",num:3,cd:3,radius:100,roundTime:2,timeout:5,scale:1,clockwise:!1,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.num=e.num,this.defCd=e.cd,this.cd=this.defCd,this.radius=e.radius,this.roundTime=e.roundTime,this.timeout=e.timeout,this.scale=e.scale,this.clockwise=e.clockwise,this.skillCd=0,this.removeAll()},init:function(e,t){this.role=e,this.skillName=t},onDisable:function(){this.removeAll()},createItems:function(){if(G("skill").checkRole(this.role)&&this.prefab)for(var e=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),t=1;t<=this.num;t++){var i=G("pool").get(this.prefab);i.parent=G("skill").parent2Node,i.scaleX=this.scale,i.scaleY=this.scale,$(i,"skill").initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName});var n={};n.node=i,n.angle=t*(360/this.num),this.updItemWorldPos(n,e),this.items.push(n)}},removeAll:function(){this.items&&this.items.forEach(function(e){G("pool").put(e.node)}),this.items=[]},updItemWorldPos:function(e,t){var i=Math.PI/180*e.angle,n=cc.v2(0,0);n.x=t.x+this.radius*Math.cos(i),n.y=t.y+this.radius*Math.sin(i),e.node.setWorldPosition(n)},updItems:function(e){var t=this;if(!(this.items.length<1)){var i=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.items.forEach(function(n){t.updItemWorldPos(n,i);var r=e*(360/t.roundTime);t.clockwise?n.angle-=r:n.angle+=r,n.angle>=360?n.angle%=360:n.angle<=-360&&(n.angle%=-360)})}},update:function(e){if(this.role&&!M("fight").stop)if(this.updItems(e),this.defCd<=0)this.items.length<1&&this.createItems();else{if(this.skillCd>0)return this.skillCd-=e,void(this.skillCd<=0&&this.removeAll());this.cd-=e,this.cd>0||(this.items.length<1&&this.createItems(),this.skillCd=this.timeout,this.cd=this.defCd)}}}),cc._RF.pop()},{ccBase:"ccBase"}],swordItem:[function(e,t){"use strict";cc._RF.push(t,"6f776kABgtGdavK+dBb2DUu","swordItem"),cc.Class({extends:e("skill"),properties:{},onEnter:function(e){if(this.role){var t=$(e.node,"skill");if(t){if(t.role.group==this.role.group)return;if(!t.isBullet)return;if(t.remove)return G("effect").create({by:t.node,asset:"boom"}),void t.remove()}var i=G("role").getRole(e.node,!0);i&&i.group!=this.role.group&&i.hurtRepel&&i.hurtRepel(this.role.node)}}}),cc._RF.pop()},{skill:"skill"}],sword:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"950e0AalhBEGLke4call7f5","sword"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t,this.items=[]},initData:function(e){e=i({},{asset:"",scale:2,cd:3,num:1,roundNum:1,hurtPercent:100},e),this.radius=this.role.node.width,this.hurtPercent=e.hurtPercent,this.num=e.num,this.scale=e.scale,this.prefab=app.getPrefab(e.asset),this.defCd=e.cd,this.cd=this.defCd,this.roundTime=1,this.defSkillCd=this.roundTime*e.roundNum,this.skillCd=0,this.removeAll()},createItems:function(){if(G("skill").checkRole(this.role)&&this.prefab)for(var e=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO),t=1;t<=this.num;t++){var i=G("pool").get(this.prefab);i.parent=G("skill").parent2Node,i.scaleX=this.scale,i.scaleY=this.scale,$(i,"skill").initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName});var n=i.width*this.scale;$(cc.find("track",i),cc.MotionStreak).stroke=.8*n;var r={};r.node=i,r.angle=t*(360/this.num),this.updItemWorldPos(r,e),this.items.push(r)}},updItemWorldPos:function(e,t){var i=Math.PI/180*e.angle,n=cc.v2(0,0);n.x=t.x+this.radius*Math.cos(i),n.y=t.y+this.radius*Math.sin(i),e.node.setWorldPosition(n)},updItems:function(e){var t=this;if(!(this.items.length<1)){var i=this.role.bodyNode.getWorldPosition(cc.Vec2.ZERO);this.items.forEach(function(n){t.updItemWorldPos(n,i);var r=e*(360/t.roundTime);n.angle-=r,n.angle>=360?n.angle%=360:n.angle<=-360&&(n.angle%=-360);var o=n.node.getWorldPosition(cc.Vec2.ZERO),s=i,a=180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI;n.node.angle=a})}},removeAll:function(){this.items&&(this.items.forEach(function(e){G("pool").put(e.node)}),this.items=[])},onDisable:function(){this.removeAll()},update:function(e){if(this.role&&!M("fight").stop){if(this.updItems(e),this.skillCd>0)return this.skillCd-=e,void(this.skillCd<=0&&this.removeAll());this.cd-=e,this.cd>0||(this.createItems(),this.cd=this.defCd,this.skillCd=this.defSkillCd)}}}),cc._RF.pop()},{ccBase:"ccBase"}],taptap:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"423c7DVXnJI1oxhiUIEj5QR","taptap");var n=e("native"),r=n.isAndroid,o=n.isIos,s={};sdkEvent.TapTap={},sdkEvent.TapTap.login={},s.init=function(e){r&&n.call("TapTap","init","(Ljava/lang/String;)V",e),o&&n.call("TapTap","init",e)},s.login={},s.login.sign=function(){r&&n.call("TapTap","login","()V"),o&&n.call("TapTap","login")},s.login.out=function(){r&&n.call("TapTap","logout","()V"),o&&n.call("TapTap","logout")},s.login.onError=function(){},sdkEvent.TapTap.login.onError=function(){var e;(e=s.login).onError.apply(e,arguments)},s.login.onClose=function(){},sdkEvent.TapTap.login.onClose=function(){var e;(e=s.login).onClose.apply(e,arguments)},s.login.onSign=function(){},sdkEvent.TapTap.login.onSign=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];setTimeout(function(){var e;(e=s.login).onSign.apply(e,t)},1e3)},sdkEvent.TapTap.anti={},s.anti={},s.anti.show=function(e){e=i({},{userIdentifier:"",isTapUser:!1},e),r&&n.call("TapTap","showAnti","(Ljava/lang/String;)V",JSON.stringify(e)),o&&n.call("TapTap","showAnti",JSON.stringify(e))},s.anti.onSuccess=function(){},sdkEvent.TapTap.anti.onSuccess=function(){var e;(e=s.anti).onSuccess.apply(e,arguments)},s.anti.onClose=function(){},sdkEvent.TapTap.anti.onClose=function(){var e;(e=s.anti).onClose.apply(e,arguments)},s.anti.exit=function(){r&&n.call("TapTap","exitAnti","()V"),o&&n.call("TapTap","exitAnti")},s.anti.getAgeRange=function(){return r?n.call("TapTap","getAntiAgeRange","()I"):o?n.call("TapTap","getAntiAgeRange"):void 0},s.anti.getRemainingTime=function(){return r?n.call("TapTap","getAntiRemainingTime","()I"):o?n.call("TapTap","getAntiRemainingTime"):void 0},s.anti.enterGame=function(){return r?n.call("TapTap","antiEnterGame","()V"):o?n.call("TapTap","antiEnterGame"):void 0},s.anti.leaveGame=function(){return r?n.call("TapTap","antiLeaveGame","()V"):o?n.call("TapTap","antiLeaveGame"):void 0},t.exports=s,cc._RF.pop()},{native:"native"}],tip:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"de2d6UlLgRHHrnl6F/XSrYN","tip"),cc.Class({extends:e("ccPopup"),properties:{},onLoad:function(){this.touchClose=!1,this.fullBgNode=this.find("fullBg"),this.textNode=this.find("text"),this.loadingNode=this.find("loading"),this.timeout=0},onEnable:function(){this.addEvent(this.node),this._super()},onDisable:function(){this.option=null,this.removeEvent(this.node),this._super()},tipEvent:function(){this.option.touchClose&&(this.timeout>0&&this.unschedule(this.close),this.close())},getConfig:function(){return{color:"#FFFFFF",touchClose:!1,showFull:!1,showAnim:!0}},config:function(e){void 0===e&&(e={});var t=this.getConfig();return this.option=i({},t,e),this},text:function(e,t){void 0===t&&(t=0),this.timeout=t,H.setIndex(this.node,"last"),this.node.active=!0,this.unscheduleAllCallbacks(),this.closeTween&&this.closeTween.stop(),this.option||(this.option=this.getConfig()),this.loadingNode.active=!1,this.fullBgNode.active=this.option.showFull,this.textNode.active=!0;var i=this.find("label",cc.Label,this.textNode);return i.node.color=new cc.color(this.option.color),i.string=H.toString(e),this.option.showAnim?(this.textNode.scaleX=.5,this.textNode.scaleY=.5,cc.tween(this.textNode).to(.1,{scaleX:1.2,scaleY:1.2}).to(.05,{scaleX:1,scaleY:1}).start()):(this.textNode.scaleX=1,this.textNode.scaleY=1),t>0&&this.scheduleOnce(this.close,t),this},error:function(e,t,i){void 0===i&&(i="#FFFFFF"),this.show(e,"#FF0000",t,i)},success:function(e,t,i){void 0===i&&(i="#FFFFFF"),this.show(e,"#00FF00",t,i)},show:function(e,t,i,n){void 0===t&&(t="#FFFFFF"),void 0===n&&(n="#FFFFFF"),e=e.toString().replace(/\\n/g,", ");var r=G("pool").get(app.getPrefab("tipItem")),o=cc.find("tipItemParent",this.node.parent);if(!o){(o=new cc.Node).name="tipItemParent",o.parent=this.node.parent,o.anchorY=0;var s=H.add$(o,cc.Layout,!0);s.type=cc.Layout.Type.VERTICAL,s.resizeMode=cc.Layout.ResizeMode.CONTAINER,s.spacingY=5}H.setIndex(o,"last"),r.parent=o;var a=this.find("bg/layout/icon",cc.Sprite,r);a.node.color=cc.color(n),i?(a.node.active=!0,a.spriteFrame=i):a.node.active=!1;var c=this.find("bg/layout/label",cc.Label,r);c.node.color=cc.color(t),c.string=e;var l=cc.find("bg",r);l.y=0,l.scaleX=.9,l.scaleY=.9,l.opacity=255,cc.tween(l).to(.1,{scaleX:1.1,scaleY:1.1}).to(.1,{scaleX:1,scaleY:1}).to(1,{scaleX:1,scaleY:1}).to(.2,{y:100,opacity:50}).call(function(){G("pool").put(r)}).start()},showTop:function(e,t,i){void 0===i&&(i="#00FF00"),e=e.toString().replace(/\\n/g,", ");var n=G("pool").get(app.getPrefab("tipTopItem")),r=cc.find("tipTopItemParent",this.node.parent);if(!r){(r=new cc.Node).name="tipTopItemParent",r.parent=this.node.parent,r.anchorY=1,r.height=n.height,H.add$(r,cc.Mask,!0);var o=H.add$(r,cc.Widget,!0);o.isAlignLeft=!0,o.isAlignRight=!0,o.isAlignTop=!0,o.top=0,o.left=0,o.right=0,o.updateAlignment();var s=H.add$(r,cc.Layout,!0);s.type=cc.Layout.Type.VERTICAL,s.resizeMode=cc.Layout.ResizeMode.CONTAINER,s.spacingY=0,s.updateLayout()}H.setIndex(r,"last"),n.parent=r;var a=this.find("bg/layout/icon",cc.Sprite,n);t?(a.node.active=!0,a.spriteFrame=t):a.node.active=!1;var c=this.find("bg/layout/label",cc.Label,n);c.node.color=cc.color(i),c.string=e;var l=cc.find("bg",n);l.y=n.height,cc.tween(l).to(.2,{y:0}).to(3).to(.1,{y:n.height}).call(function(){G("pool").put(n)}).start()},showLoading:function(e){this.closeTween&&this.closeTween.stop(),this.option||(this.option=this.getConfig()),H.setIndex(this.node,"last"),this.node.active=!0,this.loadingNode.active=!0,this.fullBgNode.active=this.option.showFull,this.textNode.active=!1;var t=this.find("label",cc.Label,this.loadingNode);return t.node.active=!!e,e&&(t.node.color=new cc.color(this.option.color),t.string=H.toString(e)),this},close:function(){var e=this;if(this.node.active)return this.textNode.active&&this.option.showAnim?(this.closeTween=cc.tween(this.textNode),void this.closeTween.to(.05,{scaleX:.5,scaleY:.5}).call(function(){e.node.active=!1}).start()):void(this.node.active=!1)}}),cc._RF.pop()},{ccPopup:"ccPopup"}],topup:[function(e,t){"use strict";cc._RF.push(t,"936666T7qtNm5odz3y3joSF","topup"),cc.Class({extends:e("popup"),properties:{WALLET_ADDRESS:{default:"bc1pwgk6jr4anmvn3weuendvpzz0jahvlkygxvhj8hnt3xazxftxd8eswwq0h6",type:cc.String},WALLET_ADDRESS_LABEL:{default:"Transfer BRC20 $potato to: ",type:cc.String},INFO_TEXT:{default:"1 $potato = 1\ud83e\udd54 in game",type:cc.String}},onLoad:function(){this.touchClose=!1,this.addBtnEvents(),this.find("wallet_label",cc.Label).string=this.WALLET_ADDRESS_LABEL+this.WALLET_ADDRESS,this.find("info_label",cc.Label).string=this.INFO_TEXT},btn1Event:function(){this.remove()},btn2Event:function(){R("native").copyText(this.WALLET_ADDRESS),V("tip").show("Copy successful"),this.remove()},callFunc:function(){},show:function(e,t){return this.callFunc=t,this.find("btn1/label",cc.Label).string=L("ok"),this.find("btn2/label",cc.Label).string=L("copy"),this.walletLabel=this.find("wallet_label",cc.Label),e?(this.walletLabel.node.active=!0,this.walletLabel.string=e):(this.walletLabel.node.active=!0,this.walletLabel.string=this.WALLET_ADDRESS_LABEL+this.WALLET_ADDRESS),this.infoLabel=this.find("info_label",cc.Label),this.infoLabel.node.active=!0,this.infoLabel.string=this.INFO_TEXT,H.show(this)},showAgree:function(e,t){return this.callFunc=t,this.find("btn1/label",cc.Label).string=L("agree"),this.find("btn2/label",cc.Label).string=L("refuse"),this.walletLabel=this.find("wallet_label",cc.Label),e?(this.walletLabel.node.active=!0,this.walletLabel.string=e):this.walletLabel.node.active=!1,this.infoLabel=this.find("info_label",cc.Label),this.infoLabel.node.active=!0,this.infoLabel.string=this.INFO_TEXT,H.show(this)}}),cc._RF.pop()},{popup:"popup"}],tornadoItem:[function(e,t){"use strict";cc._RF.push(t,"6f2145xAg5GQLR25tjGOHrN","tornadoItem"),cc.Class({extends:e("skill"),properties:{},init:function(e,t){this.speed=e,this.timeout=t,this.anim=this.find("anim",cc.Animation),this.anim.play(this.node.name);var i=H.getWorldPos(this.role.node),n=app.screen.width/2*.5,r=app.screen.height/2*.5,o=H.randNum(-n,n),s=H.randNum(-r,r);this.node.setWorldPosition(cc.v2(i.x+o,i.y+s)),this.dir=this.getRandDir(),this.changeDirCd=0,this.defHurtCd=.2,this.hurtCd=this.defHurtCd,this.isCollide=!1,this.isStay=!0,this.randCd=0,this.isInit=!0},checkView:function(){return app.screen.checkView(this.role.node,this.node)},getRandDir:function(){var e=G("role").getEnemyWorldPos(this.role),t=H.getWorldPos(this.role.node);return e.sub(t).normalize()},onStay:function(e){if(this.role){var t=G("role").getRole(e.node,!0);t&&t.group!=this.role.group&&t.suck&&t.suck(this.node)}},remove:function(){var e=this;this.anim.play("remove").once(cc.Animation.EventType.FINISHED,function(){G("pool").put(e.node)})},changeDir:function(e){if(this.changeDirCd>0)return H.getWorldPos(this.role.bodyNode).sub(H.getWorldPos(this.node)).normalize();this.changeDirCd=.2;var t=cc.v2(0,0),i=this.checkView();return i.isMaxX?t.x=1:i.isMaxY&&(t.y=1),e.sub(t.mul(2*cc.Vec2.dot(e,t)))},update:function(e){if(this.role&&!M("fight").stop&&this.isInit)if(this.hurtCd>0?(this.hurtCd-=e,this.isCollide=!1):(this.hurtCd=this.defHurtCd,this.isCollide=!0),this.timeout-=e,this.timeout<=0)this.collider.enabled&&(this.collider.enabled=!1,this.remove());else if(this.dir){this.changeDirCd-=e,this.randCd+=e;var t=this.checkView();t.isMaxX||t.isMaxY?this.dir=this.changeDir(this.dir):this.randCd>=1&&(this.randCd=0,H.calOdds(20)&&(this.dir=this.getRandDir()));var i=this.speed*e;this.node.x+=this.dir.x*i,this.node.y+=this.dir.y*i}}}),cc._RF.pop()},{skill:"skill"}],tornado:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}cc._RF.push(t,"58e75wnOtZOv4JVlRR/wtzc","tornado"),cc.Class({extends:e("ccBase"),properties:{},init:function(e,t){this.role=e,this.skillName=t},initData:function(e){e=i({},{asset:"",scale:2,num:1,cd:1,timeout:10,speed:100,hurtPercent:100},e),this.hurtPercent=e.hurtPercent,this.prefab=app.getPrefab(e.asset),this.scale=e.scale,this.num=e.num,this.speed=e.speed,this.timeout=e.timeout,this.defCd=e.cd,this.cd=this.defCd,this.skillCd=0},createItems:function(){if(G("skill").checkRole(this.role)){this.skillCd=this.timeout;for(var e=1;e<=this.num;e++){var t=G("pool").get(this.prefab);t.scaleX=this.scale,t.scaleY=this.scale,t.parent=G("role").parent1Node;var i=$(t,"skill");i.initBase({role:this.role,hurtPercent:this.hurtPercent,skillName:this.skillName}),i.init(this.speed,this.timeout)}}},update:function(e){this.role&&this.prefab&&(M("fight").stop||(this.skillCd>0?this.skillCd-=e:(this.cd-=e,this.cd>0||"enemy"==this.role.group&&this.role.animExt.isPlaying("move")||(this.createItems(),this.cd=this.defCd))))}}),cc._RF.pop()},{ccBase:"ccBase"}],tradplus:[function(e,t){"use strict";cc._RF.push(t,"11f42GnbD5Fp6TkTqUhYMfa","tradplus");var i=e("native"),n=i.isAndroid,r=i.isIos;sdkEvent.TradPlus={},sdkEvent.TradPlus.RewardedVideo={};var o={init:function(e){n&&i.call("TradPlus","init","(Ljava/lang/String;)V",e),r&&i.call("iTradPlus","init",e),console.log("==========TradPlus.init",e)},onInit:function(){}};sdkEvent.TradPlus.onInit=function(){o.onInit()},o.RewardedVideo={},o.RewardedVideo.init=function(e){n&&i.call("TradPlus$RewardedVideo","init","(Ljava/lang/String;)V",e),r&&i.call("iTradPlus","rewardedVideoAd_init",e)},o.RewardedVideo.loadAd=function(){n&&i.call("TradPlus$RewardedVideo","loadAd","()V"),r&&i.call("iTradPlus","rewardedVideoAd_loadAd")},o.RewardedVideo._showAd=function(){n&&i.call("TradPlus$RewardedVideo","showAd","()V"),r&&i.call("iTradPlus","rewardedVideoAd_showAd")},o.RewardedVideo.isReady=function(){return n?i.call("TradPlus$RewardedVideo","isReady","()Z"):!!r&&i.call("iTradPlus","rewardedVideoAd_isReady")},["onAdLoaded","onAdClicked","onAdImpression","onAdFailed","onAdClosed","onAdReward","onAdVideoStart","onAdVideoEnd","onAdVideoError"].forEach(function(e){o.RewardedVideo[e]=function(){},sdkEvent.TradPlus.RewardedVideo[e]=function(){var t;console.log("==========TradPlus.RewardedVideo."+e),(t=o.RewardedVideo)[e].apply(t,arguments),"onAdLoaded"!=e&&(o.RewardedVideo.loading=!1,o.RewardedVideo.timer&&clearInterval(o.RewardedVideo.timer))}}),o.RewardedVideo.onTimeout=function(){},o.RewardedVideo.onLoading=function(){},o.RewardedVideo.loading=!1,o.RewardedVideo.showAd=function(){if(o.RewardedVideo.loading)o.RewardedVideo.onLoading();else{if(o.RewardedVideo.loading=!0,o.RewardedVideo.isReady())return o.RewardedVideo._showAd(),void(o.RewardedVideo.loading=!1);var e=5;o.RewardedVideo.timer=setInterval(function(){o.RewardedVideo.isReady()&&(o.RewardedVideo._showAd(),o.RewardedVideo.loading=!1,clearInterval(o.RewardedVideo.timer)),o.RewardedVideo.loadAd(),--e<=0&&(o.RewardedVideo.loading=!1,o.RewardedVideo.onTimeout(),clearInterval(o.RewardedVideo.timer))},1e3)}},sdkEvent.TradPlus.Interstitial={},o.Interstitial={},o.Interstitial.init=function(e){n&&i.call("TradPlus$Interstitial","init","(Ljava/lang/String;)V",e),r&&i.call("iTradPlus","Interstitial_init",e)},o.Interstitial.loadAd=function(){n&&i.call("TradPlus$Interstitial","loadAd","()V"),r&&i.call("iTradPlus","Interstitial_loadAd")},o.Interstitial.showAd=function(){n&&i.call("TradPlus$Interstitial","showAd","()V"),r&&i.call("iTradPlus","Interstitial_showAd")},o.Interstitial.isReady=function(){return n?i.call("TradPlus$Interstitial","isReady","()Z"):!!r&&i.call("iTradPlus","Interstitial_isReady")},["onAdLoaded","onAdClicked","onAdImpression","onAdFailed","onAdClosed","onAdVideoStart","onAdVideoEnd","onAdVideoError"].forEach(function(e){o.Interstitial[e]=function(){},sdkEvent.TradPlus.Interstitial[e]=function(){var t;console.log("==========TradPlus.Interstitial."+e),(t=o.Interstitial)[e].apply(t,arguments)}}),t.exports=o,cc._RF.pop()},{native:"native"}],"zh-hant":[function(e,t){"use strict";var i;cc._RF.push(t,"60fa6vBjxxKqYVr5QEeB+bL","zh-hant"),t.exports=((i={app_name:"\u9b54\u6cd5\u5144\u5f1f",ios_app_name:"\u9b54\u6cd5\u5144\u5f1f",android_app_name:"\u9b54\u7378\u5144\u5f1f",error_action:"\u64cd\u4f5c\u5931\u6557",error_chip:"\u788e\u7247\u4e0d\u8db3",error_gold:"\u91d1\u5e63\u4e0d\u8db3",error_role:"\u89d2\u8272\u5f02\u5e38",error_timeout:"\u8d85\u6642",error_ad:"\u6c92\u6709\u5408\u9069\u7684\u5ee3\u544a\u8acb\u7a0d\u5f8c\u518d\u8a66",error_ad_ready:"\u5ee3\u544a\u6c92\u6709\u6e96\u5099\u597d",error_equipNum:"\u88dd\u5099\u5bf6\u7bb1\u4e0d\u8db3",error_cd:"\u51b7\u537b\u4e2d",error_revive:"\u5fa9\u6d3b\u6b21\u6578\u4e0d\u8db3",error_equip_level:"\u4e0d\u80fd\u8d85\u904e\u7576\u524d\u95dc\u5361",error_version:"\u6709\u65b0\u7684\u7248\u672c\n\u9ede\u64ca\u9000\u51fa\u91cd\u5553\u904a\u6232\uff1f",error_guest:"\u904a\u5ba2\u4e0d\u80fd\u64cd\u4f5c",error_data:"\u6578\u64da\u4e0d\u5b58\u5728",error_length:"\u9577\u5ea6%{length}\u500b\u5b57\u5143",error_sid_friendSid:"\u4e0d\u80fd\u8f38\u5165\u81ea\u5df1\u7684ID",error_sid_max:"\u7d81\u5b9a\u6578\u91cf\u4e0a\u9650",error_sid_self:"\u8a72ID\u5df2\u88ab\u60a8\u7d81\u5b9a",error_select_role:"\u4e0d\u80fd\u9078\u64c7\u672a\u64c1\u6709\u7684\u82f1\u96c4",error_no_upLevel:"\u6c92\u6709\u53ef\u4ee5\u965e\u7d1a\u7684",success_action:"\u64cd\u4f5c\u6210\u529f",success_uploadData:"\u4e0a\u50b3\u6210\u529f",success_upLevel:"\u965e\u7d1a\u6210\u529f",success_buy:"\u8cfc\u8cb7\u6210\u529f",success_gain:"\u7372\u53d6\u6210\u529f",success_revive:"\u5fa9\u6d3b\u6210\u529f",loading:"\u52a0\u8f09\u4e2d",login_guest:"\u904a\u5ba2\u767b\u9304",login_guest_unisat:"Unisat\u767b\u5165",login_guest_web3:"OKX WEB3 WALLET",login_qq:"QQ\u767b\u5165",login_taptap:"TapTap\u767b\u5165",login_apple:"Apple\u767b\u5165",login_out:"\u767b\u51fa",delete_data:"\u5220\u9664\u6578\u64da",exitGame:"\u9000\u51fa\u904a\u6232",sid:"ID",copy:"\u8907\u88fd",input:"\u8f38\u5165",doc_user:"\u4f7f\u7528\u8005\u5354\u5b9a",doc_privacy:"\u96b1\u79c1\u653f\u7b56",reportToAdmin:"\u554f\u984c\u8ff4\u97ff",uploadData:"\u4e0a\u50b3\u6578\u64da",never:"\u5f9e\u672a",ok:"\u78ba\u5b9a"}).copy="\u8907\u88fd",i.yes="\u78ba\u5b9a",i.close="\u95dc\u9589",i.agree="\u540c\u610f",i.refuse="\u62d2\u7d55",i.guestLoginTips="\u904a\u5ba2\u6a21\u5f0f\u4e0d\u80fd\u96f2\u5b58\u6a94\n\u662f\u5426\u9032\u5165\u904a\u6232\uff1f",i.sidTip="\u8f38\u5165\u670b\u53cb\u7684ID\u7372\u5f97\u734e\u52f5",i.playDayTip="\u5df2\u966a\u4f34\u60a8%{day}\u5929",i.roleHelpTip="\u8cfc\u8cb7\u6216\u965e\u7d1a\u5176\u4ed6\u89d2\u8272\u7d66\u5df2\u9078\u64c7\u82f1\u96c4\n[+2\u751f\u547d]\u6216[+1\u653b\u64ca]",i.skillHelpTip="\u965e\u7d1a\u6280\u80fd\u7d66\u5df2\u9078\u64c7\u82f1\u96c4\n[+1\u751f\u547d]\u6216[+0.5\u653b\u64ca]",i.deleteDataTip="\u5220\u9664\u672c\u6a5f\u548c\u670d\u52d9\u5668\u6578\u64da,\u662f\u5426\u7e7c\u7e8c\uff1f",i.reportToAdminTip="\u8acb\u544a\u8a34\u6211\u5011\u60a8\u9047\u5230\u7684\u554f\u984c",i.gameCenterSignTip="\u672a\u767b\u9304GameCenter\n\u662f\u5426\u5728\u624b\u6a5f\u8a2d\u5b9a\u88cf\u6253\u958b\uff1f",i.gameCenterSend="\u4e0a\u50b3\u6210\u7e3e",i.frameRate="\u6230\u9b25\u5e40\u7387",i.startGame="\u958b\u59cb\u904a\u6232",i.notHave="\u672a\u64c1\u6709",i.get="\u9818\u53d6",i.canGain="\u53ef\u9818\u53d6",i.buy="\u8cfc\u8cb7",i.select="\u9078\u64c7",i.upLevel="\u965e\u7d1a",i.allUpLevel="\u4e00\u9375\u965e\u7d1a",i.gain="\u7372\u53d6",i.allGain="\u5168\u90e8\u7372\u53d6",i.continue="\u7e7c\u7e8c",i.exit="\u9000\u51fa",i.revive="\u5fa9\u6d3b",i.noAttr="\u7121\u5185\u5bb9",i.noEquip="\u7121\u88dd\u5099",i.currentEquip="\u7576\u524d\u88dd\u5099",i.all="\u5168\u90e8",i.condition="\u689d\u4ef6",i.sell="\u51fa\u552e",i.equip="\u88dd\u5099",i.hero="\u82f1\u96c4",i.skill="\u6280\u80fd",i.achive="\u6210\u5c31",i.hurt="\u50b7\u5bb3",i.dps="\u6bcf\u79d2",i.ATKPencent="\u653b\u64ca",i.HPPencent="\u751f\u547d",i.critOdds="\u66b4\u64ca",i.doubleOdds="\u96d9\u500d",i.audioMusic="\u97f3\u6a02",i.audioEffect="\u97f3\u6548",i.fightLevel="\u7b2c%{level}\u95dc",i.total="\u7e3d\u8a08",i.done="\u5b8c\u6210",i.achiveInfo={lookAd:{video:"\u89c0\u770b\u5ee3\u544a"},gainProp:{gold:"\u6230\u9b25\u4e2d\u7372\u53d6\u91d1\u5e63",equipNum:"\u6230\u9b25\u4e2d\u7372\u53d6\u88dd\u5099\u5bf6\u7bb1"},useRole:"\u4f7f\u7528\u7576\u524d\u82f1\u96c4\u901a\u95dc",useSkill:"\u6230\u9b25\u4e2d\u4f7f\u7528\u7576\u524d\u6280\u80fd",usePassiveSkill:"\u6230\u9b25\u4e2d\u5347\u81f3\u6eff\u7d1a"},i.skillFightUplevel="\u6230\u9b25\u965e\u7d1a",i.skillInfo={hole:{title:"\u6df1\u6df5",title2:"\u7121\u76e1",des:"\u5c0d\u7bc4\u570d\u5167\u6575\u4eba\u9020\u6210\uff080.5\u79d2/\u6b21\uff09\u50b7\u5bb3\n\u50b7\u5bb3,\u7bc4\u570d"},fireBall:{title:"\u706b\u7403",title2:"\u672b\u65e5",des:"\u653b\u64ca\u6700\u8fd1\u7684\u76ee\u6a19\u4e26\u64ca\u9000\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u7a7f\u900f"},sword:{title:"\u528d",title2:"\u8056\u528d",des:"\u5728\u8eab\u908a\u74b0\u7e5e\u5c0d\u6575\u4eba\u9020\u6210\u50b7\u5bb3\u4e26\u64ca\u9000\uff08\u683c\u64cb\u5b50\u5f48\uff09\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u6301\u7e8c\u6642\u9593"},dart:{title:"\u98db\u93e2",title2:"\u98a8\u9b54",des:"\u767c\u5c04\u591a\u500b\u653b\u64ca\u6700\u8fd1\u7684\u76ee\u6a19\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u7a7f\u900f"},drug:{title:"\u6bd2\u6db2",title2:"\u5287\u6bd2",des:"\u5728\u96a8\u6a5f\u4f4d\u7f6e\u751f\u6210\u4e26\u4e14\u5c0d\u6575\u4eba\u9020\u6210\uff080.2\u79d2/\u6b21\uff09\n\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u6301\u7e8c\u6642\u9593"},stony:{title:"\u9695\u77f3",title2:"\u6d41\u661f",des:"\u5728\u8eab\u908a\u74b0\u7e5e\u5c0d\u6575\u4eba\u9020\u6210\u50b7\u5bb3\u4e26\u64ca\u9000\uff08\u683c\u64cb\u5b50\u5f48\uff09\n\u51b7\u537b\u6642\u9593,\u6301\u7e8c\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u901f\u5ea6"},magicBall:{title:"\u80fd\u91cf\u7403",title2:"\u9b54\u6cd5\u7403",des:"\u653b\u64ca\u6700\u8fd1\u7684\u6575\u4eba\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3"},lightning:{title:"\u9583\u96fb",title2:"\u5954\u96f7",des:"\u653b\u64ca\u96a8\u6a5f\u76ee\u6a19\u4e26\u4e14\u7206\u70b8\uff08\u9644\u5e3650%\u50b7\u5bb3\uff09\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf"},boomerang:{title:"\u8ff4\u65cb\u93e2",title2:"\u5f3a\u529b\u93e2",des:"\u653b\u64ca\u96a8\u6a5f\u76ee\u6a19\u4e26\u8fd4\u56de\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d"},bomb:{title:"\u70b8\u5f48",title2:"\u7206\u7834\u5f48",des:"\u653b\u64ca\u96a8\u6a5f\u76ee\u6a19\u7206\u70b8\u9020\u6210\u7bc4\u570d\u50b7\u5bb3\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d"},ice:{title:"\u51b0\u7bad",title2:"\u51b0\u7834",des:"\u653b\u64ca\u96a8\u6a5f\u76ee\u6a19\u4e26\u51cd\u7d50\n\u51b7\u537b\u6642\u9593,\u6301\u7e8c\u6642\u9593,\u50b7\u5bb3,\u6578\u91cf,\u7a7f\u900f"},knive:{title:"\u534a\u6708\u65ac",title2:"\u6708\u5149\u65ac",des:"\u653b\u64ca\u6700\u8fd1\u7684\u76ee\u6a19\u4e26\u7a7f\u900f\uff08\u683c\u64cb\u5b50\u5f48\uff09\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf"},gem:{title:"\u5bf6\u77f3",title2:"\u7480\u74a8",des:"\u653b\u64ca\u6700\u8fd1\u7684\u76ee\u6a19\u4e26\u5728\u8996\u91ce\u908a\u7de3\u53cd\u5c04\uff08\u6301\u7e8c5\u79d2\uff09\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u6578\u91cf"},laser:{title:"\u96f7\u5c04",title2:"\u8d85\u80fd",des:"\u96a8\u6a5f\u65b9\u5411\u9020\u6210\uff080.2\u79d2/\u6b21\uff09\u50b7\u5bb3\n\u51b7\u537b\u6642\u9593,\u6301\u7e8c\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf"},tornado:{title:"\u9f8d\u6372\u98a8",title2:"\u98a8\u66b4",des:"\u96a8\u6a5f\u65b9\u5411\u9020\u6210\uff080.2\u79d2/\u6b21\uff09\u50b7\u5bb3\u4e26\u6372\u5165\n\u51b7\u537b\u6642\u9593,\u50b7\u5bb3,\u7bc4\u570d,\u6578\u91cf,\u901f\u5ea6"}},i.passiveSkillInfo={propRadius:{title:"\u62fe\u53d6\u7bc4\u570d"},SPD:{title:"\u79fb\u52d5\u901f\u5ea6"},ATK:{title:"\u653b\u64ca\u529b"},HP:{title:"\u751f\u547d\u4e0a\u9650"}},i),cc._RF.pop()},{}],zh:[function(e,t){"use strict";var i;cc._RF.push(t,"36ef5rDatJAoYx7n5vU+Wlx","zh"),t.exports=((i={app_name:"\u9b54\u6cd5\u5144\u5f1f",ios_app_name:"\u9b54\u6cd5\u5144\u5f1f",android_app_name:"\u9b54\u517d\u5144\u5f1f",error_action:"\u64cd\u4f5c\u5931\u8d25",error_chip:"\u788e\u7247\u4e0d\u8db3",error_gold:"\u91d1\u5e01\u4e0d\u8db3",error_role:"\u89d2\u8272\u5f02\u5e38",error_timeout:"\u8d85\u65f6",error_ad:"\u6ca1\u6709\u5408\u9002\u7684\u5e7f\u544a\u8bf7\u7a0d\u540e\u518d\u8bd5",error_ad_ready:"\u5e7f\u544a\u6ca1\u6709\u51c6\u5907\u597d",error_equipNum:"\u88c5\u5907\u5b9d\u7bb1\u4e0d\u8db3",error_cd:"\u51b7\u5374\u4e2d",error_revive:"\u590d\u6d3b\u6b21\u6570\u4e0d\u8db3",error_equip_level:"\u4e0d\u80fd\u8d85\u8fc7\u5f53\u524d\u5173\u5361",error_version:"\u6709\u65b0\u7684\u7248\u672c\n\u70b9\u51fb\u9000\u51fa\u91cd\u542f\u6e38\u620f?",error_guest:"\u6e38\u5ba2\u4e0d\u80fd\u64cd\u4f5c",error_data:"\u6570\u636e\u4e0d\u5b58\u5728",error_length:"\u957f\u5ea6%{length}\u4e2a\u5b57\u7b26",error_sid_friendSid:"\u4e0d\u80fd\u8f93\u5165\u81ea\u5df1\u7684ID",error_sid_max:"\u7ed1\u5b9a\u6570\u91cf\u4e0a\u9650",error_sid_self:"\u8be5ID\u5df2\u88ab\u60a8\u7ed1\u5b9a",error_select_role:"\u4e0d\u80fd\u9009\u62e9\u672a\u62e5\u6709\u7684\u82f1\u96c4",error_no_upLevel:"\u6ca1\u6709\u53ef\u4ee5\u5347\u7ea7\u7684",success_action:"\u64cd\u4f5c\u6210\u529f",success_uploadData:"\u4e0a\u4f20\u6210\u529f",success_upLevel:"\u5347\u7ea7\u6210\u529f",success_buy:"\u8d2d\u4e70\u6210\u529f",success_gain:"\u83b7\u53d6\u6210\u529f",success_revive:"\u590d\u6d3b\u6210\u529f",loading:"\u52a0\u8f7d\u4e2d",login_guest:"\u6e38\u5ba2\u767b\u5f55",login_guest_unisat:"Unisat\u767b\u5f55",login_guest_web3:"OKX WEB3 WALLET",login_qq:"QQ\u767b\u5f55",login_taptap:"TapTap\u767b\u5f55",login_apple:"Apple\u767b\u5f55",login_out:"\u9000\u51fa\u767b\u5f55",delete_data:"\u5220\u9664\u6570\u636e",exitGame:"\u9000\u51fa\u6e38\u620f",sid:"ID",copy:"\u590d\u5236",input:"\u8f93\u5165",doc_user:"\u7528\u6237\u534f\u8bae",doc_privacy:"\u9690\u79c1\u653f\u7b56",reportToAdmin:"\u95ee\u9898\u53cd\u9988",uploadData:"\u4e0a\u4f20\u6570\u636e",never:"\u4ece\u672a",ok:"\u786e\u5b9a"}).copy="\u590d\u5236",i.yes="\u786e\u5b9a",i.close="\u5173\u95ed",i.agree="\u540c\u610f",i.refuse="\u62d2\u7edd",i.guestLoginTips="\u6e38\u5ba2\u6a21\u5f0f\u4e0d\u80fd\u4e91\u5b58\u6863\n\u662f\u5426\u8fdb\u5165\u6e38\u620f?",i.sidTip="\u8f93\u5165\u670b\u53cb\u7684ID\u83b7\u5f97\u5956\u52b1",i.playDayTip="\u5df2\u966a\u4f34\u60a8 %{day} \u5929",i.roleHelpTip="\u8d2d\u4e70\u6216\u5347\u7ea7\u5176\u4ed6\u89d2\u8272\u7ed9\u5df2\u9009\u62e9\u82f1\u96c4\n[+2\u751f\u547d]\u6216[+1\u653b\u51fb]",i.skillHelpTip="\u5347\u7ea7\u6280\u80fd\u7ed9\u5df2\u9009\u62e9\u82f1\u96c4\n[+1\u751f\u547d]\u6216[+0.5\u653b\u51fb]",i.deleteDataTip="\u5220\u9664\u672c\u673a\u548c\u670d\u52a1\u5668\u6570\u636e\uff0c\u662f\u5426\u7ee7\u7eed?",i.reportToAdminTip="\u8bf7\u544a\u8bc9\u6211\u4eec\u60a8\u9047\u5230\u7684\u95ee\u9898",i.gameCenterSignTip="\u672a\u767b\u5f55GameCenter\n\u662f\u5426\u5728\u624b\u673a\u8bbe\u7f6e\u91cc\u6253\u5f00?",i.gameCenterSend="\u4e0a\u4f20\u6210\u7ee9",i.frameRate="\u6218\u6597\u5e27\u7387",i.startGame="\u5f00\u59cb\u6e38\u620f",i.notHave="\u672a\u62e5\u6709",i.get="\u9886\u53d6",i.canGain="\u53ef\u9886\u53d6",i.buy="\u8d2d\u4e70",i.select="\u9009\u62e9",i.upLevel="\u5347\u7ea7",i.allUpLevel="\u4e00\u952e\u5347\u7ea7",i.gain="\u83b7\u53d6",i.allGain="\u5168\u90e8\u83b7\u53d6",i.continue="\u7ee7\u7eed",i.exit="\u9000\u51fa",i.revive="\u590d\u6d3b",i.noAttr="\u65e0\u5c5e\u6027",i.noEquip="\u65e0\u88c5\u5907",i.currentEquip="\u5f53\u524d\u88c5\u5907",i.all="\u5168\u90e8",i.condition="\u6761\u4ef6",i.sell="\u51fa\u552e",i.equip="\u88c5\u5907",i.hero="\u82f1\u96c4",i.skill="\u6280\u80fd",i.achive="\u6210\u5c31",i.hurt="\u4f24\u5bb3",i.dps="\u6bcf\u79d2",i.ATKPencent="\u653b\u51fb",i.HPPencent="\u751f\u547d",i.critOdds="\u66b4\u51fb",i.doubleOdds="\u53cc\u500d",i.audioMusic="\u97f3\u4e50",i.audioEffect="\u97f3\u6548",i.fightLevel="\u7b2c %{level} \u5173",i.total="\u603b\u8ba1",i.done="\u5b8c\u6210",i.achiveInfo={lookAd:{video:"\u89c2\u770b\u5e7f\u544a"},gainProp:{gold:"\u6218\u6597\u4e2d\u83b7\u53d6\u91d1\u5e01",equipNum:"\u6218\u6597\u4e2d\u83b7\u53d6\u88c5\u5907\u5b9d\u7bb1"},useRole:"\u4f7f\u7528\u5f53\u524d\u82f1\u96c4\u901a\u5173",useSkill:"\u6218\u6597\u4e2d\u4f7f\u7528\u5f53\u524d\u6280\u80fd",usePassiveSkill:"\u6218\u6597\u4e2d\u5347\u81f3\u6ee1\u7ea7"},i.skillFightUplevel="\u6218\u6597\u5347\u7ea7",i.skillInfo={hole:{title:"\u6df1\u6e0a",title2:"\u65e0\u5c3d",des:"\u5bf9\u8303\u56f4\u5185\u654c\u4eba\u9020\u6210(0.5\u79d2/\u6b21)\u4f24\u5bb3\n\u4f24\u5bb3,\u8303\u56f4"},fireBall:{title:"\u706b\u7403",title2:"\u672b\u65e5",des:"\u653b\u51fb\u6700\u8fd1\u7684\u76ee\u6807\u5e76\u51fb\u9000\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u7a7f\u900f"},sword:{title:"\u5251",title2:"\u5723\u5251",des:"\u5728\u8eab\u8fb9\u73af\u7ed5\u5bf9\u654c\u4eba\u9020\u6210\u4f24\u5bb3\u5e76\u51fb\u9000(\u683c\u6321\u5b50\u5f39)\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u6301\u7eed\u65f6\u95f4"},dart:{title:"\u98de\u9556",title2:"\u98ce\u9b54",des:"\u53d1\u5c04\u591a\u4e2a\u653b\u51fb\u6700\u8fd1\u7684\u76ee\u6807\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u7a7f\u900f"},drug:{title:"\u6bd2\u6db2",title2:"\u5267\u6bd2",des:"\u5728\u968f\u673a\u4f4d\u7f6e\u751f\u6210\u5e76\u4e14\u5bf9\u654c\u4eba\u9020\u6210(0.2\u79d2/\u6b21)\n\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u6301\u7eed\u65f6\u95f4"},stony:{title:"\u9668\u77f3",title2:"\u6d41\u661f",des:"\u5728\u8eab\u8fb9\u73af\u7ed5\u5bf9\u654c\u4eba\u9020\u6210\u4f24\u5bb3\u5e76\u51fb\u9000(\u683c\u6321\u5b50\u5f39)\n\u51b7\u5374\u65f6\u95f4,\u6301\u7eed\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u901f\u5ea6"},magicBall:{title:"\u80fd\u91cf\u7403",title2:"\u9b54\u6cd5\u7403",des:"\u653b\u51fb\u6700\u8fd1\u7684\u654c\u4eba\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3"},lightning:{title:"\u95ea\u7535",title2:"\u5954\u96f7",des:"\u653b\u51fb\u968f\u673a\u76ee\u6807\u5e76\u4e14\u7206\u70b8(\u9644\u5e2650%\u4f24\u5bb3)\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf"},boomerang:{title:"\u56de\u65cb\u9556",title2:"\u5f3a\u529b\u9556",des:"\u653b\u51fb\u968f\u673a\u76ee\u6807\u5e76\u8fd4\u56de\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4"},bomb:{title:"\u70b8\u5f39",title2:"\u7206\u7834\u5f39",des:"\u653b\u51fb\u968f\u673a\u76ee\u6807\u7206\u70b8\u9020\u6210\u8303\u56f4\u4f24\u5bb3\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4"},ice:{title:"\u51b0\u7bad",title2:"\u51b0\u7834",des:"\u653b\u51fb\u968f\u673a\u76ee\u6807\u5e76\u51bb\u7ed3\n\u51b7\u5374\u65f6\u95f4,\u6301\u7eed\u65f6\u95f4,\u4f24\u5bb3,\u6570\u91cf,\u7a7f\u900f"},knive:{title:"\u534a\u6708\u65a9",title2:"\u6708\u5149\u65a9",des:"\u653b\u51fb\u6700\u8fd1\u7684\u76ee\u6807\u5e76\u7a7f\u900f(\u683c\u6321\u5b50\u5f39)\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf"},gem:{title:"\u5b9d\u77f3",title2:"\u7480\u74a8",des:"\u653b\u51fb\u6700\u8fd1\u7684\u76ee\u6807\u5e76\u5728\u89c6\u91ce\u8fb9\u7f18\u53cd\u5c04(\u6301\u7eed5\u79d2)\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u6570\u91cf"},laser:{title:"\u6fc0\u5149",title2:"\u8d85\u80fd",des:"\u968f\u673a\u65b9\u5411\u9020\u6210(0.2\u79d2/\u6b21)\u4f24\u5bb3\n\u51b7\u5374\u65f6\u95f4,\u6301\u7eed\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf"},tornado:{title:"\u9f99\u5377\u98ce",title2:"\u98ce\u66b4",des:"\u968f\u673a\u65b9\u5411\u9020\u6210(0.2\u79d2/\u6b21)\u4f24\u5bb3\u5e76\u5377\u5165\n\u51b7\u5374\u65f6\u95f4,\u4f24\u5bb3,\u8303\u56f4,\u6570\u91cf,\u901f\u5ea6"}},i.passiveSkillInfo={propRadius:{title:"\u62fe\u53d6\u8303\u56f4"},SPD:{title:"\u79fb\u52a8\u901f\u5ea6"},ATK:{title:"\u653b\u51fb\u529b"},HP:{title:"\u751f\u547d\u4e0a\u9650"}},i),cc._RF.pop()},{}]},{},["app","ccHelper","crypt","helper","i18n","BigNumber","circular-json","crypto-js","polyglot.min","qs","localStorage","LocalizedLabel","LocalizedSprite","animExt","autoHideChild","autoLayout","ccBase","ccPopup","screen","sortChildIndex","initApp","audioMgr","poolMgr","apple","native","qq","taptap","tradplus","adBox","audio","camera","equipDataInfo","equip","gameCneter","rewardItem","setting","en","zh-hant","zh","adMgr","dropPropMgr","effectMgr","roleMgr","skillMgr","achiveModel","dataModel","equipModel","fightModel","gameCenterModel","gameModel","propModel","roleModel","settingModel","skillModel","server","effect","fightBg","dropPropTip","dropProp","fight","fightSkillThumb","joystickInput","keyboardInput","enemyGroup","enemyNear","enemyRange","player","roleArrowTip","roleBase","bomb","bombItem","boomerang","boomerangItem","bullet","bulletItem","fireBallItem","drug","drugItem","fireJet","gem","gemItem","hole","ice","iceItem","knive","kniveItem","laser","laserItem","lightning","lightningItem","skill","stony","stonyItem","sword","swordItem","tornado","tornadoItem","find","index","indexAchive","indexEquip","indexEquipSetting","indexHero","indexSkill","selectLevel","loading","login","adBoxInfo","addEquip","agreement","animMask","confirm","equipInfo","fightStop","fightUpLevel","gainTip","inputSid","my","popup","reportToAdmin","skillInfo","topup","root","tip"]);